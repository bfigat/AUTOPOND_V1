import{b as _}from"./chunk-4KFGKT5B.js";import"./chunk-4P3F3ICM.js";import{c as O}from"./chunk-3P3EBL6I.js";import{b as $}from"./chunk-EQDXPIVC.js";import"./chunk-RBBZHETH.js";import{a as z}from"./chunk-EQXZ32NI.js";import"./chunk-R5HJQXZQ.js";import"./chunk-WFPABEAU.js";import"./chunk-PPMPQKRK.js";import{b as R}from"./chunk-UDFQ3C42.js";import"./chunk-P4LRI3S3.js";import"./chunk-GBKSQA4Y.js";import{b,i as C,j as N,k}from"./chunk-UFPGJN5T.js";import{Z as D,a as T,c as F,n as r,o as p,p as W}from"./chunk-BFV33OZC.js";import"./chunk-MT5RYI7C.js";import"./chunk-EMR4O6UP.js";import{gd as L}from"./chunk-S6KJ2BHO.js";import"./chunk-7ZZNCPHU.js";import{a as q,m as v}from"./chunk-MNQ7RLHG.js";import"./chunk-N7UFQNLW.js";import{D as Q}from"./chunk-NMZ7IVPZ.js";import"./chunk-H6ILHDLW.js";import{a as M}from"./chunk-7X4NV6OJ.js";import"./chunk-UNDMYLJW.js";import{f as A,h as P,n as S}from"./chunk-3KENBVE7.js";P();S();var t=A(M());P();S();var c=A(M()),B=c.default.memo(e=>{let{t:i}=v(),{name:a,logo:m,tag:n,quote:o,onClick:u,index:f}=e,l={start:c.default.createElement("img",{className:T({size:44,borderRadius:"circle"}),src:m,alt:a}),topLeft:a,bottomLeft:n&&{text:n,color:f===0?"accentSuccess":"textSecondary"},onClick:()=>u(e)},s=o?{...l,topRight:o.displayDestinationAmount,bottomRight:`\u2248 ${o.displaySourceAmount}`}:{...l,end:c.default.createElement(r,{direction:"row",alignItems:"center",gap:4},c.default.createElement(p,{children:i("buyThirdPartyScreenViewQuote"),font:"caption",color:"textSecondary"}),c.default.createElement(F.ChevronRight,{color:"textSecondary",size:16}))};return c.default.createElement(W,{...s})});var ht=()=>{let{t:e}=v(),i=k(),{onProviderSelected:a,isLoading:m,providers:n,paymentMethod:o,quoteTimeToExpiry:u,quoteTimeToExpiryColor:f,context:l}=K();return t.default.createElement(r,{margin:16,maxHeight:"100%",height:"100%"},t.default.createElement(_,{isLoading:m,isEmpty:n.length===0,emptyStateText:e("buyThirdPartyScreenProvidersEmptyState"),header:t.default.createElement(r,{direction:"row",alignContent:"center",position:"relative"},t.default.createElement(r,{position:"absolute",left:0,zIndex:10,cursor:"pointer"},t.default.createElement(F.ArrowLeft,{size:24,color:"textSecondary",onClick:()=>void i.popStack()})),t.default.createElement(p,{flex:1,font:"heading3",align:"center"},e("fiatRampQuotes"))),content:t.default.createElement(t.default.Fragment,null,t.default.createElement(r,{gap:8,marginBottom:96,marginTop:12,flex:1},t.default.createElement(z,{marginBottom:12}),t.default.createElement(D,{rows:[{type:"drawer",id:"selected-payment-method",onClick:()=>void i.to("fiat-ramp-detail-payment-methods"),start:o?.assets?.icon&&t.default.createElement($,{image:{type:"fungible",src:o.assets.icon},size:24}),topLeft:o?.name||e("buyThirdPartyScreenPaymentMethod")}]}),t.default.createElement(r,{direction:"row",justifyContent:"space-between"},t.default.createElement(p,{font:"bodyMedium",color:"textSecondary",children:e("buyThirdPartyScreenProviders")}),t.default.createElement("div",null,t.default.createElement(p,{font:"captionMedium",color:"textSecondary",children:`${e("fiatRampNewQuote")}:`})," ",t.default.createElement(p,{className:T({width:32}),font:"captionMedium",color:f,children:u}))),t.default.createElement(r,{gap:8,flex:1,overflow:"scroll"},n.map((s,g)=>t.default.createElement(B,{key:`${s.id}-${g}`,index:g,onClick:a,...s}))))),context:l}))},K=()=>{let e=k(),i=C(),a=C(d=>d.setState),{fungible:m,purchaseAmount:n,purchaseType:o,paymentMethod:u,ownerPublicKey:f,context:l}=i,s=L();if(!m)throw new Error("No fungible asset selected");let{currencyCode:g}=R(),{data:h,isPending:w}=N("web-embedded",Q,q.language,{...o==="currency"?{fiatAmount:n}:{tokenAmount:n},token:m.caip19,fiatCurrencyCode:g,paymentMethodId:u?.id,destinationAddress:{address:f,chainId:m.caip19.chainId,resourceType:"address"}}),x=u||h?.paymentMethod,E=h?.providers||[],U=(0,t.useCallback)(d=>{s.capture("fiatOnrampProviderSelected",{data:{chainId:h?.token?.chainId,providerId:d.id,paymentMethodId:x?.id,destinationAmount:d.quote?.displayDestinationAmount,sourceAmount:d.quote?.displaySourceAmount,asset:h?.token,tag:d.tag}}),a({...i,provider:d,paymentMethod:x,checkoutQuoteType:"selected"}),e.popStack()},[i,h?.token,x,a,s,e]),[y,I]=(0,t.useState)(b);O(()=>{w||E.length===0||I(y===0?b:y-1)},w?null:1e3);let V=y<10?`0:0${y}`:`0:${y}`,j=y<=10?"accentWarning":"textPrimary";return{providers:E,paymentMethod:x,onProviderSelected:U,closeModal:()=>!0,isLoading:w,quoteTimeToExpiry:V,quoteTimeToExpiryColor:j,context:l}};export{ht as FiatRampProvidersPage};
//# sourceMappingURL=FiatRampProvidersPage-D3GSQHOK.js.map
