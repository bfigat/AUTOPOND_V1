import{A as Ge,B as Xe,a as He,b as G,l as Qe,s as Ke,w as qe}from"./chunk-O3FOQ5KU.js";import{a as Ue}from"./chunk-FZVJDBMC.js";import"./chunk-ZO7JSY7P.js";import{a as $e}from"./chunk-A44V4WIN.js";import"./chunk-FPTUM3GF.js";import{ba as _e,da as re}from"./chunk-VZIPQGVK.js";import"./chunk-B5HUTZOW.js";import"./chunk-4BIFBETB.js";import"./chunk-AEGB75R5.js";import{a as ee}from"./chunk-TU4CQRN3.js";import"./chunk-GIUU5FZA.js";import"./chunk-I5RT5666.js";import"./chunk-F4B3PU3Z.js";import"./chunk-RAXNGD6N.js";import"./chunk-255U7RYV.js";import"./chunk-RNS57IWG.js";import"./chunk-S24UABH5.js";import"./chunk-GD4PMTOF.js";import{h as W}from"./chunk-MP5POVPU.js";import"./chunk-EGXLQXDH.js";import{a as R}from"./chunk-XNMBE4DK.js";import{b as Ve}from"./chunk-RE3FKPVD.js";import"./chunk-X5D7DNCH.js";import{a as ze}from"./chunk-CNOUWZHQ.js";import"./chunk-VL5EYDTL.js";import"./chunk-3P3EBL6I.js";import{a as ve}from"./chunk-OVQZ6HTN.js";import{b as J}from"./chunk-EQDXPIVC.js";import"./chunk-ZON27MKP.js";import"./chunk-I6TBOMK3.js";import"./chunk-7PWA24OU.js";import"./chunk-7KE5H3S3.js";import"./chunk-W27Z2YZM.js";import"./chunk-HRJPGCUD.js";import"./chunk-XJTFMD4C.js";import"./chunk-QY4L72L3.js";import"./chunk-VDM5O2ZT.js";import"./chunk-7ZVEM3WY.js";import"./chunk-VQVTLSDS.js";import{j as We}from"./chunk-BL5NQCM4.js";import{db as ne,j as Me}from"./chunk-ONJA4ZEG.js";import{a as Ce,e as T}from"./chunk-RBBZHETH.js";import{Aa as De,O as Se,R as be,Ua as Le,Va as Be,Wa as Ee,Za as q,fa as ke,ha as Pe,hb as Oe,ia as Te,pa as Ie,sa as Fe,wa as Ae,xa as Ne}from"./chunk-ZZPI23JA.js";import"./chunk-UCBZOSRF.js";import"./chunk-ZSQU2ZM6.js";import"./chunk-2THQDEWP.js";import"./chunk-O5D25TI4.js";import"./chunk-PKAXVJFX.js";import"./chunk-DUJHHCZR.js";import{b as we}from"./chunk-YOIJCLV6.js";import"./chunk-TBS5VNTB.js";import"./chunk-BTKBODVJ.js";import"./chunk-EQXZ32NI.js";import"./chunk-GS2UJNU3.js";import"./chunk-R5HJQXZQ.js";import"./chunk-WFPABEAU.js";import"./chunk-PPMPQKRK.js";import"./chunk-UDFQ3C42.js";import"./chunk-P4LRI3S3.js";import"./chunk-GBKSQA4Y.js";import"./chunk-IBEI3NGL.js";import"./chunk-ALR5MBQI.js";import"./chunk-UFPGJN5T.js";import{A as j,B as he,a as S,b as ye,c as Z,j as U,k as xe,n as f,o as b,w as $}from"./chunk-BFV33OZC.js";import"./chunk-MT5RYI7C.js";import"./chunk-EMR4O6UP.js";import{gb as Y,gd as fe,ke as ge,ob as ue}from"./chunk-S6KJ2BHO.js";import"./chunk-7ZZNCPHU.js";import{a as de,m as h}from"./chunk-MNQ7RLHG.js";import"./chunk-N7UFQNLW.js";import"./chunk-NMZ7IVPZ.js";import{R as te}from"./chunk-H6ILHDLW.js";import{a as P}from"./chunk-7X4NV6OJ.js";import"./chunk-UNDMYLJW.js";import{f as k,h as t,n}from"./chunk-3KENBVE7.js";t();n();var m=k(P());t();n();var F=k(P());t();n();var u=k(P());t();n();var br=k(P());var H=T.div`
  display: flex;
  align-items: center;
  height: 36px;
  input {
    font-size: ${e=>e.fontSize??34}px;
    line-height: 1;
    font-weight: 600;
    padding: 0;
    background: none;
  }
`,zr=T.div`
  width: 100%;
  margin-top: 11px;
  margin-bottom: 10px;
`;var Vr=T.div`
  color: #ab9ff2;
  font-size: 14px;
  font-weight: 400;
  white-space: nowrap;
  cursor: pointer;
  margin-left: 5px;
  border-radius: 8px;
  padding: 8px;
  &:hover {
    background-color: #333333;
  }
`;t();n();var C=k(P()),Q=({input:e,isLoading:r,onSelectorPress:o,perspective:s,selectorIcon:c,selectorLabel:i,accessories:p,footer:l})=>{let{t:x}=h(),w=x(s==="buy"?"swapAssetCardBuyTitle":"swapAssetCardSellTitle"),A=(0,C.useMemo)(()=>{if(p)return C.default.createElement(f,{display:"flex",direction:"row",alignItems:"center",gap:6,marginTop:6},p)},[p]);(0,C.useEffect)(()=>{s==="buy"?q.markFrame("buyTokenUpdated"):q.markFrame("sellTokenUpdated")},[i,s]);let D=C.default.createElement(f,{display:"flex",direction:"column",gap:0,backgroundColor:"bgRow",borderRadius:"table",padding:20},C.default.createElement(b,{font:"labelSemibold",color:"textTertiary",children:w}),C.default.createElement(f,{display:"flex",direction:"row",alignItems:"center",minHeight:48},e,C.default.createElement(f,{flex:1}),r?C.default.createElement(U,{width:112,height:24}):C.default.createElement(f,{onPress:o,display:"flex",gap:8,direction:"row",backgroundColor:{base:"gray",hover:"borderPrimary"},paddingY:4,paddingLeft:4,paddingRight:8,alignItems:"center",borderRadius:"full",cursor:"pointer",testID:`${s}-token-button`},c,C.default.createElement(b,{font:"captionSemibold",color:"textPrimary",children:i}),C.default.createElement(Z.ChevronDown,{size:14}))),A);return yr(D,l)},yr=(e,r)=>r?C.default.createElement(f,{direction:"column",backgroundColor:"bgRow",borderRadius:"table"},e,r):e;t();n();var L=k(P()),Ye=({warnings:e})=>{if(e.length===0)return null;let r=e[0],o=i=>{switch(i.level){case"warn":return{backgroundColor:"accentWarning",textColor:"bgWallet"};case"info":return{backgroundColor:"bgRow",textColor:"textPrimary"}}},{backgroundColor:s,textColor:c}=o(r);return L.default.createElement(L.default.Fragment,null,L.default.createElement(f,{width:"100%",height:1,backgroundColor:"bgWallet"}),L.default.createElement(f,{gap:8,direction:"row",backgroundColor:s,padding:"screen",borderBottomRadius:"table"},L.default.createElement(f,{flexShrink:0},L.default.createElement(Z.AlertTriangle,{color:c,size:18})),L.default.createElement(b,{flexShrink:1,font:"caption",color:c,children:de.t(r.titleKey,r.options)})))};t();n();var Ze=32,oe="_4ag7710",je="_4ag7712 _51gaznvh _51gazn11c _51gaznwv";t();n();var B=k(P()),Je={secondaryContainer:S({display:"flex",flexDirection:"row",alignItems:"center",gap:6}),pointer:S({cursor:"pointer"})},Re=({isLoading:e,usdAmount:r,cryptoSubtitle:o,supportsCurrencyDenominationSwitching:s,switchCurrencyDenomination:c})=>{let i=ke(l=>l.primaryCurrency),p=(0,B.useMemo)(()=>e?B.default.createElement(U,{width:40,height:18,borderRadius:12,testID:"secondary-price-loader"}):i==="crypto"&&r!==void 0?B.default.createElement(ve,{font:"caption",color:"textSecondary",value:r,intlNumberFormatOptions:{notation:"compact"}}):i==="fiat"&&o?B.default.createElement(b,{font:"caption",color:"textSecondary",children:o}):null,[o,i,e,r]);return B.default.createElement("div",{className:Je.secondaryContainer,onClick:c},p,s?B.default.createElement($,{icon:"SwapVertical",size:20,shape:"circle",backgroundColor:{base:"gray",hover:"borderPrimary"},color:"textSecondary",className:Je.pointer}):null)};var ie={filters:S({display:"flex",flexDirection:"row",alignItems:"center",gap:4,marginLeft:2}),currencyPrefix:S({marginRight:2}),accessoryContainer:S({alignItems:"center",display:"flex",flexDirection:"row",gap:6,marginTop:6}),spacer:S({flex:1})},er=({asset:e,perspective:r,onInputChange:o,onFungibleTap:s,onFilterTap:c,switchCurrencyDenomination:i,onBalanceTap:p})=>{let{amount:l,balance:x,fungible:w,isAmountEditable:A,isAmountLoading:D,isSecondaryCryptoSubtitleLoading:v,isWarning:d,secondaryCryptoSubtitle:V,amountPrefix:E,selectedFilter:a,filters:O,supportsCurrencyDenominationSwitching:X,usdAmount:pe}=e,{t:le}=h(),ur=u.default.createElement(J,{image:{type:"fungible",src:w.data?.logoUri,fallback:w.data?.symbol||w.data?.tokenAddress},size:32,tokenType:w.type,chainMeta:w.data?.chain}),fr=M=>M.length>16?16:M.length>14?18:M.length>12?20:22,gr=(0,u.useMemo)(()=>{let M=fr(l);return D?u.default.createElement(U,{width:100,height:18,borderRadius:12}):u.default.createElement(H,{hasWarning:d,fontSize:M},u.default.createElement(b,{font:"heading3",children:E,className:ie.currencyPrefix}),u.default.createElement(W,{name:"amount",border:"0",placeholder:"0",warning:d,value:l,decimalLimit:w.data?.decimals,disabled:!A,onUserInput:o}))},[D,d,E,l,w.data?.decimals,A,o]),ce=(0,u.useMemo)(()=>u.default.createElement(Re,{isLoading:v,usdAmount:pe,cryptoSubtitle:V,supportsCurrencyDenominationSwitching:X,switchCurrencyDenomination:i}),[v,pe,V,X,i]),me=(0,u.useMemo)(()=>{let M=_=>{switch(_){case .25:return"25%";case .5:return"50%";case 1:return le("swapAssetCardMaxButton")}};return O.map(_=>u.default.createElement(j,{key:_,active:_===a,children:M(_),onChange:()=>c(_),className:oe}))},[O,le,a,c]),wr=(0,u.useMemo)(()=>u.default.createElement(u.default.Fragment,null,ce,u.default.createElement("div",{className:ie.spacer}),u.default.createElement(b,{font:"caption",color:{base:"textSecondary",hover:p?"textPrimary":void 0},children:x,onPress:p}),u.default.createElement("div",{className:ie.filters},me)),[x,me,p,ce]),Sr=(0,u.useMemo)(()=>{if(e.warnings.length!==0)return u.default.createElement(Ye,{warnings:e.warnings})},[e.warnings]);return u.default.createElement(Q,{perspective:r,input:gr,selectorIcon:ur,selectorLabel:w.data?.symbol??"",onSelectorPress:s,accessories:wr,footer:Sr})};t();n();var K=k(P());var rr=({onSelectorTap:e,perspective:r})=>{let{t:o}=h();return K.default.createElement(Q,{perspective:r,input:K.default.createElement(H,{hasWarning:!1,fontSize:32},K.default.createElement(W,{name:"amount",border:"0",placeholder:"0",warning:!1,value:"",decimalLimit:0,disabled:!0,onUserInput:()=>{}})),selectorIcon:K.default.createElement($,{icon:"Plus",size:28,shape:"circle",color:"textPrimary",backgroundColor:"bgArea"}),selectorLabel:o("commandSelect"),onSelectorPress:e,accessories:K.default.createElement(b,{font:"caption",color:"textSecondary",children:"$0"})})};t();n();var g=k(P());var ae={filters:S({display:"flex",flexDirection:"row",alignItems:"center",gap:4,marginLeft:2}),secondaryContainer:S({display:"flex",flexDirection:"row",alignItems:"center",gap:6}),currencyPrefix:S({marginRight:2}),accessoryContainer:S({alignItems:"center",display:"flex",flexDirection:"row",gap:6,marginTop:6}),spacer:S({flex:1})},xr=[.5,1],or=({perspective:e})=>{let{t:r}=h(),o=(0,g.useMemo)(()=>{let p=Number(ye.typography.font.heading3.fontSize.replace("px",""));return g.default.createElement(H,{fontSize:p},g.default.createElement(W,{name:"amount",border:"0",placeholder:"0",warning:!1,value:e==="sell"?"":"0",onUserInput:()=>{}}))},[e]),s=(0,g.useMemo)(()=>g.default.createElement(b,{font:"caption",color:"textSecondary",children:"$0"}),[]),c=(0,g.useMemo)(()=>{let p=l=>{switch(l){case .25:return"25%";case .5:return"50%";case 1:return r("swapAssetCardMaxButton")}};return xr.map(l=>g.default.createElement(j,{active:!1,children:p(l),onChange:()=>{},className:oe}))},[r]),i=(0,g.useMemo)(()=>g.default.createElement(g.default.Fragment,null,g.default.createElement("div",{className:ae.secondaryContainer},s,e==="sell"?g.default.createElement($,{icon:"SwapVertical",size:20,shape:"circle",backgroundColor:"gray",color:"textSecondary"}):null),g.default.createElement("div",{className:ae.spacer}),g.default.createElement(xe,{font:"caption",width:64}),e==="sell"?g.default.createElement("div",{className:ae.filters},c):null),[c,s,e]);return g.default.createElement(Q,{perspective:e,input:o,isLoading:!0,selectorIcon:null,selectorLabel:"",onSelectorPress:()=>{},accessories:i})};var tr={container:S({display:"flex",flexDirection:"column",flex:1}),assets:S({gap:12,display:"flex",flexDirection:"column"})},nr=({onSelectAsset:e,isLoadingInitialAssets:r})=>{let{buy:o,sell:s,switchPerspective:c,setAmount:i,switchCurrencyDenomination:p,setFilter:l}=Ne(),{t:x}=h(),w=(0,F.useCallback)(v=>{q.startTrace("switchButtonClick",v),c()},[c]),A=(0,F.useCallback)(async(v,d)=>{await we.capture("swapperSwapDefaultQuoteSelected",{data:{quotePercentageValue:v}}),l(v,d)},[l]),D=(0,F.useMemo)(()=>[{perspective:"sell",asset:s},{perspective:"buy",asset:o}].map(({asset:v,perspective:d})=>{if(!v)return F.default.createElement(rr,{key:d+"select",perspective:d,onSelectorTap:()=>e(d)});if(r)return F.default.createElement(or,{key:d+"loading",perspective:d});let V=v.filters.length>0?()=>l(1,d):void 0,E=F.default.createElement(er,{key:d,asset:v,perspective:d,switchCurrencyDenomination:p,onFungibleTap:()=>e(d),onInputChange:a=>{i(d,a)},onFilterTap:a=>A(a,d),onBalanceTap:V});return d==="buy"?F.default.createElement(f,{position:"relative",key:d+"swap-button"},E,F.default.createElement("div",{className:je,style:{pointerEvents:"none"}},F.default.createElement(he,{label:x("swapperSwitchTokens"),size:Ze,shape:"circle",onClick:w,backgroundColor:{base:"accentPrimary",hover:"accentPrimaryLight"},icon:"SwapVertical"}))):E}),[s,o,r,p,A,e,i,l,w,x]);return F.default.createElement("div",{className:tr.container},F.default.createElement("div",{className:tr.assets},D))};t();n();var y=k(P());var hr=y.default.memo(({rankAlgo:e,limit:r})=>{let{t:o}=h(),s=fe(),c=G(a=>a.sortBy),i=G(a=>a.sortDirection),p=G(a=>a.timeFrame),l=G(a=>a.network),{data:x,error:w,isLoading:A,refetch:D}=be({sortBy:c,sortDirection:i,timeFrame:p,limit:r,rankAlgo:e,network:l}),{pushDetailView:v}=Ve(),d=(0,y.useCallback)(({item:a,index:O})=>{let X=ue({chainId:a.chainId,address:a.address,resourceType:"address"});s.capture("onExploreListItemClickedByUser",{data:{explore:{context:"swap",listName:"tokens",itemDetails:{position:O,title:a.name||a.symbol,id:`${a.address}-${a.chainId}`}}}}),v(y.default.createElement(_e,{caip19:X,title:a.name??void 0,entryPoint:"exploreInSwap"}))},[s,v]),V=!!w||x?.items.length===0,E=A||typeof x>"u";return y.default.createElement(f,{direction:"column",paddingTop:24,flex:1},y.default.createElement(f,{paddingX:"screen",paddingBottom:10},y.default.createElement(b,{font:"title2",color:"textPrimary"},o("exploreTokens"))),y.default.createElement(qe,{isError:V,isLoading:E,refetch:D,filters:y.default.createElement(Ge,null),listHeader:y.default.createElement(Qe,null),rows:(x?.items??[]).map((a,O)=>({...Ke({item:a,sortBy:c,image:y.default.createElement(Xe,{index:O,displayRank:!0,image:y.default.createElement(J,{image:{type:"fungible",src:a.logoUrl,fallback:a.symbol||a.name},size:48,badge:{type:"network",preset:Y.getChainID(a.chainId)}})})}),onClick:()=>d({item:a,index:O})}))}))});function Cr(){let e=Se("tokens");return e?y.default.createElement(He,{sortByOptions:e.sortBy,sortBy:e.sortByDefault,sortDirection:e.sortDirectionDefault,networkOptions:e.network,network:e.networkDefault,timeFrameOptions:e.timeFrame,timeFrame:e.timeFrameDefault},y.default.createElement(hr,{rankAlgo:e.rankAlgo,limit:10})):null}var ir=y.default.memo(Cr);t();n();var pr=k(P());t();n();var ar=k(P());var vr={autoSlippageOptIn:"autoSlippageOptIn"},sr=()=>{let{handleShowModalVisibility:e}=re();return(0,ar.useCallback)(r=>{let o=vr[r];if(!o)throw new Error(`Swap review interceptor modal not found or configured for ${r}.`);e(o)},[e])};var lr=()=>{let{goToInsufficientBalance:e,goToSwapReview:r,goToSwapTermsOfService:o,goToConfirmation:s}=$e(),c=sr(),{disabled:i,title:p,type:l,onClick:x}=Ee({goToInsufficientBalance:e,goToSwapReview:r,goToSwapTermsOfService:o,goToConfirmation:s,showOverlay:c,showFungibleDetails:()=>{},showBuyFungibleScreen:()=>{},navigateToSwapper:()=>{}});function w(A){return A==="primary"?"primary":A==="alert"?"warning":"default"}return pr.default.createElement(We,{type:"submit",theme:w(l),disabled:i,onClick:x,width:"90%"},p)};t();n();var z=k(P());t();n();var N=k(P());var kr=T.div`
  overflow-y: "scroll";
  padding-top: 16px;
`,Pr=T.fieldset.attrs({disabled:!0})`
  pointer-events: none;
  user-select: none;
`,Tr=T.div`
  position: absolute;
  z-index: 1;
  top: 0;
  height: 100vh;
  width: 100%;
  background-color: ${te("#222222",.75)};
`,cr=T.div`
  background-color: ${te("#E5A221",.7)};
  padding: 12px 15px;
  position: absolute;
  /* TODO: change 15px to 16px and create a screen padding constant like on mobile */
  top: -15px;
  left: -15px;
  right: 15px;
  width: calc(100% + 2 * 15px);
`,mr=T(ne).attrs({size:14,lineHeight:19,weight:500,color:"#fff",textAlign:"left"})``,se=({message:e,swapDisabled:r=!0,children:o})=>r?N.default.createElement(N.default.Fragment,null,N.default.createElement(Tr,{"data-testid":"disable-overlay"},N.default.createElement(cr,null,N.default.createElement(mr,null,e))),N.default.createElement(Pr,{"data-testid":"disable-wrapper"},o)):N.default.createElement(kr,null,N.default.createElement(cr,null,N.default.createElement(mr,null,e)),N.default.createElement(N.default.Fragment,null,o));var Ir=T.div`
  display: flex;
  flex: 1;
  padding-bottom: 16px;
  margin-bottom: -16px; // fix extension padding issue when scrollable or not
`,dr=z.default.memo(({children:e})=>{let r=ge(),o=r.every(l=>Y.isMainnetNetworkID(l)),c=Te().some(l=>r.includes(l)),{t:i}=h(),p=(0,z.useMemo)(()=>({availableOnlyOnMainnet:i("swapAvailableOnMainnet"),notAvailableOnSelectedNetwork:i("swapNotAvailableOnSelectedNetwork")}),[i]);return o?c?z.default.createElement(Ir,null,e):z.default.createElement(se,{message:p.notAvailableOnSelectedNetwork,swapDisabled:!0},e):z.default.createElement(se,{message:p.availableOnlyOnMainnet,swapDisabled:!0},e)});var Fr=T(R)`
  position: fixed;
  bottom: 70px;
  left: 16px;
  padding: 16px;
`,Ar=()=>{let[e]=Me(),r=e.get("sellFungible")??void 0,o=e.get("sellAmount")??void 0,s=e.get("buyFungible")??void 0,c=De(),{getSwapQuotesStrategy:i,onSwapTabExit:p}=Be();Ae({getSwapQuotesStrategy:i,skipInitialBuyFungible:!0}),Ie();let{isLoading:l}=Fe({paramsSellFungible:r,paramsSellAmount:o,paramsBuyFungible:s});return(0,m.useLayoutEffect)(()=>()=>{p(),c()},[p,c]),{isLoadingInitialAssets:l}},Nr=({isLoadingInitialAssets:e})=>{let{quoteResponse:r,hasNoRoutes:o}=Pe(),{handleShowModalVisibility:s}=re(),c=(0,m.useCallback)(x=>{s(x==="sell"?"swapSellAssetSelect":"swapBuyAssetSelect")},[s]),i=Oe({goToAssetSelect:c}),p=(0,m.useMemo)(()=>m.default.createElement(nr,{onSelectAsset:i,isLoadingInitialAssets:e}),[e,i]),l=(0,m.useMemo)(()=>!r&&!o,[r,o]);return m.default.createElement(dr,null,m.default.createElement(R,{justify:"space-between",flex:1},m.default.createElement(R,{align:"normal",padding:"16px 16px 0 16px",margin:r?"0 0 70px 0":"0"},p,r||o?m.default.createElement(Ue,null):null),l?m.default.createElement(ir,null):null,m.default.createElement(Fr,null,r?m.default.createElement(ze,{removeFooterExpansion:!1,cssOverride:Ce`
                background: #2b2b2b;
              `},m.default.createElement(lr,null)):null)))},Dr=()=>m.default.createElement(Le,null,m.default.createElement(Lr,null)),Lr=()=>{let{isLoadingInitialAssets:e}=Ar();return e?m.default.createElement(f,{gap:1},m.default.createElement(ee,{height:"120px",borderRadius:"8px 8px 0 0"}),m.default.createElement(ee,{height:"120px",borderRadius:"0 0 8px 8px"})):m.default.createElement(Nr,{isLoadingInitialAssets:e})},On=Dr;export{On as default};
//# sourceMappingURL=SwapTabPage-U2JMFDUE.js.map
