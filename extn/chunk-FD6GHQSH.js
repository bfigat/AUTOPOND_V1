import{b as ur,d as be,qa as fr,s as mr,ua as hr,va as yr}from"./chunk-R3TVD7ZG.js";import{a as ne,b as Pr,c as E,d as _,f as He,g as et,h as Ve}from"./chunk-6DCWQLZT.js";import{q as gr}from"./chunk-FTVLZLLN.js";import{S as ar,T as cr,Tb as pr,U as lr,V as B,W as q,Y as C,jb as Ae,kb as dr}from"./chunk-DC74PDKK.js";import{N as sr,p as rr,q as or,s as ir,z as nr}from"./chunk-SYKKPS5X.js";import{C as Kt,D as jt,E as pe,F as ze,I as ie,K as ue,M as Qt,N as Zt,O as Yt,Q as Jt,T as er,W as _e,Y as tr,b as k,e as S,f as de,g as Ue,i as $t,j as Ye}from"./chunk-CXKBWI2Z.js";import{Ka as Je,U as Xt}from"./chunk-4MBFYWFI.js";import{R as Wt,S as Gt}from"./chunk-C5GK3F6I.js";import{$b as xt,$c as Ft,Cc as wt,De as Bt,Hb as Et,If as Ze,Kf as Ot,P as ce,Te as V,_c as It,_e as Nt,ld as Dt,nb as X,tb as Le,ve as Lt}from"./chunk-S3GUIRR4.js";import{$ as At,T as te,W as Tt,b as u,d as vt,i as Ct,ja as Y,ka as kt,y as Pe}from"./chunk-AG2PIQR6.js";import{Bb as Ht,Ca as Be,E as St,Ea as w,F as De,Ha as J,Ia as m,Ja as I,Jb as Vt,Kb as qt,M as N,Ma as Rt,Mb as Me,R as x,Sa as Mt,Ta as Ut,Vb as Te,c as h,cc as le,eb as Ne,l as P,lb as zt,ob as _t,pb as Oe,qb as Re}from"./chunk-DAZNTGG2.js";import{f,h as o,n as i}from"./chunk-YJSZZTEX.js";o();i();o();i();var br=k(t=>{let{refetch:r}=t(Pr),{refetch:e}=t(ue),s=t(ne);return()=>{jt(),e(),s&&r()}}),no=pe(t=>{let r=t(br),e=t(Zt);e.status==="error"&&e.error.cause==="TooManyFungibleUpdates"&&r()}),so=k(t=>{t(no);let r=t(br),{isPending:e,isRefetching:s,isLoading:n}=t(ue);return{isPending:e,isLoading:n,isRefetching:s,refetch:r}}),Se=so;var z=f(h());o();i();var Sr=f(h());var ao=5e3,co=1e4,K={HiddenTitle:"hidden-title",HiddenButton:"hidden-button",Collection:"collection",Empty:"empty",CollectiblesTrimmed:"collectibles-trimmed",AddCollection:"add-collection"};function me(){let t=S(ie),r=S(_),e=t?.addresses??[],s=t?.identifier??"",{data:n=[],isLoading:c,isRefetching:l,isError:a,isRefetchError:p,refetch:g}=rr({addresses:e,queryOptions:{staleTime:ao,refetchInterval:co,enabled:r==="collectibles"}}),b=or({addresses:e}),{getIsHidden:v,getIsSpam:A,isLoading:O}=nr(t?.identifier??""),{data:R=[],isPending:oe}=ir(s),{collections:L,hiddenCollections:he,spamCollections:ye}=sr({allCollections:n,pinnedCollectionIds:R,getIsHidden:v,getIsSpam:A});return{gridItems:(0,Sr.useMemo)(()=>{let Q=L.map(T=>({type:K.Collection,data:{...T,determinedHidden:v(T),determinedSpam:A(T)}}));return b&&Q.push({type:K.CollectiblesTrimmed,data:null}),Q},[L,b,v,A]),isLoadingCollections:c,isRefetchingCollections:l,isErrorCollections:a,isRefetchErrorCollections:p,refetchCollections:g,isLoadingCollectionVisibility:O,isLoadingPinnedCollections:oe,collections:L,pinnedCollectionIds:R,hiddenCollections:he,spamCollections:ye}}o();i();o();i();o();i();o();i();o();i();o();i();var it=f(h());o();i();var Ar=f(h());o();i();var lo=new u(45e4);o();i();o();i();var Vn=new u(5);o();i();var nt=f(h());o();i();var st=f(h());o();i();var Er=f(h());o();i();var mo=f(h());o();i();o();i();var Po=f(h());o();i();o();i();function ke(t,r,e=u.ROUND_HALF_UP){return new u(t).toFixed(r,e).replace(/(\.\d*?)0+$/,"$1").replace(/\.$/,"")}o();i();o();i();o();i();function Ee(t){let r=t.abs(),e=t.isNegative()?"-":t.isZero()?"":"+";return r.isGreaterThan(0)&&r.isLessThan(.01)?`${e}<$0.01`:`${e}$${r.toFixed(2)}`}o();i();o();i();var ve=f(h());o();i();o();i();function xr(t){return`${t.address}-USD`}function at(t,r){let e=new u(t.unrealizedPnl.amount),n=e.isGreaterThan(0)?"accentSuccess":"accentAlert",c=Ee(e),l=At(Number(t.unrealizedPnl.percentage),{includePlusPrefix:!0}),a=kt(new u(t.margin));return{marketId:Le(t.market.token),position:t,image:t.market.logoUri,title:xr(t.market.token),subtitle:`${t.direction==="long"?r("perpsPositionLong"):r("perpsPositionShort")} ${t.leverage}x`,price:a,priceChange:{text:`${c} (${l})`,color:n}}}o();i();var So=P.object({accountBalance:ar,lastUpdated:P.number()}),ct=k(null),vo=k(t=>{let r=t(ct);return!r||r.type!=="accountBalance"&&r.type!=="refreshing"?{status:"pending",data:void 0}:{status:"success",data:{accountBalance:r.accountBalance,lastUpdated:Date.now()}}}),wr=ze({atomToStoreOffline:vo,offlineKey:k(t=>`${t(ie)?.identifier??""}:perps-balance`),namespaceKey:"perps",ttlMs:Pe({hours:24}),initialValue:{accountBalance:{accountValue:"0",availableBalance:"0",availableToTrade:"0"},lastUpdated:0},schema:So});o();i();var Co=P.object({positions:P.array(cr),openOrders:P.array(lr),lastUpdated:P.number()}),lt=k(null),To=k(t=>{let r=t(lt);return!r||r.type!=="positions"?{status:"pending",data:void 0}:{status:"success",data:{positions:r.positions,openOrders:r.openOrders,lastUpdated:Date.now()}}}),Ir=ze({atomToStoreOffline:To,offlineKey:k(t=>`${t(ie)?.identifier??""}:perps-positions`),namespaceKey:"perps",ttlMs:Pe({hours:24}),initialValue:{positions:[],openOrders:[],lastUpdated:0},schema:Co});var Fr=()=>{let{t}=x(),{accountBalanceState:r,positionsState:e}=Ae(),s=de(lt),n=S(Ir),c=de(ct),l=S(wr);(0,ve.useEffect)(()=>{s(e)},[e,s]),(0,ve.useEffect)(()=>{c(r)},[r,c]);let a=(0,ve.useMemo)(()=>r.type==="accountBalance"||r.type==="refreshing"?{status:r.type,symbol:"USDC",availableToTrade:new u(r.accountBalance.availableToTrade),accountValue:new u(r.accountBalance.accountValue),isCached:!1}:l.lastUpdated>0?{status:r.type==="loading"?"loading":"accountBalance",symbol:"USDC",availableToTrade:new u(l.accountBalance.availableToTrade),accountValue:new u(l.accountBalance.accountValue),isCached:!0,lastUpdated:l.lastUpdated}:{status:r.type,symbol:"USDC",availableToTrade:new u(0),accountValue:new u(0),isCached:!1},[r,l]),p=(0,ve.useMemo)(()=>e.type==="positions"||e.type==="refreshing"?{status:e.type,positions:e.positions.map(v=>at(v,t)),isCached:!1}:n.positions.length>0?{status:e.type==="loading"?"loading":"positions",positions:n.positions.map(v=>at(v,t)),isCached:!0,lastUpdated:n.lastUpdated}:{status:e.type,positions:[],isCached:!1},[e,n,t]);return{balance:a,positions:p}};var xe=()=>{let{balance:t}=Fr();return t.accountValue.toNumber()};o();i();o();i();var Eo=f(h());o();i();var xo=f(h());o();i();var ge=f(h());o();i();o();i();o();i();var mc=P.object({symbol:P.string(),timestamp:P.number(),streamDuration:P.number(),marketData:P.object({channel:P.string(),data:P.object({coin:P.string(),ctx:P.object({funding:P.string(),openInterest:P.string(),prevDayPx:P.string(),dayNtlVlm:P.string(),premium:P.string(),oraclePx:P.string(),markPx:P.string(),midPx:P.string(),impactPxs:P.array(P.string()),dayBaseVlm:P.string(),isAtOpenInterestCap:P.boolean().optional()})})})});o();i();o();i();var _c=(0,ge.createContext)(null);o();i();var Dr=f(h());o();i();var Lr=t=>({onOpenPositionStateChange:(r,e)=>{switch(r.type){case"UpdateLeverageInitiated":setTimeout(()=>{C.getState().progress({message:N.t("perpsToastOpening",{leverage:e.leverage?.toString(),symbol:e.direction,size:`${ke(e.sizeInCoin??new u(0),e.market?.szDecimals??2)} ${e.market?.name}`}),onPress:()=>{C.getState().hideToast()}})},500);break;case"PositionCreationSuccess":setTimeout(()=>{C.getState().success({message:N.t("perpsToastOpened",{leverage:e.leverage?.toString(),symbol:e.direction,size:`${ke(e.sizeInCoin??new u(0),e.market?.szDecimals??2)} ${e.market?.name}`}),onPress:()=>{C.getState().hideToast()}})},100),t&&e.market&&e.direction&&e.margin&&e.sizeInCoin&&e.leverage&&t.trackOpenPositionCompleted(e.direction,e.market.id,Y(e.margin),q(e.sizeInCoin,e.market.szDecimals),e.leverage.toString(),B(e.estimatedLiquidationPrice||new u(0),e.market.szDecimals),B(new u(e.market.currentPrice),e.market.szDecimals),e.autoClose||{tp:void 0,sl:void 0},{phantomFee:e.fee?.phantomFee?.toString()||"0",providerFee:e.fee?.providerFee?.toString()||"0"},r.payload);break;case"RegisterBuilderCodeFailure":case"RegisterReferralFailure":case"UpdateLeverageFailure":case"PositionCreationFailure":setTimeout(()=>{C.getState().failed({title:N.t("perpsToastOpeningFailed"),message:r.error.message,buttonText:N.t("commandOK"),onPress:()=>{C.getState().hideToast()}})},100),t&&e.market&&e.direction&&e.margin&&e.sizeInCoin&&e.leverage&&t.trackOpenPositionFailed(e.direction,e.market.id,Y(e.margin),q(e.sizeInCoin,e.market.szDecimals),e.leverage.toString(),B(e.estimatedLiquidationPrice||new u(0),e.market.szDecimals),B(new u(e.market.currentPrice),e.market.szDecimals),e.autoClose||{tp:void 0,sl:void 0},r.error.message,{phantomFee:e.fee?.phantomFee?.toString()||"0",providerFee:e.fee?.providerFee?.toString()||"0"});break}}}),Io=Lr();o();i();var Br=t=>({onManagePositionStateChange:(r,e)=>{if(e.type!=="indeterminate")switch(r.type){case"InitiateManagePosition":{if(e.update.type==="close"){let s=N.t("perpsToastClosing",{leverage:e.position.leverage.toString(),symbol:e.position.direction,size:`${q(e.update.size,e.market.szDecimals)} ${e.market?.name}`});setTimeout(()=>{C.getState().progress({message:s,onPress:()=>{C.getState().hideToast()}})},500)}else if(e.update.type==="removeAutoClose"){let s=N.t("perpsToastCancellingAutoClose");setTimeout(()=>{C.getState().progress({message:s,onPress:()=>{C.getState().hideToast()}})},500)}else if(e.update.type==="addAutoClose"){let s=N.t("perpsToastSettingAutoClose");setTimeout(()=>{C.getState().progress({message:s,onPress:()=>{C.getState().hideToast()}})},500)}break}case"ManagePositionSuccess":{if(e.update.type==="close"){let s=new u(e.position.unrealizedPnl.amount),n=Ee(s),c=N.t("perpsToastClosed",{symbol:e.position.direction,size:`${q(e.update.size,e.market.szDecimals)} ${e.market?.symbol||e.market?.name}`,pnl:n});setTimeout(()=>{C.getState().success({message:c,onPress:()=>{C.getState().hideToast()}})},100),t&&e.market&&e.position&&t.trackClosePositionCompleted(e.position.direction,e.market.id,Y(e.position.margin),q(new u(e.position.size),e.market.szDecimals),e.position.leverage,B(new u(e.position.liquidationPrice),e.market.szDecimals),B(new u(e.position.entryPrice),e.market.szDecimals),{percentage:e.position.unrealizedPnl.percentage,dollar:e.position.unrealizedPnl.amount},e.autoClose||{tp:void 0,sl:void 0},{phantomFee:e.fee.phantomFee.toString(),providerFee:e.fee.providerFee.toString()},r.payload)}else if(e.update.type==="removeAutoClose"){let s=N.t("perpsToastCancelledAutoClose");setTimeout(()=>{C.getState().success({message:s,onPress:()=>{C.getState().hideToast()}})},100),t&&e.market&&e.position&&e.update.type==="removeAutoClose"&&t.trackManagePositionCompleted(e.position.direction,e.market.id,Y(e.position.margin),q(new u(e.position.size),e.market.szDecimals),e.position.leverage,B(new u(e.position.liquidationPrice),e.market.szDecimals),B(new u(e.position.entryPrice),e.market.szDecimals),{percentage:e.position.unrealizedPnl.percentage,dollar:e.position.unrealizedPnl.amount},e.autoClose||{tp:void 0,sl:void 0},{phantomFee:e.fee.phantomFee.toString(),providerFee:e.fee.providerFee.toString()},r.payload)}else if(e.update.type==="addAutoClose"){let s=N.t("perpsToastAutoCloseSet");setTimeout(()=>{C.getState().success({message:s,onPress:()=>{C.getState().hideToast()}})},100),t&&e.market&&e.position&&e.update.type==="addAutoClose"&&t.trackManagePositionCompleted(e.position.direction,e.market.id,Y(e.position.margin),q(new u(e.position.size),e.market.szDecimals),e.position.leverage,B(new u(e.position.liquidationPrice),e.market.szDecimals),B(new u(e.position.entryPrice),e.market.szDecimals),{percentage:e.position.unrealizedPnl.percentage,dollar:e.position.unrealizedPnl.amount},e.autoClose||{tp:void 0,sl:void 0},{phantomFee:e.fee.phantomFee.toString(),providerFee:e.fee.providerFee.toString()},r.payload)}break}case"RegisterBuilderCodeFailure":case"RegisterReferralFailure":case"ManagePositionFailure":e.update.type==="close"?(setTimeout(()=>{C.getState().failed({title:N.t("perpsToastClosureFailed"),message:r.error.message,buttonText:N.t("commandOK"),onPress:()=>{C.getState().hideToast()}})},100),t&&e.market&&e.position&&t.trackClosePositionFailed(e.position.direction,e.market.id,Y(e.position.margin),q(new u(e.position.size),e.market.szDecimals),e.position.leverage,B(new u(e.position.liquidationPrice),e.market.szDecimals),B(new u(e.position.entryPrice),e.market.szDecimals),{percentage:e.position.unrealizedPnl.percentage,dollar:e.position.unrealizedPnl.amount},e.autoClose||{tp:void 0,sl:void 0},r.error.message,{phantomFee:e.fee.phantomFee.toString(),providerFee:e.fee.providerFee.toString()})):e.update.type==="removeAutoClose"?(setTimeout(()=>{C.getState().failed({title:N.t("perpsToastAutoCloseRemovalFailed"),message:r.error.message,buttonText:N.t("commandOK"),onPress:()=>{C.getState().hideToast()}})},100),t&&e.market&&e.position&&e.update.type==="removeAutoClose"&&t.trackManagePositionFailed(e.position.direction,e.market.id,Y(e.position.margin),q(new u(e.position.size),e.market.szDecimals),e.position.leverage,B(new u(e.position.liquidationPrice),e.market.szDecimals),B(new u(e.position.entryPrice),e.market.szDecimals),{percentage:e.position.unrealizedPnl.percentage,dollar:e.position.unrealizedPnl.amount},e.autoClose||{tp:void 0,sl:void 0},r.error.message,{phantomFee:e.fee.phantomFee.toString(),providerFee:e.fee.providerFee.toString()})):e.update.type==="addAutoClose"&&(setTimeout(()=>{C.getState().failed({title:N.t("perpsToastAutoCloseAdditionFailed"),message:r.error.message,buttonText:N.t("commandOK"),onPress:()=>{C.getState().hideToast()}})},100),t&&e.market&&e.position&&e.update.type==="addAutoClose"&&t.trackManagePositionFailed(e.position.direction,e.market.id,Y(e.position.margin),q(new u(e.position.size),e.market.szDecimals),e.position.leverage,B(new u(e.position.liquidationPrice),e.market.szDecimals),B(new u(e.position.entryPrice),e.market.szDecimals),{percentage:e.position.unrealizedPnl.percentage,dollar:e.position.unrealizedPnl.amount},e.autoClose||{tp:void 0,sl:void 0},r.error.message,{phantomFee:e.fee.phantomFee.toString(),providerFee:e.fee.providerFee.toString()}));break}}}),Fo=Br();o();i();o();i();var Lo=f(h());o();i();var Bo=f(h());o();i();var No=f(h());o();i();var Oo=f(h());o();i();var Ro=f(h());function dt(){let t=S(Qt),r=S(He),e=xe(),s=S(ne),n=Tt((r.data.currentValue||0)+e,1e3),{data:c}=Bt(t),{mutate:l}=Nt();return Ot({accountBalance:c?.value,accountId:t??"",enabled:s,value:n,setAccountBalance:l}),n}o();i();var ee=f(h());o();i();var Mo=t=>self.open(t,"_blank"),Nr=Mo;var Uo="https://help.phantom.com/hc/en-us/articles/39776532231571-Why-does-my-Phantom-wallet-show-a-malicious-account-warning";function zo(t){if(t.data.length===0)return!1;try{return!!ce.NonceAccount.fromAccountData(t.data)}catch{return!1}}function _o(){let{t}=x(),r=V(),e=S(ie),{connection:s}=Xt(),{data:n}=Ze("solana"),c=e&&e.isReadOnly,{data:l,status:a}=wt({staleTime:Pe({minutes:10}),enabled:!!n?.address,queryKey:["accountOwner",n?.address],queryFn:()=>{if(!n?.address)throw new Error("No selected solana address");return s.getAccountInfo(new ce.PublicKey(n.address))}}),p=(0,ee.useMemo)(()=>l?!c&&a==="success"&&zo(l):!1,[c,a,l]),g=(0,ee.useMemo)(()=>!c&&a==="success"&&l?.owner&&l.owner.toBase58()!==ce.SystemProgram.programId.toBase58(),[c,a,l]);return(0,ee.useEffect)(()=>{(g||p)&&r.capture("portfolioHomeMaliciousAccountWarning",{data:{reason:g?"owner":"nonceAccount",networkId:n?.networkID}})},[g,p,r,n?.networkID]),g||p?ee.default.createElement(m,{marginX:"screen",...De?{marginBottom:16}:{marginTop:16}},ee.default.createElement(Me,{level:"2-alert",actions:[{children:t("commandLearnMore2"),onPress:()=>{Nr(Uo)}}]},t("portfolioHomeAccountOwnerWarning"))):null}var pt=(0,ee.memo)(_o);o();i();var W=f(h());o();i();var M=f(h());function Ho({tabs:t}){return M.default.createElement($o,{values:t.map(r=>({key:r.key,onClick:r.onPress,node:M.default.createElement(I,{font:"title1Semibold",color:r.isActive?"textPrimary":"textSecondary",whiteSpace:"nowrap"},r.title)}))})}var Or=Ho,Vo=Be({display:"flex",flex:1,overflowX:"hidden",position:"relative",left:"-16",paddingLeft:16,marginRight:"-16"}),qo=Be({display:"flex",flexDirection:"row",gap:12,paddingRight:12}),Wo={background:`linear-gradient(to left, ${w.colors.legacy.bgWallet}, ${te(w.colors.legacy.bgWallet,.85)}, ${te(w.colors.legacy.bgWallet,0)})`};function Go(t){if(!t)return 0;let{width:r}=t.getBoundingClientRect(),e=t.scrollWidth;return r-e}function $o({values:t}){let r=(0,M.useRef)(null),[e,s]=(0,M.useState)(null),[n,c]=(0,M.useState)(0),l=Ut(0);return(0,M.useLayoutEffect)(()=>{let a=()=>{c(Go(r.current))};a();let p=new ResizeObserver(a);return r.current&&p.observe(r.current),()=>p.disconnect()},[]),M.default.createElement(M.default.Fragment,null,M.default.createElement("div",{ref:r,className:Vo},M.default.createElement(Mt.div,{className:qo,drag:"x",style:{x:l},dragConstraints:{left:n,right:0},onDragStart:()=>{s(l.get())},onDragEnd:()=>{s(null)},onWheel:a=>{if(a.deltaX===0)return;let p=l.get()-a.deltaX;return p>0?l.set(0):p<n?l.set(n):l.set(p)}},t.map(({key:a,onClick:p,node:g})=>M.default.createElement("div",{...p&&{role:"button",className:Be({cursor:"pointer"})},key:a,onClick:b=>{if(e!==null){b.stopPropagation(),b.preventDefault();return}p?.()}},g)))),M.default.createElement(m,{position:"absolute",right:24,top:0,width:24,height:"100%",style:Wo}))}var Xo=({selectedDataTab:t,onTappingManageTokens:r,onTappingManageCollections:e,onTappingSettings:s,isBalanceHidden:n,toggleBalanceVisibility:c,onRefresh:l})=>{let{t:a}=x(),p=V(),g=de(_),b=W.default.useRef(null),v=xt.isFeatureEnabled("kill-collectibles"),A=(0,W.useCallback)(()=>{p.capture("portfolioHomeContextMenuOpened"),b.current?.open()},[p]),O=(0,W.useMemo)(()=>{let L=[];return t===E.Tokens&&L.push({text:a("portfolioHomeManageTokens"),onPress:r,icon:"ToggleLeft"}),t===E.Collectibles&&L.push({text:a("portfolioHomeManageCollectibles"),onPress:e,icon:"ToggleLeft"}),L.push({text:a(n?"portfolioHomeShowBalances":"portfolioHomeHideBalances"),onPress:c,icon:n?"EyeFill":"EyeFillOff"}),L.push({text:a("portfolioHomeWalletSettings"),onPress:s,icon:"Settings"}),St&&L.push({text:a("portfolioHomeRefresh"),onPress:l,icon:"RefreshCw"}),L},[n,e,r,s,t,c,l,a]),R=(0,W.useCallback)(L=>{g(L),p.capture("portfolioHomeTabSelected",{data:{tab:L}})},[g,p]),oe=(0,W.useMemo)(()=>[{key:E.Tokens,title:a("portfolioHomeTokens"),isActive:t===E.Tokens,onPress:t!==E.Tokens?()=>R(E.Tokens):void 0},!v&&{key:E.Collectibles,title:a("portfolioHomeCollectibles"),isActive:t===E.Collectibles,onPress:t!==E.Collectibles?()=>R(E.Collectibles):void 0}].filter(Ct),[t,R,a,v]);return W.default.createElement(m,{direction:"row",justifyContent:"space-between",alignItems:"center",marginX:"screen",gap:8,position:"relative"},W.default.createElement(Or,{tabs:oe}),W.default.createElement(zt,{ref:b,items:O},W.default.createElement(_t,{color:["textSecondary","textPrimary"],icon:"MoreHorizontal",label:"More",size:24,bounded:!1,onPress:A})))},Rr=W.default.memo(Xo);o();i();var se=f(h());o();i();var U=f(h());o();i();function ut(t){return t===void 0?"-":`${t>=0?"+":"-"}${Math.abs(t).toFixed(2)}%`}o();i();var re=f(h());function mt({children:t,maxFontSize:r}){let e=(0,re.useRef)(null),[s,n]=(0,re.useState)(r);return(0,re.useEffect)(()=>{let c=e.current;if(!c)return;let l=new ResizeObserver(()=>{let a=s;c.querySelectorAll("*").forEach(g=>{for(;g.scrollWidth>c.clientWidth&&a>10;)a-=1,g.style.fontSize=`${a}px`}),n(a)});return l.observe(c),()=>{l.disconnect()}},[s]),re.default.createElement(m,{ref:e,overflow:"hidden",width:"100%",display:"flex",direction:"column",alignItems:"center"},re.default.createElement("div",{style:{fontSize:`${s}px`,whiteSpace:"nowrap"}},t))}o();i();var we=f(h()),Ko="\u2022\u2022\u2022\u2022\u2022\u2022",fe=({children:t,isBalanceHidden:r,showHiddenText:e,font:s="caption",textColor:n="textSecondary",paddingTop:c=0})=>{let{t:l}=x();return r?e?we.default.createElement(m,{gap:4,alignItems:"center",direction:"row",paddingTop:c},we.default.createElement(J.Eye,{size:16,color:"textSecondary"}),we.default.createElement(I,{font:s,color:n},l("commandShowBalance"))):we.default.createElement(I,{font:s,color:n,paddingTop:c},Ko):t};o();i();var G=f(h());o();i();o();i();o();i();o();i();function gt(t){return r=>{let e=!1,s={...r};for(let n of t.queried){let c=t.prices[n],l=c?.price;if(!c)continue;let a=r[n]?.lastUpdatedAt,p=!a||c.lastUpdatedAt&&new Date(c.lastUpdatedAt)>a;l&&r[n]?.price!==l&&p&&(e=!0,s[n]={price:l,priceChange24h:c.priceChange24h??c.usd_24h_change,lastUpdatedAt:c.lastUpdatedAt?new Date(c.lastUpdatedAt):new Date})}return e?s:r}}o();i();var jo=k(!1),Mr=jo;var Ur=$t(t=>{let r=t(Ve),e=t(Mr),s=t(ne);return{enabled:r.length>0&&!e&&s,refetchInterval:5e3,queryKey:["visible-prices",{tokens:r.map(n=>n.encodedCaip19).sort(),type:"visible-chunk",isMainnet:s}],queryFn:async()=>{let n=await er({tokens:r.map(c=>c.decodedCaip19)});return{prices:Object.fromEntries(Object.entries(n).map(([c,l])=>[c,{...l,lastUpdatedAt:l.lastUpdatedAt??new Date().toISOString()}])),queried:r.map(c=>c.encodedCaip19)}}}}),Qo=pe((t,r)=>{let{data:e}=t(Ur);e&&r(Yt,gt(e))}),Zo=k(t=>{t(Qo);let r=t(Ur);return{status:r.status,isFetching:r.isFetching}}),zr=Zo;var qe=k(0),Yo=3,Jo=5,ei=Ye(et,({priceErrorCount:t})=>t),ti=pe((t,r)=>{t(ei)>0?r(qe,s=>s+1):r(qe,0)});function ri(t,r){let e=Ye(t,({status:n,isFetching:c})=>({status:n,isFetching:c}),(n,c)=>JSON.stringify(n)===JSON.stringify(c));return pe((n,c)=>{let l=n(e);l.isFetching||(l.status==="error"&&c(r,a=>a+1),l.status==="success"&&c(r,0))})}var oi=ri(zr,qe),ii=k(t=>{t(oi),t(ti);let{balanceErrorCount:r,partialErrors:e}=t(et);return{isBalanceError:r>=Yo,isPriceError:t(qe)>=Jo,partialErrors:e||[]}}),_r=ii;var ni=k(t=>{let r=t(Jt),e=t(_),{isBalanceError:s,isPriceError:n,partialErrors:c}=t(_r),{isPerpsBalanceError:l,isPerpsPositionsError:a}=t(dr),p=t(ne),g=r.length>0,b=c&&c.length>0;return e==="fungibles"&&s&&n&&g&&p?{reason:"both"}:e==="fungibles"&&s&&g?{reason:"balances"}:e==="fungibles"&&n&&p?{reason:"prices"}:l&&a?{reason:"perpsBoth"}:l?{reason:"perpsBalance"}:a?{reason:"perpsPositions"}:e==="fungibles"&&b&&!s&&!n?{reason:"networkSpecific",partialErrors:c}:null}),Hr=ni;function si(t){let r=t.map(a=>a.details.chainId),e=t.map(a=>a.code),s=[...new Set(r)],n=[...new Set(e)],c=s.reduce((a,p)=>(a[p]=r.filter(g=>g===p).length,a),{}),l=n.reduce((a,p)=>(a[p]=e.filter(g=>g===p).length,a),{});return{uniqueChains:s,uniqueErrorCodes:n,errorsPerChain:c,errorTypeCount:l,mostAffectedChain:Object.entries(c).reduce((a,p)=>c[a[0]]>c[p[0]]?a:p)[0],mostCommonError:Object.entries(l).reduce((a,p)=>l[a[0]]>l[p[0]]?a:p)[0]}}function ai(){let t=(0,G.useRef)(void 0),r=(0,G.useRef)(!1),e=V(),{t:s}=x(),[n]=Ue(Hr);(0,G.useEffect)(()=>{if(n?.reason!==t.current){t.current=n?.reason;let l={reason:t.current??"none"};if(n?.reason==="networkSpecific"&&n.partialErrors){let a=si(n.partialErrors),p=a.uniqueChains.map(g=>X.getChainName(g));e.capture("portfolioHomeErrorBanner",{data:{...l,networkCount:a.uniqueChains.length,chainIds:a.uniqueChains,chainNames:p,errorCodes:a.uniqueErrorCodes,totalErrors:n.partialErrors.length,mostAffectedChain:a.mostAffectedChain,mostCommonError:a.mostCommonError}}),e.capture("portfolioHomeNetworkSpecificError",{data:{networkCount:a.uniqueChains.length,chainIds:a.uniqueChains,chainNames:p,errorCodes:a.uniqueErrorCodes,totalErrors:n.partialErrors.length,isSingleNetwork:a.uniqueChains.length===1,errorsPerChain:a.errorsPerChain,errorTypeCount:a.errorTypeCount,mostAffectedChain:a.mostAffectedChain,mostCommonError:a.mostCommonError}})}else e.capture("portfolioHomeErrorBanner",{data:l})}},[n?.reason,n?.partialErrors,e]);let c=(0,G.useMemo)(()=>{if(n==null)return null;if(n.reason==="balances")return s("partialErrorTokenDetail");if(n.reason==="prices")return s("partialErrorTokenPrices");if(n.reason==="perpsBalance")return s("partialErrorPerpsBalance");if(n.reason==="perpsPositions")return s("partialErrorPerpsPositions");if(n.reason==="perpsBoth")return s("partialErrorPerpsBoth");if(n.reason==="networkSpecific"&&n.partialErrors){let l=[...new Set(n.partialErrors.map(g=>g.details.chainId))];if(l.length===1){let g=X.getChainName(l[0]);return s("partialErrorBalanceChainName",{chainName:g})}let a=l.map(g=>X.getChainName(g)),p;if(a.length===2)p=`${a[0]} and ${a[1]}`;else{let g=a.pop();p=`${a.join(", ")}, and ${g}`}return s("partialErrorBalanceMultipleChains",{chainNames:p})}return s("partialErrorGeneric")},[n,s]);return(0,G.useEffect)(()=>{let l=c!==null;l&&!r.current?(r.current=!0,e.capture("portfolioHomeErrorBannerDisplayed",{data:{reason:n?.reason??"unknown",timestamp:Date.now()}})):!l&&r.current&&(r.current=!1,e.capture("portfolioHomeErrorBannerHidden",{data:{reason:t.current??"unknown",timestamp:Date.now()}}))},[c,n?.reason,e]),c?G.default.createElement(m,{padding:16,marginX:"screen",width:"100%"},G.default.createElement(Me,{level:"5-information"},c)):null}var Vr=(0,G.memo)(ai);var ci={minimumFractionDigits:2,maximumFractionDigits:2};function ft({isLoading:t,percentChangeColor:r,totalValueUsdCurrent:e,totalValueUsd24h:s,totalPercentChange24h:n,isBalanceHidden:c,toggleBalanceVisibility:l}){return U.default.createElement(m,{gap:8,alignItems:"center",justifyContent:"center",marginTop:32},U.default.createElement(Vr,null),t?U.default.createElement(m,{alignItems:"center",gap:8},U.default.createElement(Re,{width:192,font:"heading1Semibold"}),U.default.createElement(m,{direction:"row",gap:8},U.default.createElement(Re,{width:50,font:"title2Semibold"}),U.default.createElement(Re,{width:50,font:"title3Semibold"}))):U.default.createElement(m,{onPress:c?l:void 0},U.default.createElement(fe,{isBalanceHidden:c,font:"heading1Semibold",textColor:"textPrimary"},U.default.createElement(mt,{maxFontSize:38},U.default.createElement(be,{font:"heading1Semibold",value:e,intlNumberFormatOptions:ci}))),U.default.createElement(fe,{showHiddenText:!0,isBalanceHidden:c,paddingTop:c?3:0},U.default.createElement(m,{direction:"row",alignItems:"center",gap:6,justifyContent:"center"},U.default.createElement(be,{signConfig:"always",marginRight:6,font:"title1",color:"sentiment",value:s}),U.default.createElement(I,{color:r.name,borderRadius:6,paddingX:4,paddingY:2,style:{backgroundColor:te(r.token,.1)}},ut(n))))))}function li({isBalanceHidden:t,toggleBalanceVisibility:r,zeroBalanceNux:e}){let{status:s,data:n}=S(He),c=xe(),{currentValue:l,priceDifference:a,totalPercentChange24h:p}=n,g=(0,se.useMemo)(()=>(l||0)+c,[l,c]),b=(0,se.useMemo)(()=>s==="pending"&&l===void 0,[s,l]),v=(0,se.useMemo)(()=>{let O=p?p>0?"accentSuccess":"accentAlert":"textSecondary",R=p?p>0?w.colors.legacy.accentSuccess:w.colors.legacy.accentAlert:w.colors.legacy.textSecondary;return{name:O,token:R}},[p]),A=pr(g);return!b&&A?e:se.default.createElement(ft,{isLoading:b,toggleBalanceVisibility:r,isBalanceHidden:t,percentChangeColor:v,totalPercentChange24h:p,totalValueUsd24h:a,totalValueUsdCurrent:g})}var qr=(0,se.memo)(li);o();i();var y=f(h());o();i();var di={status:"idle",hasNextPage:!1,data:[]},We={status:"idle",data:[]},Wr=k(t=>{if(t(_)==="collectibles")return{fungibles:di,collectibles:We};let e=t(_e),{hasNextPage:s,status:n}=t(ue),c=t(tr);return e?{collectibles:We,fungibles:{status:"loading",hasNextPage:!1,data:[]}}:c.length===0&&n==="error"?{collectibles:We,fungibles:{status:"error",hasNextPage:!1,data:[]}}:{collectibles:We,fungibles:{status:"success",hasNextPage:s,data:c}}});o();i();var pi={type:K.Collection,data:{type:K.Empty,data:null}};function ui(t,r){return t.length===r?t:[...t,...Array(r-t.length).fill(pi)]}function mi(t,r=2){let e=[],s=t.filter(c=>c.type!==K.CollectiblesTrimmed),n=vt(s,r);for(let c of n){let l=c.map(a=>({type:K.Collection,data:a}));e.push({type:K.Collection,data:{pair:ui(l,r)}})}return s.length!==t.length&&e.push({type:K.Collection,data:{pair:[{type:K.Collection,data:{type:K.CollectiblesTrimmed,data:null}}]}}),e}var Gr=mi;o();i();var $=f(h());o();i();var j=f(h());function gi(){let{t}=x(),r=S(_),{refetch:e}=S(Se),{refetchCollections:s}=me(),n=(0,j.useCallback)(()=>{r==="fungibles"?e():r==="collectibles"&&s()},[r,e,s]);return j.default.createElement(m,{marginY:4,alignItems:"center",paddingX:"screen"},j.default.createElement(m,{width:48,height:48,alignItems:"center",justifyContent:"center",borderRadius:"full",marginBottom:16,style:{backgroundColor:te(w.colors.legacy.accentWarning,.2)}},j.default.createElement(J.AlertCircle,{size:24,color:"accentWarning"})),j.default.createElement(I,{font:"bodySemibold",marginBottom:14},t("homeErrorTitle")),j.default.createElement(I,{align:"center",marginBottom:32},t("homeErrorDescription")),j.default.createElement(Ne,{onPress:n},t("homeErrorButtonText")))}var Ge=(0,j.memo)(gi);o();i();var F=f(h());function ht(){return F.default.createElement("svg",{width:"91",height:"91",viewBox:"0 0 91 91",fill:"none",xmlns:"http://www.w3.org/2000/svg"},F.default.createElement("g",null,F.default.createElement("rect",{width:"90",height:"90",transform:"translate(0.5 0.5)",fill:w.colors.legacy.bgWallet}),F.default.createElement("rect",{x:"5.36923",y:"48.816",width:"33.707",height:"39.1595",rx:"2.86",transform:"rotate(-19.3489 5.36923 48.816)",fill:w.colors.legacy.accentPrimary}),F.default.createElement("rect",{x:"8.87532",y:"50.4995",width:"28.2068",height:"28.2096",rx:"1.5",transform:"rotate(-19.3489 8.87532 50.4995)",fill:w.colors.legacy.bgWallet}),F.default.createElement("g",null,F.default.createElement("path",{d:"M67.8312 10.2413C67.9853 10.6569 67.9487 11.1193 67.7312 11.5056L57.3701 29.9014C56.7813 30.9468 55.8012 31.7156 54.6456 32.0385C53.49 32.3614 52.2534 32.2119 51.2079 31.6231L48.58 30.143C47.5345 29.5541 46.7658 28.5741 46.4429 27.4184C46.12 26.2628 46.2694 25.0262 46.8582 23.9808C47.4471 22.9353 48.4271 22.1666 49.5827 21.8437C50.7384 21.5208 51.9749 21.6702 53.0204 22.259L56.9624 24.4793L64.2296 11.5765L49.8563 6.36576L40.1221 23.6484C39.5333 24.6939 38.5533 25.4626 37.3976 25.7855C36.242 26.1084 35.0054 25.959 33.96 25.3702L31.332 23.89C30.2865 23.3012 29.5178 22.3211 29.1949 21.1655C28.872 20.0099 29.0214 18.7733 29.6103 17.7278C30.1991 16.6824 31.1791 15.9136 32.3348 15.5907C33.4904 15.2679 34.727 15.4173 35.7724 16.0061L39.7144 18.2263L47.8552 3.77249C48.217 3.13017 48.9901 2.84354 49.6832 3.09479L66.9312 9.34773C67.3479 9.49882 67.6771 9.82562 67.8312 10.2413ZM38.2343 20.8543L34.2923 18.6341C33.9438 18.4378 33.5316 18.388 33.1464 18.4956C32.7612 18.6032 32.4345 18.8595 32.2382 19.208C32.042 19.5565 31.9921 19.9687 32.0998 20.3539C32.2074 20.7391 32.4637 21.0658 32.8121 21.262L35.4401 22.7422C35.7886 22.9385 36.2008 22.9883 36.586 22.8807C36.9712 22.773 37.2979 22.5168 37.4942 22.1683L38.2343 20.8543ZM55.4822 27.1072L51.5403 24.887C51.1918 24.6907 50.7796 24.6409 50.3944 24.7486C50.0092 24.8562 49.6825 25.1124 49.4862 25.4609C49.2899 25.8094 49.2401 26.2216 49.3478 26.6068C49.4554 26.992 49.7116 27.3187 50.0601 27.515L52.6881 28.9951C53.0366 29.1914 53.4488 29.2412 53.834 29.1336C54.2192 29.026 54.5459 28.7697 54.7422 28.4212L55.4822 27.1072Z",fill:"#FFFFC4",stroke:"#FFFFC4"})),F.default.createElement("rect",{x:"32.9779",y:"17.8943",width:"6.03228",height:"3.01614",transform:"rotate(29.3895 32.9779 17.8943)",fill:"#FFFFC4"}),F.default.createElement("rect",{x:"50.2259",y:"24.1468",width:"6.03228",height:"3.01614",transform:"rotate(29.3895 50.2259 24.1468)",fill:"#FFFFC4"}),F.default.createElement("path",{d:"M87.0587 48.1502C88.4311 48.2419 89.1322 49.8405 88.27 50.9123L74.0483 68.5907C73.2484 69.5851 71.6791 69.3765 71.1665 68.2079L62.7499 49.0157C62.2374 47.847 63.1471 46.5513 64.4204 46.6365L87.0587 48.1502Z",fill:"#FF7243"}),F.default.createElement("path",{d:"M13.4383 28.3196L15.0033 29.5762C15.821 30.233 16.9286 30.4029 17.9055 30.0214L19.7752 29.2917C20.1233 29.1543 20.4298 29.572 20.1944 29.8629L18.9379 31.4279C18.281 32.2455 18.1111 33.3531 18.4927 34.3301L19.2223 36.1998C19.3597 36.5479 18.9421 36.8544 18.6511 36.619L17.0862 35.3624C16.2685 34.7056 15.1609 34.5357 14.184 34.9172L12.3143 35.6469C11.9662 35.7843 11.6596 35.3666 11.895 35.0757L13.1516 33.5107C13.8085 32.6931 13.9784 31.5855 13.5968 30.6086L12.8671 28.7389C12.7298 28.3908 13.1474 28.0842 13.4383 28.3196Z",fill:w.colors.legacy.bgButton}),F.default.createElement("path",{d:"M60.2233 55.5181L59.226 57.1925C58.7046 58.0674 58.6906 59.1554 59.1893 60.0434L60.1431 61.743C60.3222 62.0592 59.9619 62.4104 59.6504 62.2232L57.9759 61.2259C57.1011 60.7045 56.013 60.6905 55.125 61.1892L53.4254 62.143C53.1092 62.3221 52.758 61.9618 52.9452 61.6503L53.9425 59.9758C54.4639 59.101 54.4779 58.0129 53.9792 57.1249L53.0254 55.4253C52.8464 55.1091 53.2066 54.758 53.5182 54.9451L55.1926 55.9424C56.0675 56.4638 57.1555 56.4778 58.0435 55.9792L59.7431 55.0253C60.0593 54.8463 60.4105 55.2065 60.2233 55.5181Z",fill:w.colors.legacy.bgButton}),F.default.createElement("path",{d:"M78.1739 3.16606L77.825 5.25271C77.6423 6.34306 78.0569 7.44911 78.9112 8.15079L80.5458 9.49398C80.8515 9.74327 80.6254 10.2404 80.2366 10.1739L78.15 9.82495C77.0596 9.64234 75.9536 10.0569 75.2519 10.9112L73.9087 12.5458C73.6594 12.8515 73.1623 12.6254 73.2288 12.2366L73.5777 10.1499C73.7603 9.0596 73.3457 7.95354 72.4914 7.25187L70.8569 5.90868C70.5512 5.65938 70.7773 5.16225 71.1661 5.22878L73.2527 5.5777C74.3431 5.76032 75.4491 5.34574 76.1508 4.49142L77.494 2.85689C77.7433 2.55119 78.2404 2.77725 78.1739 3.16606Z",fill:w.colors.legacy.bgButton}),F.default.createElement("circle",{cx:"51.0134",cy:"39.0883",r:"1.48466",transform:"rotate(26.2783 51.0134 39.0883)",fill:w.colors.legacy.bgButton}),F.default.createElement("path",{d:"M79.2259 31.2607C80.251 32.4976 80.0792 34.3314 78.8423 35.3565C72.3787 40.7131 64.7682 41.4047 58.5851 40.516C57.4577 40.3539 56.3327 40.1324 55.248 39.8792C53.8509 39.5529 54.2211 37.9337 55.6541 38.0001C56.0293 38.0175 56.3861 38.0285 56.7169 38.0316C59.4348 38.0573 61.9912 37.6669 62.8283 37.4807C67.254 36.4959 71.3085 34.0442 75.1301 30.8771C76.367 29.852 78.2008 30.0238 79.2259 31.2607Z",fill:w.colors.legacy.bgButton})),F.default.createElement("defs",null,F.default.createElement("clipPath",{id:"clip0_9952_91189"},F.default.createElement("rect",{width:"90",height:"90",fill:"white",transform:"translate(0.5 0.5)"})),F.default.createElement("clipPath",{id:"clip1_9952_91189"},F.default.createElement("rect",{width:"36.1936",height:"36.1936",fill:"white",transform:"translate(41.0437 -8.71805) rotate(29.3895)"}))))}var $r=le.recycle(()=>{let{t}=x();return $.default.createElement(m,{paddingY:24,alignItems:"center",justifyContent:"center"},$.default.createElement(m,{gap:8,maxWidth:240,textAlign:"center",alignItems:"center",justifyContent:"center"},$.default.createElement(ht,null),$.default.createElement(I,{color:"textPrimary",font:"bodySemibold"},t("collectiblesNoCollectiblesFound")),$.default.createElement(I,{color:"textSecondary",font:"caption",align:"center"},t("collectiblesNoCollectiblesFoundSecondary"))))}),Xr=le.recycle(()=>Array.from({length:2}).map((t,r)=>$.default.createElement(m,{key:`loading-collectible-${r}`,marginY:8,paddingX:"screen",direction:"row",gap:16},$.default.createElement(m,{flex:1,borderRadius:8,width:"100%",aspectRatio:"1/1"},$.default.createElement(Oe,{height:"100%",borderRadius:8})),$.default.createElement(m,{flex:1,borderRadius:8,width:"100%",aspectRatio:"1/1"},$.default.createElement(Oe,{height:"100%",borderRadius:8}),$.default.createElement(Oe,null))))),Kr=le.recycle(()=>$.default.createElement(Ge,null));o();i();o();i();var fi=k(t=>{let{fetchNextPage:r,hasNextPage:e,isFetching:s,refetch:n,data:c}=t(ue),l=t(_e);return async()=>{if(!s&&e&&!l){let a=c?.pages[0];a&&new Date().getTime()-a.updatedAt>Kt&&await n(),r()}}}),$e=fi;var D=f(h());o();i();var H=f(h());o();i();function Xe(t,r){return r*Number(t.totalQuantity)/10**t.decimals}o();i();var Ke=f(h());var jr=(0,Ke.memo)(({imageSrc:t,fallbackText:r,chainId:e,type:s})=>{let n=X.getChainID(e),c=yr(s,e);return Ke.default.createElement(mr,{image:{type:"fungible",src:t,fallback:r.substring(0,4)},tokenType:c,chainMeta:hr(n)})});function hi({token:t,price:r,font:e="body"}){let s=r?Xe(t,r):"-";return s==="-"?H.default.createElement(I,null,"-"):H.default.createElement(be,{value:s,font:e,minimumResolutionValue:.01,intlNumberFormatOptions:Je})}var yi=({networkID:t,walletAddress:r})=>{let e=Lt();return r?Ft.get(t).badge?.(t,e,r)??null:null};function Pi({token:t,price:r,priceChange:e,renderImageSource:s,renderImageFallbackText:n,renderImageChainId:c,renderImageType:l,isBalanceHidden:a,onPress:p,testID:g}){let{t:b}=x(),v=t.totalQuantity/10**t.decimals,A=Xe(t,r??0),O=gr(A,e??0),R=yi({networkID:t.decodedCaip19.chainId,walletAddress:t.walletAddress})||"";return H.default.createElement(m,{marginX:"screen"},H.default.createElement(Rt,{testID:g,truncate:"left",onPress:p,topLeft:{text:t.name||b("tokenRowUnknownToken"),after:H.default.createElement(ur,{spamStatus:t.spamStatus,badgeText:R})},verticalAlign:"baseline",bottomLeft:H.default.createElement(fe,{isBalanceHidden:a},`${fr(v)} ${t.symbol||"null"}`),topRight:H.default.createElement(fe,{isBalanceHidden:a,font:"body",textColor:"textPrimary"},r?H.default.createElement(hi,{token:t,price:r}):"-"),bottomRight:H.default.createElement(fe,{isBalanceHidden:a},e||r?H.default.createElement(be,{signConfig:"exceptZero",font:"caption",value:O,color:"sentiment",minimumResolutionValue:.01,intlNumberFormatOptions:Je}):"-"),start:H.default.createElement(jr,{imageSrc:s,fallbackText:n,chainId:c,type:l})}))}var Qr=(0,H.memo)(Pi);var Zr=(0,D.memo)(({onFungibleDetailNav:t,isBalanceHidden:r,...e})=>{let s=e.legacyKey,n=`${e.symbol??(s&&Dt(s))}`,c=`fungible-token-row-${X.getChainName(e.decodedCaip19.chainId).toLowerCase()}-${n}`;e.walletAddress&&It(e.decodedCaip19.chainId,e.walletAddress)&&(c+=`-${Et(e.decodedCaip19.chainId,e.walletAddress)}`);let l=e.symbol||(e.legacyKey??"").substring(0,4),a=(0,D.useCallback)(()=>{t(e)},[t,e]);return D.default.createElement(Qr,{onPress:a,isBalanceHidden:r,price:e.livePrice?.price,priceChange:e.livePrice?.priceChange24h,renderImageChainId:e.decodedCaip19.chainId,renderImageFallbackText:l,renderImageSource:e.logoUri||"",renderImageType:e.type,testID:c,token:e})});function yt(){let t=S($e);return(0,D.useEffect)(()=>{t()},[t]),D.default.createElement(m,{marginY:4,paddingX:"screen"},D.default.createElement(Te,null))}var bi=le.recycle(()=>D.default.createElement(m,{marginY:De?4:0,paddingX:"screen"},D.default.createElement(Te,null))),Yr=le.recycle(()=>Array.from({length:4}).map((t,r)=>D.default.createElement(bi,{key:`loading-fungible-${r}`}))),Si={backgroundColor:te(w.colors.legacy.accentWarning,.2)},Jr=(0,D.memo)(()=>{let{t}=x(),{refetch:r}=S(Se);return D.default.createElement(m,{marginY:4,alignItems:"center",paddingX:"screen"},D.default.createElement(m,{width:48,height:48,alignItems:"center",justifyContent:"center",borderRadius:"full",marginBottom:16,style:Si},D.default.createElement(J.AlertCircle,{size:24,color:"accentWarning"})),D.default.createElement(I,{font:"bodySemibold",marginBottom:14},t("portfolioHomeNoFungibleTokens")),D.default.createElement(I,{align:"center",marginBottom:32},t("portfolioHomeNoFungibleTokensDescription")),D.default.createElement(Ne,{onPress:r},t("homeErrorButtonText")))}),eo=()=>D.default.createElement(Ge,null);var vi={collectibles:177,fungibles:84};function Ci({data:t,status:r,collectibleRowRenderer:e}){if(!(r!=="success"||t.length===0))return{rowRenderer:e,rowCount:t.length}}function Ti({data:t,status:r,hasNextPage:e,tokenRowRenderer:s,onRowsRendered:n}){if(!(r!=="success"||t.length===0))return{onRowsRendered:n,rowRenderer:s,rowCount:e?t.length+1:t.length}}function Ai({onFungibleDetailNav:t,listHeaderChildren:r,isBalanceHidden:e,renderCollectiblesComponent:s,collectiblesPerRow:n,tabBar:c,onLayout:l}){let a=(0,y.useRef)(null),p=de(Ve),g=(0,y.useCallback)(({stopIndex:T,startIndex:Z})=>{p({start:Z,end:T})},[p]),b=S(Wr).fungibles,v=S(_),A=me(),O=(0,y.useMemo)(()=>Gr(A.gridItems,n),[A.gridItems,n]),R=(0,y.useMemo)(()=>A.isLoadingCollectionVisibility||A.isLoadingCollections?"loading":A.isErrorCollections&&O.length===0?"error":"success",[A.isLoadingCollectionVisibility,A.isLoadingCollections,A.isErrorCollections,O.length]),oe=(0,y.useMemo)(()=>({item:T})=>{if(!s)throw new Error("renderCollectiblesComponent is not defined");return s({item:T,extraData:{collections:A.collections,pinnedCollectionIds:A.pinnedCollectionIds}})},[A.collections,A.pinnedCollectionIds,s]),L=(0,y.useCallback)(T=>{if(T.index===b.data.length)return y.default.createElement(m,{style:T.style,key:"fungible-loading-row"},y.default.createElement(yt,null));let Z=b.data[T.index];return y.default.createElement(m,{style:T.style,key:T.key},y.default.createElement(Zr,{onFungibleDetailNav:t,isBalanceHidden:e,...Z}))},[b.data,e,t]),he=(0,y.useCallback)(T=>{let Z=O[T.index];return y.default.createElement(m,{style:T.style,key:T.key},y.default.createElement(oe,{item:Z}))},[O,oe]),ye=(0,y.useMemo)(()=>Ci({data:O,status:R,collectibleRowRenderer:he}),[O,R,he]),Ce=(0,y.useMemo)(()=>Ti({...b,tokenRowRenderer:L,onRowsRendered:g}),[b,L,g]),Q=(0,y.useMemo)(()=>{switch(v){case E.Tokens:return Ce;case E.Collectibles:return ye;default:throw new Error("Invalid data tab")}},[v,Ce,ye]);return y.default.createElement(m,{gap:8,paddingBottom:8,overflowY:"auto",ref:a,overflowX:"hidden"},r,c,v===E.Collectibles&&R==="loading"&&y.default.createElement(Xr,null),v===E.Collectibles&&R==="error"&&y.default.createElement(Kr,null),v===E.Collectibles&&R==="success"&&O.length===0&&y.default.createElement($r,null),v===E.Tokens&&b.status==="loading"&&y.default.createElement(Yr,null),v===E.Tokens&&b.status==="error"&&y.default.createElement(eo,null),v===E.Tokens&&b.status==="success"&&b.data.length===0&&y.default.createElement(Jr,null),Q&&y.default.createElement(qt,{scrollElement:a.current??void 0},({height:T=0,isScrolling:Z,registerChild:Ie,scrollTop:Fe})=>y.default.createElement("div",{style:{width:"100%"},ref:Ie},y.default.createElement(Ht,{disableHeight:!0},({width:ae})=>y.default.createElement(Vt,{rowHeight:vi[v],autoHeight:!0,width:ae,height:T,scrollTop:Fe,isScrolling:Z,...Q})))))}var to=(0,y.memo)(Ai);function ki(t,r,e){r({caip19:t.encodedCaip19,key:t.legacyKey??"",tokenAccount:void 0,...t.name&&{name:t.name},isSplCompressed:t.extraMetadata?.compression?.compressed??!1});let s=X.getChainName(t.decodedCaip19.chainId),n=X.getChainID(t.decodedCaip19.chainId);e.capture("assetDetailClick",{data:{address:t.decodedCaip19.resourceType==="address"?t.decodedCaip19.address:void 0,chain:s,chainId:n,isNativeOfType:n,networkId:t.decodedCaip19.chainId,type:"fungible",spamStatus:t.spamStatus,name:t.name??void 0}})}function Ei({onFungibleDetailNav:t,onTappingAccount:r,onTappingQRButton:e,onTappingSearch:s,onTappingSettings:n=()=>{},onTappingManageTokens:c=()=>{},onTappingManageCollections:l=()=>{},listFooterChildren:a,pageFooterComponent:p,listHeaderChildren:g,pageHeaderComponent:b,fixedHeaderChildren:v,zeroBalanceNux:A,renderCollectiblesComponent:O,accountAvatar:R,collectiblesPerRow:oe=2,defaultTab:L,showPerpsPage:he,showPerpsPositionDetails:ye,onLayout:Ce}){let Q=V();dt();let[T,Z]=Ue(_),{refetch:Ie}=S(Se),{refetchCollections:Fe}=me(),ae=Wt(),Pt=Gt(),bt=(0,z.useCallback)(()=>{Pt(!ae)},[ae,Pt]),ro=(0,z.useCallback)(()=>{T===E.Tokens&&Ie(),T===E.Collectibles&&Fe()},[T,Ie,Fe]),oo=(0,z.useCallback)(io=>ki(io,t,Q),[t,Q]);return(0,z.useEffect)(()=>{Q.capture("portfolioHomeViewed")},[Q]),(0,z.useEffect)(()=>{typeof L<"u"&&Z(L)},[L,Z]),z.default.createElement(z.default.Fragment,null,b,z.default.createElement(to,{isBalanceHidden:ae,collectiblesPerRow:oe,renderCollectiblesComponent:O,fixedHeaderChildren:v,listFooterChildren:a,listHeaderChildren:z.default.createElement(m,{marginBottom:4},z.default.createElement(m,{gap:24},z.default.createElement(qr,{toggleBalanceVisibility:bt,isBalanceHidden:ae,zeroBalanceNux:A}),z.default.createElement(pt,null),g)),tabBar:z.default.createElement(Rr,{isBalanceHidden:ae,toggleBalanceVisibility:bt,onRefresh:ro,selectedDataTab:T,onTappingManageTokens:c,onTappingManageCollections:l,onTappingSettings:n}),accountAvatar:R,onFungibleDetailNav:oo,onTappingAccount:r,onTappingQRButton:e,onTappingSearch:s,showPerpsPage:he,showPerpsPositionDetails:ye,onLayout:Ce}),p)}o();i();var je=f(h());function xi({marginBottom:t}){let{t:r}=x();return je.default.createElement(m,{direction:"row",gap:6,paddingY:16,paddingX:18,borderRadius:"base",justifyContent:"center",backgroundColor:"bgArea",marginBottom:t},je.default.createElement(J.Eye,{size:20,color:"textSecondary"}),je.default.createElement(I,{font:"captionSemibold",color:"textSecondary"},r("readOnlyAccountBannerWarning")))}var wi=xi;o();i();o();i();var Qe=f(h());function Ii(){let t=S($e);return(0,Qe.useEffect)(()=>{t()},[t]),Qe.default.createElement(Te,null)}var Fi=Ii;export{Ei as a,Fi as b,wi as c};
//# sourceMappingURL=chunk-FD6GHQSH.js.map
