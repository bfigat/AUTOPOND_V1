import{$ as io,S as ro,ha as no,ia as oo}from"./chunk-CXKBWI2Z.js";import{$a as At,Ca as ot,Fa as Je,H as Hn,I as Yn,La as $n,Ma as B,Na as Xn,Pa as Zn,U as Rt,Xa as eo,Za as to,ja as Jn}from"./chunk-4MBFYWFI.js";import{b as Bt}from"./chunk-IHGFL7KF.js";import{Ob as li,Sb as kt,Wa as Ar,Wb as Kn,Xb as Wn,Zb as pi,_b as Vn,ac as Pr,bc as jn,cb as br,db as hr,fb as Ct,ic as zn,lc as Gn,pc as $t,rc as Qn,x as _e,y as Ft}from"./chunk-XA7AAXB6.js";import{o as gr,pa as vr}from"./chunk-C5GK3F6I.js";import{Ab as Mn,Cc as _,Ce as Un,F as An,If as nt,L as bn,M as hn,Mf as Nn,N as Pe,Nd as Cn,O as Q,P as S,Rc as En,S as wn,T as ve,Te as it,W as rt,Wb as Ye,Xb as On,Zc as Bn,Ze as Et,_b as Dt,cc as Z,g as Ts,ka as ci,kc as Dn,la as Ce,ld as Fn,mc as H,nb as q,oc as Jt,sb as xn,tb as Ot,te as Rn,u as he,xc as ee,zc as Te}from"./chunk-S3GUIRR4.js";import{c as fr,e as ws}from"./chunk-JAJRGPOT.js";import{$ as gt,Z as Tn,aa as In,b as $,c as R,ea as _n,fa as we,ga as Ln,y as W}from"./chunk-AG2PIQR6.js";import{B as Mt,D as Sr,E as Pn,F as yr,G as vn,Ha as kr,Ia as re,Ja as K,M as v,R as X,_b as ui,c as O,g as si,h as Yt,i as tt,ib as Ie,j as gn,k as kn,l as T,q as xt,sb as qn}from"./chunk-DAZNTGG2.js";import{c as N,f as I,h as o,l as vs,m as Buffer,n as a}from"./chunk-YJSZZTEX.js";var Ta=N(Kr=>{"use strict";o();a();Object.defineProperty(Kr,"__esModule",{value:!0});Kr.deserialize=lu;Kr.serialize=pu;var wa=Wr();function lu(t,e=0){return wa.depositReceiptBeet.deserialize(t,e+8)}function pu(t){return wa.depositReceiptBeet.serialize(t)}});var Wr=N(j=>{"use strict";o();a();var du=j&&j.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r);var n=Object.getOwnPropertyDescriptor(e,r);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,i,n)}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),mu=j&&j.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),jr=j&&j.__importStar||function(){var t=function(e){return t=Object.getOwnPropertyNames||function(r){var i=[];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[i.length]=n);return i},t(e)};return function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var i=t(e),n=0;n<i.length;n++)i[n]!=="default"&&du(r,e,i[n]);return mu(r,e),r}}();Object.defineProperty(j,"__esModule",{value:!0});j.depositReceiptBeet=j.DepositReceipt=void 0;var fu=jr(he()),lt=jr(_e()),cr=jr(Ft()),Su=jr(Ta()),Vr=class t{constructor(e,r,i,n,s,c,l,u,m,f){this.base=e,this.owner=r,this.stakePool=i,this.stakePoolDepositStakeAuthority=n,this.depositTime=s,this.lstAmount=c,this.coolDownSeconds=l,this.initialFeeBps=u,this.bumpSeed=m,this.reserved=f}static fromArgs(e){return new t(e.base,e.owner,e.stakePool,e.stakePoolDepositStakeAuthority,e.depositTime,e.lstAmount,e.coolDownSeconds,e.initialFeeBps,e.bumpSeed,e.reserved)}static fromAccountInfo(e,r=0){return t.deserialize(e.data,r)}static async fromAccountAddress(e,r,i){let n=await e.getAccountInfo(r,i);if(n==null)throw new Error(`Unable to find DepositReceipt account at ${r}`);return t.fromAccountInfo(n,0)[0]}static gpaBuilder(e=new fu.PublicKey("5TAiuAh3YGDbwjEruC1ZpXTJWdNDS7Ur7VeqNNiHMmGV")){return cr.GpaBuilder.fromStruct(e,j.depositReceiptBeet)}static deserialize(e,r=0){return gu(e,r)}serialize(){return yu(this)}static get byteSize(){return j.depositReceiptBeet.byteSize}static async getMinimumBalanceForRentExemption(e,r){return e.getMinimumBalanceForRentExemption(t.byteSize,r)}static hasCorrectByteSize(e,r=0){return e.byteLength-r===t.byteSize}pretty(){return{base:this.base.toBase58(),owner:this.owner.toBase58(),stakePool:this.stakePool.toBase58(),stakePoolDepositStakeAuthority:this.stakePoolDepositStakeAuthority.toBase58(),depositTime:this.depositTime,lstAmount:this.lstAmount,coolDownSeconds:this.coolDownSeconds,initialFeeBps:this.initialFeeBps,bumpSeed:this.bumpSeed,reserved:this.reserved}}};j.DepositReceipt=Vr;j.depositReceiptBeet=new lt.BeetStruct([["base",cr.publicKey],["owner",cr.publicKey],["stakePool",cr.publicKey],["stakePoolDepositStakeAuthority",cr.publicKey],["depositTime",lt.u64],["lstAmount",lt.u64],["coolDownSeconds",lt.u64],["initialFeeBps",lt.u32],["bumpSeed",lt.u8],["reserved",lt.uniformFixedSizeArray(lt.u8,256)]],Vr.fromArgs,"DepositReceipt");var Kt=Su,yu=typeof Kt.serialize=="function"?Kt.serialize.bind(Kt):j.depositReceiptBeet.serialize.bind(j.depositReceiptBeet),gu=typeof Kt.deserialize=="function"?Kt.deserialize.bind(Kt):j.depositReceiptBeet.deserialize.bind(j.depositReceiptBeet)});var _a=N(zr=>{"use strict";o();a();Object.defineProperty(zr,"__esModule",{value:!0});zr.deserialize=ku;zr.serialize=Au;var Ia=Gr();function ku(t,e=0){return Ia.stakePoolDepositStakeAuthorityBeet.deserialize(t,e+8)}function Au(t){return Ia.stakePoolDepositStakeAuthorityBeet.serialize(t)}});var Gr=N(z=>{"use strict";o();a();var bu=z&&z.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r);var n=Object.getOwnPropertyDescriptor(e,r);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,i,n)}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),hu=z&&z.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Hr=z&&z.__importStar||function(){var t=function(e){return t=Object.getOwnPropertyNames||function(r){var i=[];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[i.length]=n);return i},t(e)};return function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var i=t(e),n=0;n<i.length;n++)i[n]!=="default"&&bu(r,e,i[n]);return hu(r,e),r}}();Object.defineProperty(z,"__esModule",{value:!0});z.stakePoolDepositStakeAuthorityBeet=z.StakePoolDepositStakeAuthority=void 0;var Pu=Hr(he()),Wt=Hr(_e()),pt=Hr(Ft()),vu=Hr(_a()),Qr=class t{constructor(e,r,i,n,s,c,l,u,m,f,d){this.base=e,this.stakePool=r,this.poolMint=i,this.authority=n,this.vault=s,this.stakePoolProgramId=c,this.coolDownSeconds=l,this.initalFeeBps=u,this.feeWallet=m,this.bumpSeed=f,this.reserved=d}static fromArgs(e){return new t(e.base,e.stakePool,e.poolMint,e.authority,e.vault,e.stakePoolProgramId,e.coolDownSeconds,e.initalFeeBps,e.feeWallet,e.bumpSeed,e.reserved)}static fromAccountInfo(e,r=0){return t.deserialize(e.data,r)}static async fromAccountAddress(e,r,i){let n=await e.getAccountInfo(r,i);if(n==null)throw new Error(`Unable to find StakePoolDepositStakeAuthority account at ${r}`);return t.fromAccountInfo(n,0)[0]}static gpaBuilder(e=new Pu.PublicKey("5TAiuAh3YGDbwjEruC1ZpXTJWdNDS7Ur7VeqNNiHMmGV")){return pt.GpaBuilder.fromStruct(e,z.stakePoolDepositStakeAuthorityBeet)}static deserialize(e,r=0){return Tu(e,r)}serialize(){return wu(this)}static get byteSize(){return z.stakePoolDepositStakeAuthorityBeet.byteSize}static async getMinimumBalanceForRentExemption(e,r){return e.getMinimumBalanceForRentExemption(t.byteSize,r)}static hasCorrectByteSize(e,r=0){return e.byteLength-r===t.byteSize}pretty(){return{base:this.base.toBase58(),stakePool:this.stakePool.toBase58(),poolMint:this.poolMint.toBase58(),authority:this.authority.toBase58(),vault:this.vault.toBase58(),stakePoolProgramId:this.stakePoolProgramId.toBase58(),coolDownSeconds:this.coolDownSeconds,initalFeeBps:this.initalFeeBps,feeWallet:this.feeWallet.toBase58(),bumpSeed:this.bumpSeed,reserved:this.reserved}}};z.StakePoolDepositStakeAuthority=Qr;z.stakePoolDepositStakeAuthorityBeet=new Wt.BeetStruct([["base",pt.publicKey],["stakePool",pt.publicKey],["poolMint",pt.publicKey],["authority",pt.publicKey],["vault",pt.publicKey],["stakePoolProgramId",pt.publicKey],["coolDownSeconds",Wt.u64],["initalFeeBps",Wt.u32],["feeWallet",pt.publicKey],["bumpSeed",Wt.u8],["reserved",Wt.uniformFixedSizeArray(Wt.u8,256)]],Qr.fromArgs,"StakePoolDepositStakeAuthority");var Vt=vu,wu=typeof Vt.serialize=="function"?Vt.serialize.bind(Vt):z.stakePoolDepositStakeAuthorityBeet.serialize.bind(z.stakePoolDepositStakeAuthorityBeet),Tu=typeof Vt.deserialize=="function"?Vt.deserialize.bind(Vt):z.stakePoolDepositStakeAuthorityBeet.deserialize.bind(z.stakePoolDepositStakeAuthorityBeet)});var xa=N(Ke=>{"use strict";o();a();var Iu=Ke&&Ke.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r);var n=Object.getOwnPropertyDescriptor(e,r);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,i,n)}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),La=Ke&&Ke.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Iu(e,t,r)};Object.defineProperty(Ke,"__esModule",{value:!0});Ke.accountProviders=void 0;La(Wr(),Ke);La(Gr(),Ke);var _u=Gr(),Lu=Wr();Ke.accountProviders={StakePoolDepositStakeAuthority:_u.StakePoolDepositStakeAuthority,DepositReceipt:Lu.DepositReceipt}});var Ea=N(ie=>{"use strict";o();a();var xu=ie&&ie.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r);var n=Object.getOwnPropertyDescriptor(e,r);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,i,n)}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),Mu=ie&&ie.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Da=ie&&ie.__importStar||function(){var t=function(e){return t=Object.getOwnPropertyNames||function(r){var i=[];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[i.length]=n);return i},t(e)};return function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var i=t(e),n=0;n<i.length;n++)i[n]!=="default"&&xu(r,e,i[n]);return Mu(r,e),r}}();Object.defineProperty(ie,"__esModule",{value:!0});ie.changeDepositReceiptOwnerInstructionDiscriminator=ie.ChangeDepositReceiptOwnerStruct=void 0;ie.createChangeDepositReceiptOwnerInstruction=Ou;var Ma=Da(_e()),Oa=Da(he());ie.ChangeDepositReceiptOwnerStruct=new Ma.BeetArgsStruct([["instructionDiscriminator",Ma.u8]],"ChangeDepositReceiptOwnerInstructionArgs");ie.changeDepositReceiptOwnerInstructionDiscriminator=4;function Ou(t,e=new Oa.PublicKey("5TAiuAh3YGDbwjEruC1ZpXTJWdNDS7Ur7VeqNNiHMmGV")){let[r]=ie.ChangeDepositReceiptOwnerStruct.serialize({instructionDiscriminator:ie.changeDepositReceiptOwnerInstructionDiscriminator}),i=[{pubkey:t.depositReceipt,isWritable:!0,isSigner:!1},{pubkey:t.currentOwner,isWritable:!1,isSigner:!0},{pubkey:t.newOwner,isWritable:!1,isSigner:!1}];return new Oa.TransactionInstruction({programId:e,keys:i,data:r})}});var Fa=N(ne=>{"use strict";o();a();var Du=ne&&ne.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r);var n=Object.getOwnPropertyDescriptor(e,r);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,i,n)}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),Eu=ne&&ne.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Wi=ne&&ne.__importStar||function(){var t=function(e){return t=Object.getOwnPropertyNames||function(r){var i=[];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[i.length]=n);return i},t(e)};return function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var i=t(e),n=0;n<i.length;n++)i[n]!=="default"&&Du(r,e,i[n]);return Eu(r,e),r}}();Object.defineProperty(ne,"__esModule",{value:!0});ne.claimPoolTokensInstructionDiscriminator=ne.ClaimPoolTokensStruct=void 0;ne.createClaimPoolTokensInstruction=Fu;var Bu=Wi($t()),Ba=Wi(_e()),Ki=Wi(he());ne.ClaimPoolTokensStruct=new Ba.BeetArgsStruct([["instructionDiscriminator",Ba.u8]],"ClaimPoolTokensInstructionArgs");ne.claimPoolTokensInstructionDiscriminator=5;function Fu(t,e=new Ki.PublicKey("5TAiuAh3YGDbwjEruC1ZpXTJWdNDS7Ur7VeqNNiHMmGV")){let[r]=ne.ClaimPoolTokensStruct.serialize({instructionDiscriminator:ne.claimPoolTokensInstructionDiscriminator}),i=[{pubkey:t.depositReceipt,isWritable:!0,isSigner:!1},{pubkey:t.owner,isWritable:!0,isSigner:!0},{pubkey:t.vault,isWritable:!0,isSigner:!1},{pubkey:t.destination,isWritable:!0,isSigner:!1},{pubkey:t.feeWallet,isWritable:!0,isSigner:!1},{pubkey:t.depositAuthority,isWritable:!1,isSigner:!1},{pubkey:t.poolMint,isWritable:!1,isSigner:!1},{pubkey:t.tokenProgram??Bu.TOKEN_PROGRAM_ID,isWritable:!1,isSigner:!1},{pubkey:t.systemProgram??Ki.SystemProgram.programId,isWritable:!1,isSigner:!1}];return new Ki.TransactionInstruction({programId:e,keys:i,data:r})}});var Vi=N(We=>{"use strict";o();a();var Cu=We&&We.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r);var n=Object.getOwnPropertyDescriptor(e,r);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,i,n)}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),Ru=We&&We.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Ca=We&&We.__importStar||function(){var t=function(e){return t=Object.getOwnPropertyNames||function(r){var i=[];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[i.length]=n);return i},t(e)};return function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var i=t(e),n=0;n<i.length;n++)i[n]!=="default"&&Cu(r,e,i[n]);return Ru(r,e),r}}();Object.defineProperty(We,"__esModule",{value:!0});We.depositStakeArgsBeet=void 0;var Uu=Ca(Ft()),Nu=Ca(_e());We.depositStakeArgsBeet=new Nu.BeetArgsStruct([["owner",Uu.publicKey]],"DepositStakeArgs")});var Ua=N(oe=>{"use strict";o();a();var qu=oe&&oe.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r);var n=Object.getOwnPropertyDescriptor(e,r);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,i,n)}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),Ku=oe&&oe.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),zi=oe&&oe.__importStar||function(){var t=function(e){return t=Object.getOwnPropertyNames||function(r){var i=[];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[i.length]=n);return i},t(e)};return function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var i=t(e),n=0;n<i.length;n++)i[n]!=="default"&&qu(r,e,i[n]);return Ku(r,e),r}}();Object.defineProperty(oe,"__esModule",{value:!0});oe.depositStakeInstructionDiscriminator=oe.DepositStakeStruct=void 0;oe.createDepositStakeInstruction=ju;var Wu=zi($t()),Ra=zi(_e()),ji=zi(he()),Vu=Vi();oe.DepositStakeStruct=new Ra.BeetArgsStruct([["instructionDiscriminator",Ra.u8],["depositStakeArgs",Vu.depositStakeArgsBeet]],"DepositStakeInstructionArgs");oe.depositStakeInstructionDiscriminator=2;function ju(t,e,r=new ji.PublicKey("5TAiuAh3YGDbwjEruC1ZpXTJWdNDS7Ur7VeqNNiHMmGV")){let[i]=oe.DepositStakeStruct.serialize({instructionDiscriminator:oe.depositStakeInstructionDiscriminator,...e}),n=[{pubkey:t.payer,isWritable:!0,isSigner:!0},{pubkey:t.stakePoolProgram,isWritable:!1,isSigner:!1},{pubkey:t.depositReceipt,isWritable:!0,isSigner:!1},{pubkey:t.stakePool,isWritable:!0,isSigner:!1},{pubkey:t.validatorStakeList,isWritable:!0,isSigner:!1},{pubkey:t.depositStakeAuthority,isWritable:!1,isSigner:!1},{pubkey:t.base,isWritable:!1,isSigner:!0},{pubkey:t.stakePoolWithdrawAuthority,isWritable:!1,isSigner:!1},{pubkey:t.stake,isWritable:!0,isSigner:!1},{pubkey:t.validatorStakeAccount,isWritable:!0,isSigner:!1},{pubkey:t.reserveStakeAccount,isWritable:!0,isSigner:!1},{pubkey:t.vault,isWritable:!0,isSigner:!1},{pubkey:t.managerFeeAccount,isWritable:!0,isSigner:!1},{pubkey:t.referrerPoolTokensAccount,isWritable:!0,isSigner:!1},{pubkey:t.poolMint,isWritable:!0,isSigner:!1},{pubkey:t.clock,isWritable:!1,isSigner:!1},{pubkey:t.stakeHistory,isWritable:!1,isSigner:!1},{pubkey:t.tokenProgram??Wu.TOKEN_PROGRAM_ID,isWritable:!1,isSigner:!1},{pubkey:t.stakeProgram,isWritable:!1,isSigner:!1},{pubkey:t.systemProgram??ji.SystemProgram.programId,isWritable:!1,isSigner:!1}];return new ji.TransactionInstruction({programId:r,keys:n,data:i})}});var Gi=N(Ve=>{"use strict";o();a();var zu=Ve&&Ve.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r);var n=Object.getOwnPropertyDescriptor(e,r);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,i,n)}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),Gu=Ve&&Ve.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),qa=Ve&&Ve.__importStar||function(){var t=function(e){return t=Object.getOwnPropertyNames||function(r){var i=[];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[i.length]=n);return i},t(e)};return function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var i=t(e),n=0;n<i.length;n++)i[n]!=="default"&&zu(r,e,i[n]);return Gu(r,e),r}}();Object.defineProperty(Ve,"__esModule",{value:!0});Ve.depositStakeWithSlippageArgsBeet=void 0;var Na=qa(_e()),Qu=qa(Ft());Ve.depositStakeWithSlippageArgsBeet=new Na.BeetArgsStruct([["owner",Qu.publicKey],["minimumPoolTokensOut",Na.u64]],"DepositStakeWithSlippageArgs")});var Wa=N(ae=>{"use strict";o();a();var Hu=ae&&ae.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r);var n=Object.getOwnPropertyDescriptor(e,r);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,i,n)}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),Yu=ae&&ae.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Hi=ae&&ae.__importStar||function(){var t=function(e){return t=Object.getOwnPropertyNames||function(r){var i=[];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[i.length]=n);return i},t(e)};return function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var i=t(e),n=0;n<i.length;n++)i[n]!=="default"&&Hu(r,e,i[n]);return Yu(r,e),r}}();Object.defineProperty(ae,"__esModule",{value:!0});ae.depositStakeWithSlippageInstructionDiscriminator=ae.DepositStakeWithSlippageStruct=void 0;ae.createDepositStakeWithSlippageInstruction=Xu;var Ju=Hi($t()),Ka=Hi(_e()),Qi=Hi(he()),$u=Gi();ae.DepositStakeWithSlippageStruct=new Ka.BeetArgsStruct([["instructionDiscriminator",Ka.u8],["depositStakeWithSlippageArgs",$u.depositStakeWithSlippageArgsBeet]],"DepositStakeWithSlippageInstructionArgs");ae.depositStakeWithSlippageInstructionDiscriminator=3;function Xu(t,e,r=new Qi.PublicKey("5TAiuAh3YGDbwjEruC1ZpXTJWdNDS7Ur7VeqNNiHMmGV")){let[i]=ae.DepositStakeWithSlippageStruct.serialize({instructionDiscriminator:ae.depositStakeWithSlippageInstructionDiscriminator,...e}),n=[{pubkey:t.payer,isWritable:!0,isSigner:!0},{pubkey:t.stakePoolProgram,isWritable:!1,isSigner:!1},{pubkey:t.depositReceipt,isWritable:!0,isSigner:!1},{pubkey:t.stakePool,isWritable:!0,isSigner:!1},{pubkey:t.validatorStakeList,isWritable:!0,isSigner:!1},{pubkey:t.depositStakeAuthority,isWritable:!1,isSigner:!1},{pubkey:t.base,isWritable:!1,isSigner:!0},{pubkey:t.stakePoolWithdrawAuthority,isWritable:!1,isSigner:!1},{pubkey:t.stake,isWritable:!0,isSigner:!1},{pubkey:t.validatorStakeAccount,isWritable:!0,isSigner:!1},{pubkey:t.reserveStakeAccount,isWritable:!0,isSigner:!1},{pubkey:t.vault,isWritable:!0,isSigner:!1},{pubkey:t.managerFeeAccount,isWritable:!0,isSigner:!1},{pubkey:t.referrerPoolTokensAccount,isWritable:!0,isSigner:!1},{pubkey:t.poolMint,isWritable:!0,isSigner:!1},{pubkey:t.clock,isWritable:!1,isSigner:!1},{pubkey:t.stakeHistory,isWritable:!1,isSigner:!1},{pubkey:t.tokenProgram??Ju.TOKEN_PROGRAM_ID,isWritable:!1,isSigner:!1},{pubkey:t.stakeProgram,isWritable:!1,isSigner:!1},{pubkey:t.systemProgram??Qi.SystemProgram.programId,isWritable:!1,isSigner:!1}];return new Qi.TransactionInstruction({programId:r,keys:n,data:i})}});var Ji=N(je=>{"use strict";o();a();var Zu=je&&je.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r);var n=Object.getOwnPropertyDescriptor(e,r);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,i,n)}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),el=je&&je.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Va=je&&je.__importStar||function(){var t=function(e){return t=Object.getOwnPropertyNames||function(r){var i=[];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[i.length]=n);return i},t(e)};return function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var i=t(e),n=0;n<i.length;n++)i[n]!=="default"&&Zu(r,e,i[n]);return el(r,e),r}}();Object.defineProperty(je,"__esModule",{value:!0});je.initStakePoolDepositStakeAuthorityArgsBeet=void 0;var Yi=Va(_e()),tl=Va(Ft());je.initStakePoolDepositStakeAuthorityArgsBeet=new Yi.BeetArgsStruct([["feeWallet",tl.publicKey],["coolDownSeconds",Yi.u64],["initialFeeBps",Yi.u32]],"InitStakePoolDepositStakeAuthorityArgs")});var za=N(se=>{"use strict";o();a();var rl=se&&se.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r);var n=Object.getOwnPropertyDescriptor(e,r);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,i,n)}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),il=se&&se.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Xi=se&&se.__importStar||function(){var t=function(e){return t=Object.getOwnPropertyNames||function(r){var i=[];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[i.length]=n);return i},t(e)};return function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var i=t(e),n=0;n<i.length;n++)i[n]!=="default"&&rl(r,e,i[n]);return il(r,e),r}}();Object.defineProperty(se,"__esModule",{value:!0});se.initStakePoolDepositStakeAuthorityInstructionDiscriminator=se.InitStakePoolDepositStakeAuthorityStruct=void 0;se.createInitStakePoolDepositStakeAuthorityInstruction=al;var nl=Xi($t()),ja=Xi(_e()),$i=Xi(he()),ol=Ji();se.InitStakePoolDepositStakeAuthorityStruct=new ja.BeetArgsStruct([["instructionDiscriminator",ja.u8],["initStakePoolDepositStakeAuthorityArgs",ol.initStakePoolDepositStakeAuthorityArgsBeet]],"InitStakePoolDepositStakeAuthorityInstructionArgs");se.initStakePoolDepositStakeAuthorityInstructionDiscriminator=0;function al(t,e,r=new $i.PublicKey("5TAiuAh3YGDbwjEruC1ZpXTJWdNDS7Ur7VeqNNiHMmGV")){let[i]=se.InitStakePoolDepositStakeAuthorityStruct.serialize({instructionDiscriminator:se.initStakePoolDepositStakeAuthorityInstructionDiscriminator,...e}),n=[{pubkey:t.payer,isWritable:!0,isSigner:!0},{pubkey:t.depositStakeAuthority,isWritable:!0,isSigner:!1},{pubkey:t.vaultAta,isWritable:!0,isSigner:!1},{pubkey:t.authority,isWritable:!1,isSigner:!1},{pubkey:t.base,isWritable:!1,isSigner:!0},{pubkey:t.stakePool,isWritable:!1,isSigner:!1},{pubkey:t.stakePoolMint,isWritable:!1,isSigner:!1},{pubkey:t.stakePoolProgram,isWritable:!1,isSigner:!1},{pubkey:t.tokenProgram??nl.TOKEN_PROGRAM_ID,isWritable:!1,isSigner:!1},{pubkey:t.associatedTokenProgram,isWritable:!1,isSigner:!1},{pubkey:t.systemProgram??$i.SystemProgram.programId,isWritable:!1,isSigner:!1}];return new $i.TransactionInstruction({programId:r,keys:n,data:i})}});var Zi=N(ze=>{"use strict";o();a();var sl=ze&&ze.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r);var n=Object.getOwnPropertyDescriptor(e,r);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,i,n)}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),cl=ze&&ze.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Ga=ze&&ze.__importStar||function(){var t=function(e){return t=Object.getOwnPropertyNames||function(r){var i=[];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[i.length]=n);return i},t(e)};return function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var i=t(e),n=0;n<i.length;n++)i[n]!=="default"&&sl(r,e,i[n]);return cl(r,e),r}}();Object.defineProperty(ze,"__esModule",{value:!0});ze.updateStakePoolDepositStakeAuthorityArgsBeet=void 0;var jt=Ga(_e()),ul=Ga(Ft());ze.updateStakePoolDepositStakeAuthorityArgsBeet=new jt.FixableBeetArgsStruct([["feeWallet",jt.coption(ul.publicKey)],["coolDownSeconds",jt.coption(jt.u64)],["initialFeeBps",jt.coption(jt.u32)]],"UpdateStakePoolDepositStakeAuthorityArgs")});var Ja=N(ce=>{"use strict";o();a();var ll=ce&&ce.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r);var n=Object.getOwnPropertyDescriptor(e,r);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,i,n)}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),pl=ce&&ce.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Ya=ce&&ce.__importStar||function(){var t=function(e){return t=Object.getOwnPropertyNames||function(r){var i=[];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[i.length]=n);return i},t(e)};return function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var i=t(e),n=0;n<i.length;n++)i[n]!=="default"&&ll(r,e,i[n]);return pl(r,e),r}}();Object.defineProperty(ce,"__esModule",{value:!0});ce.updateStakePoolDepositStakeAuthorityInstructionDiscriminator=ce.UpdateStakePoolDepositStakeAuthorityStruct=void 0;ce.createUpdateStakePoolDepositStakeAuthorityInstruction=ml;var Qa=Ya(_e()),Ha=Ya(he()),dl=Zi();ce.UpdateStakePoolDepositStakeAuthorityStruct=new Qa.FixableBeetArgsStruct([["instructionDiscriminator",Qa.u8],["updateStakePoolDepositStakeAuthorityArgs",dl.updateStakePoolDepositStakeAuthorityArgsBeet]],"UpdateStakePoolDepositStakeAuthorityInstructionArgs");ce.updateStakePoolDepositStakeAuthorityInstructionDiscriminator=1;function ml(t,e,r=new Ha.PublicKey("5TAiuAh3YGDbwjEruC1ZpXTJWdNDS7Ur7VeqNNiHMmGV")){let[i]=ce.UpdateStakePoolDepositStakeAuthorityStruct.serialize({instructionDiscriminator:ce.updateStakePoolDepositStakeAuthorityInstructionDiscriminator,...e}),n=[{pubkey:t.depositStakeAuthority,isWritable:!0,isSigner:!1},{pubkey:t.authority,isWritable:!1,isSigner:!0},{pubkey:t.newAuthority??r,isWritable:!1,isSigner:!1}];return new Ha.TransactionInstruction({programId:r,keys:n,data:i})}});var $a=N(xe=>{"use strict";o();a();var fl=xe&&xe.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r);var n=Object.getOwnPropertyDescriptor(e,r);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,i,n)}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),zt=xe&&xe.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&fl(e,t,r)};Object.defineProperty(xe,"__esModule",{value:!0});zt(Ea(),xe);zt(Fa(),xe);zt(Ua(),xe);zt(Wa(),xe);zt(za(),xe);zt(Ja(),xe)});var Xa=N(Ge=>{"use strict";o();a();var Sl=Ge&&Ge.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r);var n=Object.getOwnPropertyDescriptor(e,r);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,i,n)}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),Yr=Ge&&Ge.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Sl(e,t,r)};Object.defineProperty(Ge,"__esModule",{value:!0});Yr(Vi(),Ge);Yr(Gi(),Ge);Yr(Ji(),Ge);Yr(Zi(),Ge)});var tn=N(de=>{"use strict";o();a();var yl=de&&de.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r);var n=Object.getOwnPropertyDescriptor(e,r);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,i,n)}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),en=de&&de.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&yl(e,t,r)};Object.defineProperty(de,"__esModule",{value:!0});de.PROGRAM_ID=de.PROGRAM_ADDRESS=void 0;var gl=he();en(xa(),de);en($a(),de);en(Xa(),de);de.PROGRAM_ADDRESS="5TAiuAh3YGDbwjEruC1ZpXTJWdNDS7Ur7VeqNNiHMmGV";de.PROGRAM_ID=new gl.PublicKey(de.PROGRAM_ADDRESS)});var on=N(P=>{"use strict";o();a();var kl=P&&P.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(P,"__esModule",{value:!0});P.map=P.array=P.rustEnum=P.str=P.vecU8=P.tagged=P.vec=P.bool=P.option=P.publicKey=P.i256=P.u256=P.i128=P.u128=P.i64=P.u64=P.struct=P.f64=P.f32=P.i32=P.u32=P.i16=P.u16=P.i8=P.u8=void 0;var C=li(),Al=he(),bl=kl(fr()),Ze=li();Object.defineProperty(P,"u8",{enumerable:!0,get:function(){return Ze.u8}});Object.defineProperty(P,"i8",{enumerable:!0,get:function(){return Ze.s8}});Object.defineProperty(P,"u16",{enumerable:!0,get:function(){return Ze.u16}});Object.defineProperty(P,"i16",{enumerable:!0,get:function(){return Ze.s16}});Object.defineProperty(P,"u32",{enumerable:!0,get:function(){return Ze.u32}});Object.defineProperty(P,"i32",{enumerable:!0,get:function(){return Ze.s32}});Object.defineProperty(P,"f32",{enumerable:!0,get:function(){return Ze.f32}});Object.defineProperty(P,"f64",{enumerable:!0,get:function(){return Ze.f64}});Object.defineProperty(P,"struct",{enumerable:!0,get:function(){return Ze.struct}});var dt=class extends C.Layout{constructor(e,r,i){super(e,i),this.blob=(0,C.blob)(e),this.signed=r}decode(e,r=0){let i=new bl.default(this.blob.decode(e,r),10,"le");return this.signed?i.fromTwos(this.span*8).clone():i}encode(e,r,i=0){return this.signed&&(e=e.toTwos(this.span*8)),this.blob.encode(e.toArrayLike(Buffer,"le",this.span),r,i)}};function Za(t){return new dt(8,!1,t)}P.u64=Za;function hl(t){return new dt(8,!0,t)}P.i64=hl;function Pl(t){return new dt(16,!1,t)}P.u128=Pl;function vl(t){return new dt(16,!0,t)}P.i128=vl;function wl(t){return new dt(32,!1,t)}P.u256=wl;function Tl(t){return new dt(32,!0,t)}P.i256=Tl;var Qe=class extends C.Layout{constructor(e,r,i,n){super(e.span,n),this.layout=e,this.decoder=r,this.encoder=i}decode(e,r){return this.decoder(this.layout.decode(e,r))}encode(e,r,i){return this.layout.encode(this.encoder(e),r,i)}getSpan(e,r){return this.layout.getSpan(e,r)}};function Il(t){return new Qe((0,C.blob)(32),e=>new Al.PublicKey(e),e=>e.toBuffer(),t)}P.publicKey=Il;var rn=class extends C.Layout{constructor(e,r){super(-1,r),this.layout=e,this.discriminator=(0,C.u8)()}encode(e,r,i=0){return e==null?this.discriminator.encode(0,r,i):(this.discriminator.encode(1,r,i),this.layout.encode(e,r,i+1)+1)}decode(e,r=0){let i=this.discriminator.decode(e,r);if(i===0)return null;if(i===1)return this.layout.decode(e,r+1);throw new Error("Invalid option "+this.property)}getSpan(e,r=0){let i=this.discriminator.decode(e,r);if(i===0)return 1;if(i===1)return this.layout.getSpan(e,r+1)+1;throw new Error("Invalid option "+this.property)}};function _l(t,e){return new rn(t,e)}P.option=_l;function Ll(t){return new Qe((0,C.u8)(),xl,Ml,t)}P.bool=Ll;function xl(t){if(t===0)return!1;if(t===1)return!0;throw new Error("Invalid bool: "+t)}function Ml(t){return t?1:0}function Ol(t,e){let r=(0,C.u32)("length"),i=(0,C.struct)([r,(0,C.seq)(t,(0,C.offset)(r,-r.span),"values")]);return new Qe(i,({values:n})=>n,n=>({values:n}),e)}P.vec=Ol;function Dl(t,e,r){let i=(0,C.struct)([Za("tag"),e.replicate("data")]);function n({tag:s,data:c}){if(!s.eq(t))throw new Error("Invalid tag, expected: "+t.toString("hex")+", got: "+s.toString("hex"));return c}return new Qe(i,n,s=>({tag:t,data:s}),r)}P.tagged=Dl;function es(t){let e=(0,C.u32)("length"),r=(0,C.struct)([e,(0,C.blob)((0,C.offset)(e,-e.span),"data")]);return new Qe(r,({data:i})=>i,i=>({data:i}),t)}P.vecU8=es;function El(t){return new Qe(es(),e=>e.toString("utf-8"),e=>Buffer.from(e,"utf-8"),t)}P.str=El;function Bl(t,e,r){let i=(0,C.union)(r??(0,C.u8)(),e);return t.forEach((n,s)=>i.addVariant(s,n,n.property)),i}P.rustEnum=Bl;function Fl(t,e,r){let i=(0,C.struct)([(0,C.seq)(t,e,"values")]);return new Qe(i,({values:n})=>n,n=>({values:n}),r)}P.array=Fl;var nn=class extends C.Layout{constructor(e,r,i){super(e.span+r.span,i),this.keyLayout=e,this.valueLayout=r}decode(e,r){r=r||0;let i=this.keyLayout.decode(e,r),n=this.valueLayout.decode(e,r+this.keyLayout.getSpan(e,r));return[i,n]}encode(e,r,i){i=i||0;let n=this.keyLayout.encode(e[0],r,i),s=this.valueLayout.encode(e[1],r,i+n);return n+s}getSpan(e,r){return this.keyLayout.getSpan(e,r)+this.valueLayout.getSpan(e,r)}};function Cl(t,e,r){let i=(0,C.u32)("length"),n=(0,C.struct)([i,(0,C.seq)(new nn(t,e),(0,C.offset)(i,-i.span),"values")]);return new Qe(n,({values:s})=>new Map(s),s=>({values:Array.from(s.entries())}),r)}P.map=Cl});var ts=N(Jr=>{"use strict";o();a();Object.defineProperty(Jr,"__esModule",{value:!0});Jr.depositStake=void 0;var Ae=he(),an=tn(),sn=$t(),me=on(),cn=new Ae.PublicKey("SPoo1Ku8WFXoNDMHPsrGSTSG1Y47rzgn41SLUNakuHy"),Rl=(0,me.struct)([(0,me.u8)("accountType"),(0,me.publicKey)("manager"),(0,me.publicKey)("staker"),(0,me.publicKey)("stakeDepositAuthority"),(0,me.u8)("stakeWithdrawBumpSeed"),(0,me.publicKey)("validatorList"),(0,me.publicKey)("reserveStake"),(0,me.publicKey)("poolMint"),(0,me.publicKey)("managerFeeAccount"),(0,me.publicKey)("tokenProgramId"),(0,me.u64)("totalLamports"),(0,me.u64)("poolTokenSupply"),(0,me.u64)("lastUpdateEpoch")]),Ul=async(t,e)=>{let r=await t.getAccountInfo(e);if(!r)throw new Error("Stake pool account not found");let i=Rl.decode(r.data);return{pubkey:e,account:{data:i}}},Nl=async(t,e,r,i,n,s,c,l)=>{let u=await Ul(t,r),m=await an.StakePoolDepositStakeAuthority.fromAccountAddress(t,u.account.data.stakeDepositAuthority),f=await ql(cn,r),d=await Kl(cn,n,r),g=[],y=[],A=Ae.Keypair.generate(),h=u.account.data.poolMint;if(y.push(A),!c){let M=(0,sn.getAssociatedTokenAddressSync)(h,i);g.push((0,sn.createAssociatedTokenAccountIdempotentInstruction)(i,M,i,h)),c=M}g.push(...Ae.StakeProgram.authorize({stakePubkey:s,authorizedPubkey:i,newAuthorizedPubkey:u.account.data.stakeDepositAuthority,stakeAuthorizationType:Ae.StakeAuthorizationLayout.Staker}).instructions),g.push(...Ae.StakeProgram.authorize({stakePubkey:s,authorizedPubkey:i,newAuthorizedPubkey:u.account.data.stakeDepositAuthority,stakeAuthorizationType:Ae.StakeAuthorizationLayout.Withdrawer}).instructions);let[k]=Ae.PublicKey.findProgramAddressSync([Buffer.from("deposit_receipt"),r.toBuffer(),A.publicKey.toBuffer()],an.PROGRAM_ID),w={depositStakeArgs:{owner:i}},D={payer:e,stakePoolProgram:cn,depositReceipt:k,stakePool:r,validatorStakeList:u.account.data.validatorList,depositStakeAuthority:u.account.data.stakeDepositAuthority,base:A.publicKey,stakePoolWithdrawAuthority:f,stake:s,validatorStakeAccount:d,reserveStakeAccount:u.account.data.reserveStake,vault:m.vault,managerFeeAccount:u.account.data.managerFeeAccount,referrerPoolTokensAccount:c,poolMint:h,clock:Ae.SYSVAR_CLOCK_PUBKEY,stakeHistory:Ae.SYSVAR_STAKE_HISTORY_PUBKEY,tokenProgram:sn.TOKEN_PROGRAM_ID,stakeProgram:Ae.StakeProgram.programId,systemProgram:Ae.SystemProgram.programId},L=(0,an.createDepositStakeInstruction)(D,w);return l?.length&&L.keys.push(...l),g.push(L),{instructions:g,signers:y}};Jr.depositStake=Nl;var ql=(t,e)=>{let[r]=Ae.PublicKey.findProgramAddressSync([e.toBuffer(),Buffer.from("withdraw")],t);return r},Kl=(t,e,r)=>{let[i]=Ae.PublicKey.findProgramAddressSync([e.toBuffer(),r.toBuffer(),Buffer.alloc(0)],t);return i}});var is=N(mt=>{"use strict";o();a();var Wl=mt&&mt.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r);var n=Object.getOwnPropertyDescriptor(e,r);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,i,n)}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),rs=mt&&mt.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Wl(e,t,r)};Object.defineProperty(mt,"__esModule",{value:!0});rs(tn(),mt);rs(ts(),mt)});o();a();o();a();o();a();var $e="@phantom/interstitials",Ut=`${$e}:action-banners`,ao=`${$e}:force-upgrade`,Y={actionBanners:(t,e)=>[Ut,{accountIdentifier:t,accessToken:e}],hasSeenInterstitial:t=>[`${$e}:has-seen-interstitial`,{feature:t}],interstitialViewHistory:t=>[`${$e}:interstitial-view-history`,{feature:t}],appLaunchTimes:()=>[`${$e}:app-launch-times`],lastOnboardedAt:()=>[`${$e}:last-onboarded-at`]};o();a();o();a();var wr=(k=>(k.Buy="Buy",k.Collectibles="Collectibles",k.ConnectHardwareWallet="Connect Hardware Wallet",k.ConvertToJito="Convert to Jito",k.MintPSOL="Mint PSOL",k.Explore="Explore",k.MintCollectible="Mint Collectible",k.SocialLogin="Social Login",k.SettingsClaimUsername="Settings: Claim Username",k.SettingsCurrency="Settings: Currency",k.SettingsImportSeedPhrase="Settings: Import Seed Phrase",k.SettingsNotificationPreferences="Settings: Notification Preferences",k.SettingsSecurityAndPrivacy="Settings: Security & Privacy",k.Swapper="Swapper",k.ExternalLink="External Link",k.Token="Token",k))(wr||{}),Xt=class extends Error{message="Failed to set dismissed action banners to storage"};var Is={Multichain:2,MultichainSwapper:1,InvalidChecksum:1,SuiWelcome:1,SuiWelcomeDefaultOn:1,MonadWelcome:1,ArbitrumWelcome:1,ClaimUsernameNudge:1,QuickClaimUsername:1,SeedlessPinVerification:1,AdditionalPermissions:1,TermsOfServiceUpdate:1,StakingWelcome:1,SocialFeedNux:1,SocialFeedNuxWelcome:1},_s={Multichain:3,MultichainSwapper:1,InvalidChecksum:1,SuiWelcome:1,SuiWelcomeDefaultOn:1,MonadWelcome:1,ArbitrumWelcome:1,StakingWelcome:1,ClaimUsernameNudge:1,QuickClaimUsername:1,AdditionalPermissions:1,SeedlessPinVerification:1,TermsOfServiceUpdate:1,SocialFeedNux:1,SocialFeedNuxWelcome:1},di=t=>yr?Is[t]:Pn?_s[t]:-1;var Tr=1,Re=".phantom-labs.settings.interstitials",at=class{static async getViewHistory(e,r){let i=await r.get(Re);return i?i.interstitialsViewHistory[e]??[]:[]}static async hasSeen(e,r){let i=await r.get(Re);if(!i)return!1;let n=di(e);return(i.interstitialsSeen[e]??0)>=n}static async setHasSeen(e,r){let i=await r.get(Re),n=di(e);await r.set(Re,{version:Tr,interstitialsSeen:{...!!i&&i.interstitialsSeen,[e]:n},interstitialsViewHistory:{...!!i&&i.interstitialsViewHistory,[e]:[...i?.interstitialsViewHistory?.[e]??[],Date.now()]}})}static async resetHasSeen(e,r){let i=await r.get(Re);if(i)return r.set(Re,{version:Tr,interstitialsSeen:{...i.interstitialsSeen,[e]:void 0},interstitialsViewHistory:{...i.interstitialsViewHistory,[e]:void 0}})}static async resetAllHasSeen(e){if(await e.get(Re))return e.set(Re,{version:Tr,interstitialsSeen:{},interstitialsViewHistory:{}})}},Ls={...Dn(Re,[`${$e}:has-seen-interstitial`,`${$e}:interstitial-view-history`],(t,e)=>({version:Tr,interstitialsSeen:{...t?.interstitialsSeen,...e?.interstitialsSeen},interstitialsViewHistory:{...t?.interstitialsViewHistory,...e?.interstitialsViewHistory}}))};o();a();var mi=class{#e;constructor(e){this.#e=e}onBannerSeen=e=>{this.#e.capture("actionBannerSeenByUser",{data:{banner:e}})};onBannerClick=e=>{this.#e.capture("actionBannerClickedByUser",{data:{banner:e}})};onBannerDismiss=e=>{this.#e.capture("actionBannerDismissedByUser",{data:{banner:e}})};onInterstitialSeen=e=>{this.#e.capture("actionBannerInterstitialSeenByUser",{data:{banner:e}})};onInterstitialPrimaryClick=e=>{this.#e.capture("actionBannerInterstitialPrimaryButtonClickedByUser",{data:{banner:e}})};onInterstitialSecondaryClick=e=>{this.#e.capture("actionBannerInterstitialSecondaryButtonClickedByUser",{data:{banner:e}})};onInterstitialDismiss=e=>{this.#e.capture("actionBannerInterstitialDismissedByUser",{data:{banner:e}})}};o();a();var xs=({id:t,humanReadableId:e,description:r,bannerType:i})=>({id:t,humanReadableId:e,description:r,type:i}),Ms=({id:t,humanReadableId:e,description:r,bannerType:i,interstitial:n})=>{let{title:s,primaryButtonText:c,secondaryButtonText:l}=n,u;if(i==="Modal")for(let[m,f]of Object.values(n.lineItems).entries())u={...u??{},[`lineItem${m+1}`]:{title:f.title,description:f.description}};return{id:t,humanReadableId:e,description:r,type:i,interstitial:{title:s,body:u,primaryButtonText:c??v.t("commandContinue"),secondaryButtonText:l??v.t("commandDismiss")}}};o();a();o();a();var Ir=t=>{let e=[];for(let r in t.errors)Array.isArray(t.errors[r])&&e.push(t.errors[r].join(", "));return e.join(", ")};var co=async({locale:t})=>{let e;try{let r=JSON.stringify({platform:Sr,appVersion:Mt,locale:t}),i=await ve.api().headers({"Content-Type":"application/json"}).post(({apiEnv:s})=>`/banners/force_upgrade/${s}/v1`,r);if(i.status===400){let s=await i.data,c=Ir(s);throw new Error(c)}else if(i.status<200||i.status>299)throw new Error(`status code: ${i.status}, body: ${i.statusText}`);let n=i.data;return n?{...n}:so}catch(r){return e===400&&r instanceof Error&&Z.captureError(r,"actionBanner"),so}},so={forceUpgradeStatus:"noop"};o();a();o();a();var uo=async({locale:t})=>({...await co({locale:t})});var Os=()=>_({queryKey:[ao],queryFn:async()=>{let e=gr(v.language)??"en";return uo({locale:e})},enabled:!!Mt,staleTime:W({minutes:5})});o();a();var Si=t=>{let e=Jt(),r=Y.hasSeenInterstitial(t);return _({queryKey:r,queryFn:async()=>await at.hasSeen(t,e)})};o();a();o();a();var lo=async t=>{await t.invalidateQueries({queryKey:[Ut]})};En(lo);var po=async(t,e,r)=>{await t.setQueryData(Y.hasSeenInterstitial(e),r)};var Oe=t=>{let e=Jt(),r=ee();return Te({mutationFn:async()=>{await at.setHasSeen(t,e),await po(r,t,!0)},onSuccess:()=>r.invalidateQueries({queryKey:Y.interstitialViewHistory(t)})})};o();a();o();a();o();a();var yi=async t=>await t.get("dismissedActionBanners")??[],mo=async(t,e)=>{try{let r=await yi(t);return r.includes(e)?void 0:t.set("dismissedActionBanners",[...r,e])}catch{throw new Xt}};o();a();o();a();var So=async({accountID:t,deviceId:e,locale:r,rootId:i,selectedAccountAddresses:n,accessToken:s})=>{let c;try{let l={accountID:t,deviceId:e,locale:r,platform:Sr,rootId:i,selectedAccountAddresses:n,version:Mt},u=await ve.api().headers({"Content-Type":"application/json"}).bearer(s).post(({apiEnv:f})=>`/banners/get_banners/${f}/v2`,l);if(u.status===400){let f=await u.data,d=Ir(f);throw new Error(d)}else if(u.status<200||u.status>299)throw new Error(`status code: ${u.status}, body: ${await u.statusText}`);let m=u.data;return m?{...m,banners:m.banners??[]}:fo}catch(l){return c===400&&l instanceof Error&&Z.captureError(l,"actionBanner"),fo}},fo={id:void 0,banners:[]};o();a();o();a();var gi=t=>t?Object.values(wr).includes(t):!1;o();a();var yo=t=>{switch(t){case"Bottom Sheet":return yr;case"Modal":return!0;default:return!1}};var go=t=>{let{bannerType:e,destinationType:r}=t;switch(e){case"Deep Link":return gi(r);case"Bottom Sheet":case"Modal":return yo(e)&&gi(r);default:return!1}};var ko=async({accountID:t,deviceId:e,dismissedBanners:r,locale:i,rootId:n,selectedAccountAddresses:s,accessToken:c})=>{let l=await So({accountID:t,deviceId:e,locale:i,rootId:n,selectedAccountAddresses:s,accessToken:c});return{...l,banners:l.banners.filter(u=>go(u)&&!r.includes(u.id))}};var Es=W({minutes:1}),Bs=()=>{let t=it(),e=H(),{data:r,isLoading:i}=Cn(),{data:n}=Et(),s=async()=>{let c=n?.type!=="readOnly"?n?.addresses.map(Mn)??[]:[],l=n?.type==="seed"?n.seedIdentifier:null,u=await yi(e),m=gr(v.language)??"en",f=await t.getDeviceId();return ko({accountID:n?.identifier??"",deviceId:f,dismissedBanners:u,locale:m,rootId:l,selectedAccountAddresses:c,accessToken:r?.accessToken})};return _({queryKey:Y.actionBanners(n?.identifier,r?.accessToken),queryFn:s,enabled:!i&&!!n?.identifier,staleTime:Es})};o();a();var Ai=()=>{let t=H(),{data:e}=_({queryKey:Y.appLaunchTimes(),queryFn:async()=>await t.get("appLaunchTimes")??[]});return e??[]};o();a();var Fs=()=>{let t=H(),e=ee();return Te({mutationFn:async({actionBannerId:i})=>{mo(t,i),e.setQueriesData({queryKey:[Ut]},n=>{if(!n)return;let s=n.banners.filter(c=>c.id!==i);return{...n,banners:s}})}})};o();a();o();a();var _r=I(O());o();a();o();a();var bi=()=>{let t=H(),{data:e}=_({queryKey:Y.lastOnboardedAt(),queryFn:async()=>await t.get("lastOnboardedAt")??-1});return e};var Ao=()=>{let t=bi(),e=Ai();if(e.length<2)return!0;if(t!==void 0){let[r,i]=e;if(t<r&&t<i)return!1}return!0};function bt(t,e,r){let{data:i,isSuccess:n}=Si(t),{data:s}=Dt(e?[e]:[]),c=s?.length===1?s[0]:!0,l=Ao(),u=(0,_r.useCallback)(()=>r(),[r]);return(0,_r.useMemo)(()=>c&&n&&!i&&!l&&u(),[c,i,l,u,n])}o();a();var Cs=()=>{let t=H(),e=ee();return Te({mutationFn:async()=>{let r=Date.now(),n=[...(await t.get("appLaunchTimes")||[]).slice(-1),r];return t.set("appLaunchTimes",n)},onSuccess:()=>{e.invalidateQueries({queryKey:Y.appLaunchTimes()})}})};o();a();var Rs=()=>{let t=H(),e=ee();return Te({mutationFn:()=>{let r=Date.now();return t.set("lastOnboardedAt",r)},onSuccess:()=>{e.invalidateQueries({queryKey:Y.lastOnboardedAt()})}})};o();a();var Xe=I(O());var Us="Google Pay",Ns="Apple Pay",bo={data:{feature:"sui",variant:"default-on"}},qs=({onPrimaryAction:t,image:e,condition:r=()=>!0,platform:i="ios"})=>{let{t:n}=X(),{mutate:s}=Oe("SuiWelcomeDefaultOn"),{data:c}=Dt(["kill-sui-default-on-modal"]),l=c?.length===1?c[0]:!0,u=bt("SuiWelcomeDefaultOn",void 0,()=>r()&&!xt()&&!l),m=i==="android"?Us:Ns,f=(0,Xe.useCallback)(async()=>{t(),s()},[t,s]),d=(0,Xe.useMemo)(()=>({title:n("interstitialSuiWelcomeTitle"),items:[{key:"suiValueProp1",title:n("interstitialSuiWelcomeItemTitle_1"),icon:Xe.default.createElement(Ie,{icon:"Swap",color:"bgWallet",backgroundColor:"accentPrimary",shape:"square"}),description:n("interstitialSuiWelcomeItemDescription_1")},{key:"suiValueProp2",title:n("interstitialSuiWelcomeItemTitle_2"),icon:Xe.default.createElement(Ie,{icon:"Send",color:"bgWallet",backgroundColor:"accentPrimary",shape:"square"}),description:n("interstitialSuiWelcomeItemDescription_2",{paymentMethod:m})},{key:"suiValueProp3",title:n("interstitialSuiWelcomeItemTitle_3"),icon:Xe.default.createElement(Ie,{icon:"Compass",color:"bgWallet",backgroundColor:"accentPrimary",shape:"square"}),description:n("interstitialSuiWelcomeItemDescription_3")}],primaryButton:{children:n("interstitialSuiWelcomePrimaryButtonText"),onAction:f,analyticsEvent:{event:"welcomeInterstitialPrimaryButtonClickedByUser",payload:bo}},onDismiss:s,image:e,displayEvent:{event:"welcomeInterstitialSeen",payload:bo}}),[n,f,e,s,m]);return(0,Xe.useMemo)(()=>({interstitial:d,shouldShow:u}),[d,u])};o();a();var Ue=I(O());var hi={data:{feature:"arbitrum"}},Ks=({onPrimaryAction:t,onSecondaryAction:e,image:r,condition:i=()=>!0})=>{let{t:n}=X(),{mutateAsync:s}=Rn(),[c]=Un(["arbitrum"]),{mutate:l}=Oe("ArbitrumWelcome"),u=bt("ArbitrumWelcome","enable-arbitrum",()=>i()&&!c&&!xt()),m=(0,Ue.useCallback)(async()=>{await s({chainIDs:["arbitrum"]}),t(),l()},[s,t,l]),f=(0,Ue.useCallback)(()=>{e(),l()},[e,l]),d=(0,Ue.useMemo)(()=>({title:n("interstitialArbitrumWelcomeTitle"),items:[{key:"arbitrumValueProp1",title:n("interstitialArbitrumWelcomeItemTitle_1"),icon:Ue.default.createElement(Ie,{icon:"InfoCircle",color:"accentPrimary",backgroundColor:"brandMidnight",shape:"square"}),description:n("interstitialArbitrumWelcomeItemDescription_1")},{key:"arbitrumValueProp2",title:n("interstitialArbitrumWelcomeItemTitle_2"),icon:Ue.default.createElement(Ie,{icon:"InfoCircle",color:"accentPrimary",backgroundColor:"brandMidnight",shape:"square"}),description:n("interstitialArbitrumWelcomeItemDescription_2")},{key:"arbitrumValueProp3",title:n("interstitialArbitrumWelcomeItemTitle_3"),icon:Ue.default.createElement(Ie,{icon:"InfoCircle",color:"accentPrimary",backgroundColor:"brandMidnight",shape:"square"}),description:n("interstitialArbitrumWelcomeItemDescription_3")}],primaryButton:{children:n("interstitialArbitrumWelcomePrimaryButtonText"),onAction:m,analyticsEvent:{event:"welcomeInterstitialPrimaryButtonClickedByUser",payload:hi}},secondaryButton:{children:n("commandNotNow"),onAction:f,analyticsEvent:{event:"welcomeInterstitialSecondaryButtonClickedByUser",payload:hi}},onDismiss:l,image:r,displayEvent:{event:"welcomeInterstitialSeen",payload:hi}}),[n,m,f,r,l]);return(0,Ue.useMemo)(()=>({interstitial:d,shouldShow:u}),[d,u])};o();a();var Ne=I(O());var Pi={data:{feature:"staking"}},Ws=({onPrimaryAction:t,onSecondaryAction:e,image:r,condition:i=()=>!0})=>{let{t:n}=X(),{mutate:s}=Oe("StakingWelcome"),c=bt("StakingWelcome","enable-psol-welcome-modal",()=>i()&&!xt()),l=(0,Ne.useCallback)(()=>{t(),s()},[t,s]),u=(0,Ne.useCallback)(()=>{e(),s()},[e,s]),m=(0,Ne.useMemo)(()=>({title:void 0,mobileTitleSheetInset:vn,items:[{key:"stakingValueProp1",title:n("stakingInterstitialWelcomeItemTitle_1"),icon:Ne.default.createElement(Ie,{icon:"InfoCircle",color:"accentSuccess",backgroundColor:"bgWallet",shape:"square"}),description:n("stakingInterstitialWelcomeItemDescription_1")},{key:"stakingValueProp2",title:n("stakingInterstitialWelcomeItemTitle_2"),icon:Ne.default.createElement(Ie,{icon:"TrendingUp",color:"accentSuccess",backgroundColor:"bgWallet",shape:"square"}),description:n("stakingInterstitialWelcomeItemDescription_2")},{key:"stakingValueProp3",title:n("stakingInterstitialWelcomeItemTitle_3"),icon:Ne.default.createElement(Ie,{icon:"Shield",color:"accentSuccess",backgroundColor:"bgWallet",shape:"square"}),description:n("stakingInterstitialWelcomeItemDescription_3")}],primaryButton:{children:n("stakingInterstitialWelcomePrimaryButtonText"),onAction:l,analyticsEvent:{event:"welcomeInterstitialPrimaryButtonClickedByUser",payload:Pi},theme:"success"},secondaryButton:{children:n("commandNotNow"),onAction:u,analyticsEvent:{event:"welcomeInterstitialSecondaryButtonClickedByUser",payload:Pi}},onDismiss:s,image:r,displayEvent:{event:"welcomeInterstitialSeen",payload:Pi},disclaimers:[n("mintStakeInfoPageDisclaimer1"),n("mintStakeInfoPageDisclaimer2_US")]}),[n,l,u,r,s]);return(0,Ne.useMemo)(()=>({interstitial:m,shouldShow:c}),[m,c])};o();a();var le=I(O());var Vs="https://phantom.com/terms",js="https://phantom.com/privacy",zs="https://phantom.com/terms-and-privacy-update",Gs=({onConfirm:t,openUrl:e})=>{let{t:r}=X(),i=it(),{mutate:n}=Oe("TermsOfServiceUpdate"),s=(0,le.useCallback)(async()=>{n(),t()},[n,t]),c=(0,le.useCallback)(u=>async()=>{await i.capture("termsOfServiceUpdateClick",{data:{uiContext:"interstitial"}}),await e(u)},[i,e]),l=(0,le.useMemo)(()=>({title:r("interstitialTermsOfServiceUpdateTitle"),items:[],primaryButton:{children:r("commandContinue"),onAction:s,analyticsEvent:{event:"termsOfServiceUpdateAgreedByUser",payload:{data:{uiContext:"interstitial"}}}},image:"",displayEvent:{event:"termsOfServiceUpdateSeen",payload:{data:{uiContext:"interstitial"}}},description:le.default.createElement(Qs,{openUrl:c}),dismissGestureDisabled:!0}),[r,s,c]);return(0,le.useMemo)(()=>({interstitial:l}),[l])},Qs=({openUrl:t})=>le.default.createElement(re,{marginTop:24},le.default.createElement(K,{font:"body",align:"center"},le.default.createElement(Bt,{i18nKey:"interstitialTermsOfServiceUpdateSubtitle"},"Please review our updated",le.default.createElement(K,{onPress:t(Vs),color:"accentPrimary"},"Terms of Service"),"and",le.default.createElement(K,{onPress:t(js),color:"accentPrimary"},"Privacy Policy"),". By continuing, you agree to the updated terms and policies.",le.default.createElement(K,{onPress:t(zs),color:"accentPrimary"},"Learn More"),".")));o();a();o();a();o();a();var Lr=I(Ts(),1);var vo=I(he(),1);var Po=(0,Lr.struct)([(0,Lr.u8)("instruction"),Kn("amount")]);function vi(t,e,r,i,n=[],s=kt){let c=Vn([{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:e,isSigner:!1,isWritable:!1}],r,n),l=Buffer.alloc(Po.span);return Po.encode({instruction:Wn.Approve,amount:BigInt(i)},l),new vo.TransactionInstruction({keys:c,programId:s,data:l})}var wo=new S.PublicKey("Config1111111111111111111111111111111111111"),Ys="https://docs.solana.com/staking",Js="https://help.phantom.com/hc/en-us/articles/4406379756307-Why-is-my-stake-still-activating-or-deactivating",qe={type:"SolanaNative",data:{amount:"0",balance:new $(0),chain:{id:q.solana.mainnetID,imageUrl:q.solana.iconUrl,name:q.solana.name,symbol:q.solana.tokenSymbol},decimals:9,key:"SolanaNative",logoUri:"https://cdn.jsdelivr.net/gh/solana-labs/token-list@main/assets/mainnet/So11111111111111111111111111111111111111112/logo.png",name:"Solana",symbol:"SOL",tokenAddress:void 0,walletAddress:"",spamStatus:"NOT_VERIFIED"}},To=new Map([[Ce.Solana.Mainnet,qe]]),$s="https://www.jito.network/blog/lsts-vs-native-assets/",wi="https://www.jito.network/staking/?mode=unstake",Ti="https://help.phantom.com/hc/en-us/articles/29846774040467",Xs="https://www.jito.network/blog/reward-bearing-vs-rebasing-solana-liquid-staking-tokens/",Zs="https://www.jito.network/interceptor";var Ii="https://app.kamino.finance/lending/reserve/7u3HeHxYDLhnCoErrtycNokbQYbWGzLs6JSDqGAv5PfF/HV9KsS5mB4b9CFhDJVKdfxWBAomYfUk5PeUsdgMQsUrB",st="solana:101/address:J1toso1uCk3RLmjorhTtrVwY9HJ7X8V9yYac6Y7kGCPn",xr=4e6,er=2282880;o();a();function Io(t,e){let r=new R(t/100),i=new R(e/100);return r.minus(r.times(i)).times(100).decimalPlaces(2).toNumber()}o();a();o();a();o();a();var J="staking";var _i=[J,"stakeAccounts"],Li=[J,"stakeActivationData"],xi=[J,"convertStakeAccountList"],Mi=[J,"convertStakeTransaction"],Oi=[J,"mintTokenTransaction"],ec=[J,"withdrawLiquidStakeTransaction"],Di="averageValidatorApy",tc="recommendedValidators",rc="signatureStatus",ic="stakeAccountMinBalance",nc="stakeRewardsHistory",oc="stakeApy",ac="validatorInfo",sc="voteAccounts",cc="keybaseUserAvatar",E={keybaseUserAvatar(t){return[J,cc,t]},signatureStatus(t){return[J,rc,t]},stakeAccounts(t,e){return[..._i,t,e]},stakeAccountMinBalance(){return[J,ic]},stakeActivationData(t){return[...Li,t]},stakeRewardsHistory(t){return[J,nc,t]},stakeApy(){return[J,oc]},averageValidatorApy(){return[J,Di]},recommendedValidators(){return[J,tc]},validatorInfo(){return[J,ac]},voteAccounts(t){return[J,sc,t]},convertStakeAccountList(t,e){return[...xi,t,e]},liquidStakingSupportedTokens(){return[J,"liquidStakingSupportedTokens"]},getConvertStakeTransaction(t){return[...Mi,t]},getMintTokenTransaction(t){return[...Oi,t]},getWithdrawLiquidStakeTransaction(t){return[...ec,t]},featureUsed(){return[J,"featureUsed"]}};var tr=t=>()=>{t.invalidateQueries({predicate:e=>{let r=i=>i.every((n,s)=>e.queryKey[s]===n);return r(_i)||r(Li)||r(xi)||r(Mi)||r(Oi)}})};o();a();function Mr(t,e=9){return t.match(new RegExp(`^\\d*(\\.\\d{0,${e}})?$`))}o();a();var _o={type:"fungible",isNativeOfType:"sol",chain:"solana",name:"Solana",symbol:"SOL",iconUrl:"https://cdn.jsdelivr.net/gh/solana-labs/token-list@main/assets/mainnet/So11111111111111111111111111111111111111112/logo.png",decimals:9},uc="stake",Lo=t=>new Ei(t,uc),Ei=class extends vr{createStakeAccountAndDelegateStake=e=>{this.analytics.capture("createStakeAccountAndDelegateStake",{data:{...e,..._o}})};deactivateStake=()=>{this.analytics.capture("deactivateStake",{data:{..._o}})}};var lc=Tn(it,t=>Lo(t));o();a();var Or=I(O());o();a();var Mo=(t,e)=>t+e[1];function Oo(t){let e=pc(t),r={commissionWeight:.6,epochCreditsWeight:.1,activatedStakeWeight:.3},i=mc(e.maxEpochCredits,e.maxActivatedStake,r);return t.sort(i)}function pc(t){let e={maxEpochCredits:0,maxActivatedStake:0};for(let r of t){let i=r.epochCredits.reduce(Mo,0);e.maxEpochCredits<i&&(e.maxEpochCredits=i),e.maxActivatedStake<r.activatedStake&&(e.maxActivatedStake=r.activatedStake)}return e}function dc(t,e,r,i,n){let s=(100-t)/100,c=e/r,l=Math.log10(i+1)/Math.log10(n+1);return{normalizedCommission:s,normalizedEpochCredits:c,normalizedActivatedStake:l}}function xo(t,e,r,i){let{commission:n,epochCredits:s,activatedStake:c}=t,{commissionWeight:l,epochCreditsWeight:u,activatedStakeWeight:m}=i,{normalizedCommission:f,normalizedEpochCredits:d,normalizedActivatedStake:g}=dc(n,s.reduce(Mo,0),e,c,r);return(n>10?.5:1)*(l*f+u*d+m*g)}function mc(t,e,r){return(i,n)=>{let s=xo(i,t,e,r);return xo(n,t,e,r)-s}}o();a();o();a();var rr=(n=>(n[n.Always=1/0]="Always",n[n.Short=W({days:1})]="Short",n[n.Medium=W({days:3})]="Medium",n[n.Long=W({days:7})]="Long",n))(rr||{}),De=(s=>(s[s.Immediate=0]="Immediate",s[s.Short=W({minutes:1})]="Short",s[s.Medium=W({minutes:2.5})]="Medium",s[s.Long=W({minutes:5})]="Long",s[s.Never=1/0]="Never",s))(De||{});var fc=t=>async()=>(await t.getParsedProgramAccounts(wo)).reduce((r,i)=>{if(i.account.data.parsed?.type!=="validatorInfo")return r;let n=i.pubkey.toString(),s=i.account.data.parsed.info.keys,[,c]=s;if(!c.signer)return r;let l=c.pubkey,u=i.account.data.parsed.info.configData;return r.push({identityPubkey:l,infoPubkey:n,info:u}),r},[]);function Bi(t){let e=E.validatorInfo(),r=fc(t);return _({queryKey:e,queryFn:r,placeholderData:[],staleTime:1/0})}o();a();var Sc=async t=>{let e=await t.getVoteAccounts();return[...e.current,...e.delinquent].map(r=>({identityPubkey:r.nodePubkey,voteAccountPubkey:r.votePubkey,commission:r.commission,lastVote:r.lastVote,epochCredits:r.epochCredits,activatedStake:r.activatedStake})).filter(r=>r.commission<99)};function Fi(t){let e=E.voteAccounts(t.rpcEndpoint);return _({queryKey:e,queryFn:async()=>Sc(t),placeholderData:[],staleTime:1/0})}function Dr(t){let{isFetched:e,isFetching:r,isPending:i,isSuccess:n,isError:s,dataUpdatedAt:c,errorUpdatedAt:l,error:u,refetch:m,data:f}=Fi(t),d=Math.max(c,l),{isFetched:g,isFetching:y,isPending:A,isSuccess:h,isError:k,dataUpdatedAt:w,errorUpdatedAt:D,error:L,refetch:M,data:G}=Bi(t),ge=Math.max(w,D),Me=Math.max(d,ge),x=e&&g,be=r||y,ke=n||h,te=s||k,ue=u||L,He=i||A,et=(0,Or.useCallback)(async()=>{Promise.all([m(),M()])},[M,m]);return{results:(0,Or.useMemo)(()=>{if(!f)return[];if(!G)return[];let _t=Oo(f),St=new Map(_t.map(U=>[U.identityPubkey,U])),Lt=new Map(G.map(U=>[U.identityPubkey,U])),yt=[];for(let[U,Fe]of St){let V=Lt.get(U);yt.push({...Fe,...V})}return yt},[G,f]),dataUpdatedAt:Me,error:ue,isSuccess:ke,isError:te,isFetched:x,isFetching:be,isPending:He,refetch:et}}o();a();function Ci(t){let e=!!t?.info.meta.lockup,r=new Date((t?.info.meta.lockup?.unixTimestamp??0)*1e3);return e&&r.getTime()>Date.now()}o();a();o();a();var Do=({numSignatures:t,lamportsPerSignature:e,lamportBalance:r,rentExemptionMinimum:i})=>{let n=$(e).multipliedBy(t),s=r.minus(n);return $.max(s.minus(i),0)};var yc=({balance:t,rentExemptionMinimum:e})=>{let r=Do({numSignatures:11,lamportsPerSignature:Qn,lamportBalance:$(t),rentExemptionMinimum:hn(e)});return parseFloat(bn(r).toFixed(9))};o();a();o();a();var gc="https://keybase.io/_/api/1.0/user/pic_url.json",Er=async t=>{let e=await ve.get(`${gc}?username=${encodeURIComponent(t)}`);if(!rt(e)||e.data.status?.code!==0)throw new Error("Couldn't fetch keybase user avatar");return e.data.pic_url};var kc=t=>{let e=E.keybaseUserAvatar(t);return _({enabled:!!t,queryKey:e,async queryFn(){if(!t)throw new Error("Keybase username is required");return Er(t)},placeholderData:"",staleTime:1/0})};o();a();o();a();var Pg=new Error("Missing sender address for staking fungibles."),Eo=new Error("Missing signature from waiting for staking transaction confirmation."),Bo=new Error("PublicKey is required");var ht=class extends Error{constructor(e){super(e)}};var Ac=async(t,e)=>await t.getSignatureStatuses([e],{searchTransactionHistory:!0});function bc(t,e,r){let i=ee(),n=E.signatureStatus(r),s=async()=>{if(!r)throw Eo;let m=await Ac(t,r);return{...m,value:m.value[0]}},l=i.getQueryData(n)?.value?.confirmationStatus;return _({queryKey:n,queryFn:s,enabled:!!r&&l!=="finalized",refetchInterval:e,staleTime:1/0})}o();a();var hc=t=>async()=>await t.getMinimumBalanceForRentExemption(S.StakeProgram.space);function Pc(t){let e=E.stakeAccountMinBalance(),r=hc(t);return _({queryKey:e,queryFn:r,placeholderData:0,staleTime:1/0})}o();a();var vc=async(t,e,r,i="confirmed")=>await t.getInflationReward(e,r,i),wc=async(t,e)=>{let r=[];e.ownerPublicKey&&r.push({memcmp:{offset:44,bytes:e.ownerPublicKey}}),e.voteAccountPublicKey&&r.push({dataSize:200},{memcmp:{offset:124,bytes:e.voteAccountPublicKey}});let i=await t.getParsedProgramAccounts(S.StakeProgram.programId,{filters:r}),n=[];if(e.fetchInflationRewards)try{n=await vc(t,i.map(({pubkey:s})=>s))}catch(s){let c=s;!c.message.includes("RPC request timed out")&&Z.captureError(c,"staking")}return i.map((s,c)=>({pubkey:s.pubkey.toString(),lamports:s.account.lamports,inflationReward:n[c]?.amount,...s.account.data.parsed}))},Tc=(t,e)=>E.stakeAccounts(t,e),Ic=(t,e)=>()=>wc(t,{ownerPublicKey:e,fetchInflationRewards:!0});function _c(t,e){let r=Tc(e,t.rpcEndpoint),i=Ic(t,e);return _({queryKey:r,queryFn:i,placeholderData:[],staleTime:W({minutes:5})})}o();a();o();a();o();a();o();a();function Br(t,e){for(let r of e)if(r.epoch===t)return r;return null}var Fo=.09;function Lc(t,e,r){if(t.activationEpoch===t.deactivationEpoch)return{effective:BigInt(0),activating:BigInt(0)};if(e===t.activationEpoch)return{effective:BigInt(0),activating:t.stake};if(e<t.activationEpoch)return{effective:BigInt(0),activating:BigInt(0)};let i=t.activationEpoch,n=Br(i,r);if(n!==null){let s=BigInt(0);for(;n!==null;){i++;let c=t.stake-s,l=Number(c)/Number(n.activating),u=Number(n.effective)*Fo,m=BigInt(Math.max(1,Math.round(l*u)));if(s+=m,s>=t.stake){s=t.stake;break}if(i>=e||i>=t.deactivationEpoch)break;n=Br(i,r)}return{effective:s,activating:t.stake-s}}else return{effective:t.stake,activating:BigInt(0)}}function Co(t,e,r){let{effective:i,activating:n}=Lc(t,e,r);if(e<t.deactivationEpoch)return{effective:i,activating:n,deactivating:BigInt(0)};if(e==t.deactivationEpoch)return{effective:i,activating:BigInt(0),deactivating:i};let s=t.deactivationEpoch,c=Br(s,r);if(c!==null){let l=i;for(;c!==null&&(s++,c.deactivating!==BigInt(0));){let u=Number(l)/Number(c.deactivating),m=Number(c.effective)*Fo,f=BigInt(Math.max(1,Math.round(u*m)));if(l-=f,l<=0){l=BigInt(0);break}if(s>=e)break;c=Br(s,r)}return{effective:l,deactivating:l,activating:BigInt(0)}}else return{effective:BigInt(0),activating:BigInt(0),deactivating:BigInt(0)}}o();a();var Ro=function(t){if(t.value===null||t.value.data instanceof Buffer)throw new Error("Account not found");let e=[];return t.value.data.parsed.info.forEach(r=>{e.push({epoch:BigInt(r.epoch),effective:BigInt(r.stakeHistory.effective),activating:BigInt(r.stakeHistory.activating),deactivating:BigInt(r.stakeHistory.deactivating)})}),e},Uo=function(t){let e=BigInt(0);if(t.value===null||t.value.data instanceof Buffer)throw new Error("Account not found");return t.value.data.parsed.type==="delegated"&&(e=BigInt(1)),{discriminant:e,meta:{rentExemptReserve:BigInt(t.value.data.parsed.info.meta.rentExemptReserve),authorized:{staker:t.value.data.parsed.info.meta.authorized.staker,withdrawer:t.value.data.parsed.info.meta.authorized.withdrawer},lockup:{unixTimestamp:BigInt(t.value.data.parsed.info.meta.lockup.unixTimestamp),epoch:BigInt(t.value.data.parsed.info.meta.lockup.epoch),custodian:t.value.data.parsed.info.meta.lockup.custodian}},stake:{delegation:{voterPubkey:t.value.data.parsed.info.stake.delegation.voterPubkey,stake:BigInt(t.value.data.parsed.info.stake.delegation.stake),activationEpoch:BigInt(t.value.data.parsed.info.stake.delegation.activationEpoch),deactivationEpoch:BigInt(t.value.data.parsed.info.stake.delegation.deactivationEpoch)},creditsObserved:BigInt(t.value.data.parsed.info.stake.creditsObserved)}}};async function ir(t,e){let r=new S.PublicKey("SysvarStakeHistory1111111111111111111111111"),i=await t.getParsedAccountInfo(e);if(i===null||i.value===null)throw new Error("Account not found");let n=await t.getParsedAccountInfo(r);if(n===null)throw new Error("StakeHistory not found");let s=Ro(n),c=await t.getEpochInfo(),l=Uo(i),{effective:u,activating:m,deactivating:f}=Co(l.stake.delegation,BigInt(c.epoch),s),d;f>0?d="deactivating":m>0?d="activating":u>0?d="active":d="inactive";let g=BigInt(i.value.lamports)-u-l.meta.rentExemptReserve;return{state:d,active:Number(u),inactive:Number(g)}}function xc(t,e){let r=E.stakeActivationData(e);return _({queryKey:r,queryFn:async()=>{if(!e)throw Bo;return await ir(t,new S.PublicKey(e))},enabled:!!e,staleTime:1/0})}o();a();o();a();o();a();var nr=T.object({apy:T.number()}),Mc=T.object({validators:T.array(T.string())}),No=T.object({epoch:T.number(),effectiveSlot:T.number(),amount:T.number(),postBalance:T.number(),percentChange:T.number(),apr:T.number(),timestamp:T.number()}),Oc=T.object({items:T.array(No)}),Dc=T.object({address:T.string(),chainId:ci,decimals:T.number(),logoURI:T.string(),name:T.string(),symbol:T.string()}),Ec=T.object({caip19:T.string(),metadata:Dc}),Bc=T.object({vote_account:T.string()}),Fc=T.object({apy:T.string(),totalRewardsFeePercentage:T.string().optional(),chainId:ci,convertRatio:T.string(),name:T.string(),stakePoolAddress:T.string(),stakePoolTokenMetadata:Ec,validators:T.array(Bc)}),qo=T.record(T.string(),T.array(Fc)),hk=T.object({totalStaked:T.string(),rewards:T.string()});var Ko=new Error("Failed to fetch staking APY");async function Wo(){try{let t=await ve.api().get("/staking/v1/apy");if(!rt(t))throw Ko;let e=t.data;return nr.parse(e).apy}catch{throw Ko}}var Cc=()=>{let t=E.stakeApy();return _({enabled:!0,queryKey:t,gcTime:rr.Short,staleTime:1/0,async queryFn(){return Wo()}})};o();a();var zo=I(O());o();a();o();a();var Vo=new Error("Failed to fetch liquid staking supported tokens"),Rc=new Error("Missing supported tokens in response");async function jo(){try{let t=await ve.api().get("/liquid-staking/v1/supported-tokens");if(!rt(t))throw Vo;let e=qo.safeParse(t.data.supportedTokens);if(!e.success)throw Rc;return e.data}catch{throw Vo}}var Fr=()=>{let t=E.liquidStakingSupportedTokens();return _({queryKey:t,staleTime:W({minutes:15}),async queryFn(){return await jo()}})};function Uc(t){return typeof t=="string"?t:t?Ot(ot(t)):""}var Pt=t=>{let e=Uc(t),r=Ye("enable-psol-staking"),{data:i={}}=Fr(),n=(0,zo.useMemo)(()=>!!Object.values(i).flat().find(c=>c.stakePoolTokenMetadata.caip19===e),[e,i]);return e===B?r&&n:n};o();a();o();a();var ar=I(O());o();a();o();a();var Go=new Error("Failed to fetch Average Validator APY");async function Qo(){let t=await ve.api().get("/staking/v1/avg-validator-apy");if(!rt(t))throw Go;let e=nr.safeParse(t.data);if(e.success)return e.data.apy;throw Go}var Ho=()=>{let t=E.averageValidatorApy();return _({enabled:!0,queryKey:t,gcTime:W({hours:1}),staleTime:1/0,async queryFn(){return Qo()}})};o();a();o();a();var or={transactionData:void 0,provider:void 0,convert:{validatorVote:"",stakeAccount:"",validatorName:"",eligibleAccountsCount:0},amount:"",navigateTo:null},F=Nn(t=>({...or,resetStaking:()=>t(e=>({...e,amount:or.amount,transactionData:or.transactionData,convert:or.convert,navigateTo:or.navigateTo})),setTransactionData:e=>t({transactionData:e}),setProvider:e=>t({provider:e}),setConvertStakeAccount:e=>t({convert:e}),setAmount:e=>t({amount:e}),setNavigateTo:e=>t({navigateTo:e})}));var Yo=t=>{let e=F(d=>d.provider),r=(0,ar.useMemo)(()=>t?Ot(ot(t)):"",[t]),{data:i,isPending:n}=Ho(),s=i?i/100:null,{data:c={},isPending:l}=Fr(),u=(0,ar.useMemo)(()=>c[r]??[],[r,c]),m=u?u[0]:void 0,f=(0,ar.useCallback)(d=>d?u.find(g=>g.stakePoolTokenMetadata.caip19===d):m,[m,u]);return{isLoading:l||n,isSupported:u.length>0,providers:u,pickedLSTProvider:f,defaultProvider:m,avgValidatorApy:s,activeProvider:e}};var vt=t=>{let e=To.get(t);return Yo(e)};o();a();var Jo=I(O());var Nc=({onLiquidStake:t,onNativeStake:e})=>{let{t:r}=X(),i=Ti,{avgValidatorApy:n,pickedLSTProvider:s,defaultProvider:c}=vt(Ce.Solana.Mainnet),u=Pt(B)?s(B):c;return{options:(0,Jo.useMemo)(()=>[{type:"liquid",isRecommended:!0,title:r("stakeMethodSelectionLiquidStakingTitle"),description:r("stakeMethodSelectionLiquidStakingDescription",{poolTokenSymbol:u?.stakePoolTokenMetadata?.metadata?.symbol}),apy:u?r("stakeMethodEstApy",{apy:gt(parseFloat(u.apy))}):null,disabled:!u,onClick:t??(()=>{})},{type:"native",isRecommended:!1,title:r("stakeMethodSelectionNativeStakingTitle"),description:r("stakeMethodSelectionNativeStakingDescription"),apy:n?r("stakeMethodEstApy",{apy:gt(n)}):null,onClick:e,disabled:!1}],[n,u,t,e,r]),learnMoreLink:i}};o();a();o();a();o();a();var QA={name:"Jito",stakePoolAddress:"Jito4APyf642JPZPx3hGc6WWJ8zPKtRbRs4P815Awbb",apy:"0.0760131222374123",convertRatio:"1.1067926864808721",stakePoolTokenMetadata:{metadata:{address:"J1toso1uCk3RLmjorhTtrVwY9HJ7X8V9yYac6Y7kGCPn",name:"Jito Staked SOL",symbol:"JitoSOL",decimals:9,logoURI:"https://storage.googleapis.com/token-metadata/JitoSOL-256.png",chainId:"solana:101"},caip19:"solana:101/address:J1toso1uCk3RLmjorhTtrVwY9HJ7X8V9yYac6Y7kGCPn"},chainId:"solana:101",validators:[{vote_account:"validator"}]},$o={name:"Phantom Staked SOL",stakePoolAddress:"pSPcvR8GmG9aKDUbn9nbKYjkxt9hxMS7kF1qqKJaPqJ",apy:"0.0950000000000000",convertRatio:"1.0500000000000000",stakePoolTokenMetadata:{metadata:{address:$n,name:"Phantom Staked SOL",symbol:"PSOL",decimals:9,logoURI:"https://storage.googleapis.com/token-metadata/PSOL-256.png",chainId:"solana:101"},caip19:"solana:101/address:pSo1f9nQXWgXibFtKf7NWYxb5enAM4qfP6UJSiXRQfL"},chainId:"solana:101",validators:[{vote_account:"validator"}]};function ct(t){return t?t.stakePoolTokenMetadata.caip19===$o.stakePoolTokenMetadata.caip19:!1}function Xo({hideOnLowBalance:t}){let{pickedLSTProvider:e}=vt(Ce.Solana.Mainnet),r=e(B),{data:i}=ro();if(!i||!r?.apy)return{shouldHide:!0,apy:0,formattedApy:"0%"};let n=we(i.totalQuantityString,i.decimals),s=ct(r),c=!1;t&&(c=!n.isGreaterThan(0)),s||(c=!0);let l=parseFloat(r.apy),u=`${(l*100).toFixed(2)}%`;return{shouldHide:c,apy:l,formattedApy:u}}o();a();o();a();var qt=I(O());o();a();var Zo=I(O());var Kc=t=>{let e=[];return t.ownerPublicKey&&e.push({memcmp:{offset:44,bytes:t.ownerPublicKey}}),t.voteAccountPublicKey&&e.push({dataSize:200},{memcmp:{offset:124,bytes:t.voteAccountPublicKey}}),e},ea=async(t,e,r)=>{let i=Kc(e),n=await t.getParsedProgramAccounts(S.StakeProgram.programId,{filters:i}),c=(await Promise.allSettled(n.map(m=>ir(t,m.pubkey)))).map(m=>{if(m.status==="fulfilled")return m.value.state}),u=(await Promise.allSettled(n.map(m=>{let f=m.account.data?.parsed?.info?.stake?.delegation?.voter,d=r.get(f),g=d?.info?.keybaseUsername,y=d?.info?.iconUrl;return y?new Promise(A=>A(y)):g?Er(g):new Promise(A=>A(null))}))).map(m=>{if(m.status==="fulfilled"&&m.value!==null)return m.value});return n.map((m,f)=>({pubkey:m.pubkey.toString(),lamports:m.account.lamports,activationState:c[f],imageUri:u[f],...m.account.data.parsed}))},ta=(t,e)=>E.convertStakeAccountList(t,e),Wc=(t,e,r)=>()=>ea(t,{ownerPublicKey:e},r);function ra(t,e,r,i=!0){let n=ta(e,t.rpcEndpoint),s=Wc(t,e,r);return _({queryKey:n,queryFn:s,enabled:!!e&&i,staleTime:1/0})}var yb=(t,e,r,i)=>{let n=ee();return(0,Zo.useCallback)(async()=>{i&&await n.prefetchQuery({queryKey:ta(e,t.rpcEndpoint),queryFn:()=>ea(t,{ownerPublicKey:e},r)})},[n,e,t,r,i])};o();a();var Ri=(t,e)=>{if(t.type==="initialized")return!1;let r=t?.info?.stake?.delegation?.voter??"",i=Ci(t);return t.activationState==="active"&&e.has(r)&&!i};var Vc=t=>{let{data:[e]}=Dt(["kill-liquid-staking-convert"]),r=t?.validators,i=(0,qt.useMemo)(()=>r?new Map(r.map(L=>[L.vote_account,L])):new Map,[r]),{connection:n}=Rt(),{data:s}=nt("solana"),{results:c,isFetched:l,isError:u}=Dr(n),m=(0,qt.useMemo)(()=>new Map(c.map(L=>[L.voteAccountPubkey,L])),[c]),{data:f,isLoading:d,isFetching:g,error:y,refetch:A}=ra(n,s?.address??"",m,l||u),h=d||g,k=(0,qt.useMemo)(()=>h||!f?[]:f.map(L=>jc(L,m,i)).sort((L,M)=>L.lamports>M.lamports?-1:1),[h,f,m,i]),w=(0,qt.useMemo)(()=>k.filter(L=>L.eligible),[k]),D=(0,qt.useMemo)(()=>k.filter(L=>!L.eligible),[k]);return t?.stakePoolTokenMetadata.caip19===B?{hasConvertibleStakeAccounts:!1,eligibleStakeAccounts:[],inelegibleStakeAccounts:[],isLoadingList:!1,error:null,refetch:()=>{}}:{hasConvertibleStakeAccounts:!e&&w.length>0,eligibleStakeAccounts:w,inelegibleStakeAccounts:D,isLoadingList:h,error:y,refetch:A}},jc=(t,e,r)=>{let i=Ri(t,r),n=zc(t,e),s=t.lamports;return{...t,amount:s,eligible:i,title:n,imageUri:t.imageUri}},zc=(t,e)=>{let r="";if(t.type==="delegated"){let{voter:i}=t.info.stake.delegation,n=e.get(i),s=n?.info?.keybaseUsername;r=n?.info?.name??s??Fn(i)}else t.type==="initialized"&&(r=t.pubkey);return r};o();a();var aa=I(O());o();a();var Cr=I(O());o();a();function na({key:t,queryKey:e,defaultValue:r=null}){let i=H();return _({enabled:!0,queryKey:e,gcTime:rr.Long,staleTime:1/0,async queryFn(){try{return await i.get(t)}catch(n){return n instanceof Error&&Z.captureError(n,"staking"),r}}})}function oa({key:t,queryKey:e}){let r=H(),i=ee();return Te({async mutationFn(n){try{return await r.set(t,n)}catch(s){s instanceof Error&&Z.captureError(s,"staking");return}},async onMutate(n){await i.cancelQueries({queryKey:e});let s=i.getQueryData(e);return i.setQueryData(e,n),{previousValue:s}},onError(n,s,c){i.setQueryData(e,c?.previousValue)}})}var Gc=T.object({convert:T.boolean(),mint:T.boolean()}),Ui={convert:!1,mint:!1},Qc=JSON.stringify(Ui),Rr=()=>{let{data:t}=na({key:"featureUsed",queryKey:E.featureUsed(),defaultValue:Qc}),e=(0,Cr.useMemo)(()=>{if(!t)return Ui;let n=Gc.safeParse(JSON.parse(t));return n.success?n.data:Ui},[t]),{mutateAsync:r}=oa({key:"featureUsed",queryKey:E.featureUsed()}),i=(0,Cr.useCallback)(async n=>{let s={...e,...n};await r(JSON.stringify(s))},[r,e]);return{usageState:e,setUsageState:i}};var Ni=({method:t,goToInfoPage:e,goToInitFlowPage:r})=>{let{usageState:i}=Rr();return(0,aa.useCallback)(()=>{i[t]?r():e()},[e,r,t,i])};o();a();o();a();o();a();var Ee=I(O());o();a();var Hc=2,sa=({networkID:t,poolTokenMintAddress:e})=>{let r=q.getAddressType(t),{fungible:i}=Je({key:e}),n=eo(t,r),{fungible:s}=Je({key:n}),c=R(s?.data.amount??""),l=R(xr),u=R(er),m=R(er),f=R(Hc).plus(l),d=i?R(f).plus(u):R(m).plus(f).plus(u),g=R(c).minus(d),y=R.max(g,0);return{minAmount:d,maxAmount:y,balance:c}};var Yc=t=>{if(t.isLessThan(.01))return t.toString();let e=t.dp();return t.isLessThan(1)&&e&&e>1?t.toFixed(2,R.ROUND_FLOOR):parseFloat(t.toFixed(1,R.ROUND_FLOOR)).toString()},Jc=({goBack:t,goToReviewPage:e,showInfoPage:r,lstCaip19:i})=>{let n=qe,s=F(U=>U.amount),c=F(U=>U.setAmount),l=F(U=>U.setProvider),u=n?.data.symbol??"",m=n?.data.chain.id??q.solana.mainnetID,f=n?.data.decimals??qe.data.decimals,{data:d}=nt("solana"),{pickedLSTProvider:g}=vt(q.solana.mainnetID),y=g(i),A=y?.stakePoolTokenMetadata.metadata.address??"";no(d,"STAKE_FUNGIBLE");let{minAmount:h,maxAmount:k,balance:w}=sa({networkID:m,poolTokenMintAddress:A}),D=(0,Ee.useMemo)(()=>{if(s)return Ln(s,f);let U=w.multipliedBy(.95),Fe=R.max(R.min(U,k),h);return Yc(we(Fe,f))},[s,w,f,k,h]),[L,M]=(0,Ee.useState)(D),G=we(k,f),ge=we(h,f),Me=we(w,f),x=_n(L,f).toString(),be=R(x),ke=w.isLessThan(h),te=be.isGreaterThan(k),ue=be.isFinite(),He=(0,Ee.useMemo)(()=>{if(!y)return v.t("mintLiquidStakeAmountNoProviders");if(x&&ke)return v.t("mintLiquidStakeAmountMinRequired",{symbol:u,amount:ge});if(x&&te)return v.t("mintLiquidStakeAmountInsufficientBalance")},[y,x,ke,te,ge,u]),et=ue&&!He,dr=(0,Ee.useMemo)(()=>{if(!y)return;let U=gt(Number.parseFloat(y.apy)),{address:Fe,name:V,symbol:mr,logoURI:bs}=y.stakePoolTokenMetadata.metadata,hs=R(1).dividedBy(R(y.convertRatio)),Ps=`1 ${u} \u2248 ${At(hs)} ${mr}`;return{identifier:Fe,apy:U,name:V,symbol:mr,rate:Ps,logoURI:bs}},[y,u]),_t=(0,Ee.useCallback)(()=>{M(String(G))},[G]),St=(0,Ee.useCallback)(U=>{let Fe=In(U);Mr(Fe,f??9)&&M(Fe)},[f]),Lt=(0,Ee.useCallback)(()=>{l(y),c(x),e()},[y,x,e,c,l]),yt=(0,Ee.useCallback)(()=>{c(""),t()},[c,t]);return{amount:L,amountError:He,balance:Me,symbol:u,poolToken:dr,canSubmit:et,onBack:yt,onContinue:Lt,onChangeAmount:St,onSetMax:_t,onInfoPress:r}};o();a();var wt=()=>{let{data:t}=oo(),e=t==="GB",r=Ye("enable-uk-staking-disclaimers"),i=Ye("enable-uk-staking-override"),n=Pt(B);return i?!0:r&&e&&n};o();a();var ut=I(O());var Ur=null,$c=t=>{if(!Ur&&t){let e="liquidStake";Ur=new vr(t,e)}if(!Ur)throw new Error("liquidStakeAnalytics was not properly configured");return Ur},Le=()=>{let t=it(),e=$c(t),r=d=>{switch(d){case B:return"Phantom Staked SOL";case st:return"Jito Staked SOL";default:return}},i=d=>{switch(d){case B:return"PSOL";case st:return"JITOSOL";default:return}},n=(0,ut.useCallback)(({provider:d,entryPoint:g,testVariant:y})=>{t.capture("liquidStakingMarketingPageSeen",{data:{lstCaip19:d,lstSymbol:i(d),entryPoint:g,testVariant:y??""}})},[t]),s=(0,ut.useCallback)(({lstCaip19:d,testVariant:g,entryPoint:y})=>{t.capture("liquidStakingMarketingPagePrimaryButtonClicked",{data:{stake:{caip19:d,lstSymbol:i(d),testVariant:g,entryPoint:y}}})},[t]),c=(0,ut.useCallback)(d=>{let g=d?r(d):void 0,y=d?i(d):void 0;t.capture("liquidStakingMintModalContinueClicked",{data:{stake:{caip19:d,token:g,tokenSymbol:y}}})},[t]),l=(0,ut.useCallback)(({provider:d,payAmount:g,receiveAmount:y,payAmountUSD:A,receiveAmountUSD:h,payAssetTitle:k,providerName:w,receiveAssetTitle:D})=>{t.capture("liquidStakingMintApprovedByUser",{data:{stake:{stakePoolAddress:d?.stakePoolAddress,token:d?.stakePoolTokenMetadata.metadata.name,apy:d?.apy,convertRatio:d?.convertRatio,caip19:d?.stakePoolTokenMetadata.caip19,payAmount:g,receiveAmount:y,payAmountUSD:A,receiveAmountUSD:h,payAssetTitle:k,receiveAssetTitle:D,providerName:w}}})},[t]),u=(0,ut.useCallback)(d=>{e.submittedTransaction(d,{chainType:"solana",chainName:"solana",networkId:"mainnet",method:"signAndSendTransaction"})},[e]),m=(0,ut.useCallback)(({provider:d,amount:g})=>{t.capture("liquidStakingMintSuccess",{data:{stake:{apy:d?.apy,convertRatio:d?.convertRatio,caip19:d?.stakePoolTokenMetadata.caip19,stakePoolAddress:d?.stakePoolAddress,token:d?.stakePoolTokenMetadata.metadata.name,totalAmount:g}}})},[t]),f=(0,ut.useCallback)(d=>{t.capture("liquidStakingMintFailed",{data:{stake:{amount:d}}})},[t]);return{trackMintModalContinue:c,trackMarketingModalSeen:n,trackMarketingModalContinue:s,trackMintSubmitted:u,trackMintSuccess:m,trackMintFailed:f,trackMintApprovedByUser:l}};o();a();var pe=I(O());o();a();var ca=I(O());var ua=({txReceipt:t,isTxError:e,poolTokenFungible:r,invalidateQueries:i,dismissLiquidStaking:n})=>{let s=F(l=>l.resetStaking),c=F(l=>l.setNavigateTo);return(0,ca.useCallback)(()=>{if(s(),!t||e)return n();i(),c(r?{screen:"FungibleDetail",fungible:r}:{screen:"Activity"}),n()},[t,e,r,i,n,c,s])};o();a();var Nr=I(O());o();a();var la=({connection:t})=>{let e=H(),r=Bn();return Te({mutationFn:async({accountIdentifier:n,ownerAddress:s,pendingActivityRow:c,activityType:l,transactionData:{networkID:u,transaction:m,signers:f}})=>{if(q.isSolanaNetworkID(u)){await An(m,t);let d={ownerAddress:s,networkID:u,data:{signature:""},type:l,display:{summary:c}};return{id:await Gn({accountIdentifier:n,feePayer:new S.PublicKey(s),connection:t,accountSigner:r,transaction:m,pendingTransactionInput:d,storage:e,opts:{additionalSignerAccounts:f}}),networkID:u}}throw new Error(`Unsupported network for liquid staking: ${u}`)}})};function pa({isLoadingPoolToken:t,pendingActivityRow:e,onTransactionSubmitted:r,onTransactionFailed:i,activityType:n}){let{connection:s}=Rt(),c=F(k=>k.transactionData),l=qe,{data:u,isLoading:m}=Et(),{mutateAsync:f}=la({connection:s}),g=(0,Nr.useMemo)(()=>(u?.addresses??[]).find(k=>k.networkID===l?.data.chain.id),[l?.data.chain.id,u?.addresses])?.address??"",y=u?.identifier??"";return{executeLiquidStake:(0,Nr.useCallback)(async()=>{try{if(!c)throw new ht("MissingTransactionData");let k=await f({accountIdentifier:y,ownerAddress:g,pendingActivityRow:e,activityType:n,transactionData:c});r(k)}catch(k){i(k)}},[y,g,e,c,f,r,i,n]),isReadyToExecute:!m&&!t}}o();a();var da=I(O());var ma=()=>{let t=ee();return(0,da.useCallback)(()=>tr(t)(),[t])},Zc=(t,e,r)=>zn({connection:t,signature:e,commitment:"finalized"}).then(()=>{tr(r)()});o();a();function qr(t){return t?t.stakePoolTokenMetadata.caip19===st:!1}o();a();function fa(t){return t instanceof ht?t:new ht("UnknownError")}var eu="https://www.jito.network/defi/";function tu({poolTokenSymbol:t,txHash:e,txError:r,confirmationStatus:i,showUKDisclaimer:n,onDismiss:s,openExternalLink:c}){let l={title:v.t("commandClose"),onPress:s},u={txHash:e,txHashTitle:v.t("commandViewTransaction")};return r?{type:"error",title:v.t("mintStakeStatusErrorTitle"),message:v.t("mintStakeStatusErrorMessage",{poolTokenSymbol:t}),...u,primaryButton:l,showUKDisclaimer:n,openExternalLink:c}:i==="confirmed"?{type:"success",title:v.t("mintStakeStatusSuccessTitle",{poolTokenSymbol:t}),message:"",...u,primaryButton:l,showUKDisclaimer:n,openExternalLink:c}:{type:"loading",title:v.t("mintStakeStatusLoadingTitle",{poolTokenSymbol:t}),message:v.t("mintStakeStatusLoadingMessage",{poolTokenSymbol:t}),...u,primaryButton:l,showUKDisclaimer:n,openExternalLink:c}}var ru=(t,e)=>{let r=ma(),[i,n]=(0,pe.useState)("loading"),[s,c]=(0,pe.useState)(),[l,u]=(0,pe.useState)(),{trackMintSubmitted:m,trackMintSuccess:f,trackMintFailed:d}=Le(),{usageState:g,setUsageState:y}=Rr(),A=F(V=>V.provider),h=F(V=>V.setTransactionData),k=F(V=>V.amount),w=qe,D=A?.stakePoolTokenMetadata.metadata.symbol??"",L=A?.stakePoolTokenMetadata.metadata.address??"",{data:M}=Et(),G=M?.type==="ledger",Me=(0,pe.useMemo)(()=>(M?.addresses??[]).find(V=>V.networkID===w?.data.chain.id),[w?.data.chain.id,M?.addresses])?.addressType??"solana",{fungible:x,isLoadingTokens:be}=Je({key:L}),ke=(0,pe.useCallback)(V=>{m(V.id),c(V),g.mint||y({mint:!0})},[y,m,g.mint]),te=(0,pe.useCallback)(V=>{d(k);let mr=fa(V);u(mr)},[d,k]),ue=(0,pe.useMemo)(()=>({topLeft:{text:v.t("mintLiquidStakePendingTitle",{symbol:D})}}),[D]),{executeLiquidStake:He,isReadyToExecute:et}=pa({isLoadingPoolToken:be,pendingActivityRow:ue,onTransactionSubmitted:ke,onTransactionFailed:te,activityType:"delegateStake"}),dr=(0,pe.useCallback)(()=>{f({amount:k,provider:A}),h(void 0),r()},[f,k,A,h,r]),{isSuccess:_t,isError:St,error:Lt}=Jn(dr,s);(0,pe.useEffect)(()=>{_t?n("confirmed"):St&&(n("error"),u(Lt),d(k))},[_t,d,k,St,Lt,s]);let yt=ua({txReceipt:s,isTxError:St,poolTokenFungible:x,invalidateQueries:r,dismissLiquidStaking:t}),U=wt(),Fe=(0,pe.useMemo)(()=>tu({poolTokenSymbol:D,txHash:s?.id,txError:l,confirmationStatus:i,showUKDisclaimer:U,onDismiss:yt,openExternalLink:e}),[D,s?.id,l,i,yt,e,U]);return{addressType:Me,isLedger:G,isReadyToExecute:et,statusPageProps:Fe,learnMoreLink:eu,txError:l,executeLiquidStake:He,isJitoSOL:qr(A),isPSOL:ct(A)}};o();a();var qi=I(O());function iu({navigateToMintLiquidStakeAmountPage:t,navigateBack:e,entryPoint:r}){let{trackMarketingModalContinue:i}=Le(),{mutate:n}=Oe("StakingWelcome"),s=On("psol-popup-copy-test"),c=(0,qi.useCallback)(()=>{i({lstCaip19:B,testVariant:s,entryPoint:r}),t(B),n()},[t,i,n,s,r]),l=(0,qi.useCallback)(()=>{e(),n()},[e,n]),{t:u}=X(),m={title:u("liquidStakingInfoPageStillEarningZero"),description:u("liquidStakingInfoPageConvertYourSOL"),primaryButtonText:u("liquidStakingInfoPageConvertYourSOLButton")},f={title:u("liquidStakingInfoPageEarnUpTo9APY"),description:u("liquidStakingInfoPageConvertYourSOL2"),primaryButtonText:u("liquidStakingInfoPageStartEarning")};return{onPrimaryButtonPress:c,onClose:l,viewState:s==="test1"?m:s==="test2"?f:m}}o();a();o();a();var ks=I(O());o();a();var Pa=I(O());o();a();var Sa=(t,e)=>{let r=[],i=t?ot(t):void 0,n=xn(e?.stakePoolTokenMetadata.caip19??"");return i&&n&&(r.push(i),r.push(n)),{query:{data:r}}};o();a();var Tt=I(O());var nu=(t,e)=>{if(e===void 0)return;let r=ot(t),i=Ot(r);return e[i]},ou=(t,e,r)=>{if(!e)return R(0);let i=new R(e.convertRatio),n=we(t,e.stakePoolTokenMetadata.metadata.decimals);return r?n.multipliedBy(i):n.div(i)};function ya(t,e,r){return e?{network:{id:e.stakePoolTokenMetadata.metadata.chainId??"solana:101",name:t.data.chain.name,symbol:t.data.chain.symbol,imageUrl:t.data.chain.imageUrl},priceData:r?r[e.stakePoolTokenMetadata.caip19]:void 0,decimals:e.stakePoolTokenMetadata.metadata.decimals,logoUri:e.stakePoolTokenMetadata.metadata.logoURI??null,symbol:e.stakePoolTokenMetadata.metadata.symbol,tokenAddress:e.stakePoolTokenMetadata.metadata.address,tokenType:"SPL"}:{network:{id:t.data.chain.id,name:t.data.chain.name,symbol:t.data.chain.symbol,imageUrl:t.data.chain.imageUrl},priceData:nu(t,r),decimals:t.data.decimals,logoUri:t.data.logoUri??null,symbol:t.data.symbol,tokenAddress:t.data.tokenAddress,tokenType:t.type??"SolanaNative"}}var ga=(t,e,r,i,n=!1)=>{if(!t)return null;let{priceData:s,decimals:c,...l}=ya(t,n?e:void 0,i),u=we(r,c),m=s?.usd?u.multipliedBy(s.usd):null;return{amount:At(u),amountUsd:m?m.toNumber():null,border:!1,title:v.t("liquidStakeReviewYouPay"),...l}},ka=(t,e,r,i,n=!1)=>{if(!e||!t)return null;let{priceData:s,...c}=ya(t,n?void 0:e,i),l=ou(r,e,n),u=s?.usd?l.multipliedBy(s.usd):null;return{amount:At(l),amountUsd:u?u.toNumber():null,border:!1,title:n?v.t("liquidStakeUnstakeReviewYouReceive"):v.t("liquidStakeReviewYouReceive"),...c}},Aa=({process:t,fungibleToStake:e,amount:r,provider:i,selectedChainAddress:n,transactionFees:s,isLoading:c,canSubmit:l,transactionData:u,priceMap:m,networkFeeErrorMsg:f,showUKDisclaimer:d})=>{let g=(0,Tt.useMemo)(()=>ga(e,i,r,m),[e,i,r,m]),y=(0,Tt.useMemo)(()=>ka(e,i,r,m),[e,i,r,m]),A=i?.name??"",h=n?.address??"",k=i?.apy!==void 0?gt(Number.parseFloat(i.apy)):"",w=`${At(we(s,e?.data.decimals??0))} ${e?.data.symbol}`,D=qr(i),L=ct(i),M=i?.totalRewardsFeePercentage??"8",G=u?.solWithdrawalFee??u?.stakeWithdrawalFee,ge=(0,Tt.useMemo)(()=>({accountLabelText:v.t("stakeReviewAccount"),providerLabelText:v.t("liquidStakeReviewProvider"),apyLabelText:v.t("stakeReviewAPY"),apyLabelTextTooltip:v.t("stakeReviewAPYTooltip"),networkFeeLabelText:v.t("liquidStakeReviewNetworkFee"),primaryButtonText:v.t(t==="convert"?"commandConvert":"commandStake"),feeFootnoteText:v.t("liquidStakeReviewPhantomFeeFootnote",{totalRewardsFeePercentage:M}),feeFootnoteDescriptionText:v.t("liquidStakeReviewPhantomFeeFootnoteDescription",{withdrawalFeePercentage:G}),feeFootnoteTooltipText:v.t("liquidStakeReviewPhantomFeeFootnoteTooltip",{totalRewardsFeePercentage:M})}),[t,M,G]);return{process:t,payAsset:g,receiveAsset:y,account:h,providerName:A,apy:k,networkFee:w,strings:ge,isLoading:c,canSubmit:l,networkFeeErrorMsg:f,isJitoSOL:D,isPSOL:L,showUKDisclaimer:d}},Qv=({stakedFungible:t,amount:e,provider:r,selectedChainAddress:i,transactionFees:n,isLoading:s,canSubmit:c,priceMap:l,networkFeeErrorMsg:u,transactionData:m})=>{let f=(0,Tt.useMemo)(()=>ga(t,r,e,l,!0),[t,r,e,l]),d=(0,Tt.useMemo)(()=>ka(t,r,e,l,!0),[t,r,e,l]),g=i?.address??"",y=`${At(we(n,t?.data.decimals??0))} ${t?.data.symbol}`,A=m?.isWithdrawSol??!0,h=A?m?.solWithdrawalFee??.1:m?.stakeWithdrawalFee??.1,k=(0,Tt.useMemo)(()=>({accountLabelText:v.t("stakeReviewAccount"),networkFeeLabelText:v.t("liquidStakeReviewNetworkFee"),primaryButtonText:v.t("commandUnstake"),feeLabelText:v.t("unstakeLiquidStakeFee"),feeLabelTextTooltip:v.t("unstakeLiquidStakeFeeTooltip"),unstakeDelayDisclaimerText:v.t("unstakeLiquidStakeDelayDisclaimer"),feePercentageText:`${h}%`}),[h]),w=wt();return{payAsset:f,receiveAsset:d,account:g,networkFee:y,strings:k,isLoading:s,canSubmit:c,networkFeeErrorMsg:u,isWithdrawSol:A,showUKDisclaimer:w}};o();a();var ba=I(O());var au=W({seconds:10}),ha=({hasPoolTokenAccount:t,chainAddress:e,transactionData:r})=>{let{data:i,isPending:n,isFetched:s,isSuccess:c}=Hn({networkID:r?.networkID??q.solana.mainnetID,multichainTransaction:cu(r),queryOptions:{refetchInterval:au}}),{data:l=0}=Zn(e),u=$(xr).plus(er),m=t?$(u):$(l).plus(u),{hasSufficientFunds:f,isLoading:d,nativeTokenSymbol:g}=io({networkID:r?.networkID??q.solana.mainnetID,addressType:e?.addressType,gasEstimation:i,transactionValue:m}),y=uu({hasSufficientFunds:f,hasGasEstimationFailed:s&&!c,nativeTokenSymbol:g}),A=su(i),h=m.plus(A),k=n||d;return(0,ba.useMemo)(()=>({isLoading:k,hasSufficientFunds:f,transactionFees:h,networkFeeErrorMsg:y,nativeTokenSymbol:g}),[k,f,h,y,g])},su=t=>t?q.isSolanaNetworkID(t.networkID)?new $(t.value):new $(0):new $(0),cu=t=>{if(t&&q.isSolanaNetworkID(t.networkID)){let{networkID:e,transaction:r}=t;return{networkID:e,transaction:[r]}}},uu=({hasSufficientFunds:t,hasGasEstimationFailed:e,nativeTokenSymbol:r})=>e?v.t("transactionGasEstimationError"):t==="insufficient"?v.t("transactionNotEnoughNative",{nativeTokenSymbol:r}):void 0;var va=({process:t,transactionData:e,isLoadingTransactionData:r})=>{let i=F(M=>M.provider),n=qe,s=F(M=>M.amount),{data:c}=nt("solana"),{fungible:l,isLoadingTokens:u}=Je({key:i?.stakePoolTokenMetadata.metadata.address||""}),{isLoading:m,hasSufficientFunds:f,transactionFees:d,networkFeeErrorMsg:g}=ha({hasPoolTokenAccount:!!l,chainAddress:c,transactionData:e}),y=(0,Pa.useMemo)(()=>Sa(n,i),[n,i]),{data:A}=Yn(y),h=r||m||u,k=!h&&!!e&&f!=="insufficient"&&!g,w=wt();return Aa({process:t,fungibleToStake:n,amount:s,provider:i,selectedChainAddress:c,transactionFees:d,transactionData:e,isLoading:h,canSubmit:k,priceMap:A,networkFeeErrorMsg:g,showUKDisclaimer:t==="mint"&&w})};o();a();o();a();o();a();var os=I(is());o();a();var ns=I(ws()),Vl=[69,107,109,106,121,122,120,100,105,53,52,51,110,99,76,56,54,116,99,97,67,65,100,117,108,79,119,121,110,86,53,68,118,54,86,67,109,73,84,117,118,48,51,118,53,101,98,76,80,98,48,88,101,57,111,108,82,71,75,72,85,71,119,68,117,116,111,117,68,117,77,55,49,88,65,106,55,97,111,74,102,77,78,106,56,119,61,61],$r=t=>{let e=`${String.fromCharCode(...Vl)}||${t}`,r=wn(Buffer.from(e));return ns.default.encode(r)};var jl=async({connection:t,stakePoolAddress:e,ownerAddress:r,validatorVoteAddress:i,stakeAccountAddress:n,poolTokenAccountAddress:s})=>{let c=new S.PublicKey(e),l=new S.PublicKey(r),u=new S.PublicKey(i),m=new S.PublicKey(n),f=s?new S.PublicKey(s):void 0,d=new S.PublicKey($r(r)),{instructions:g,signers:y}=await(0,os.depositStake)(t,l,c,l,u,m,f,[{pubkey:d,isSigner:!1,isWritable:!1}]),A=(await t.getLatestBlockhash("confirmed")).blockhash,h=new Q.VersionedTransaction(new Q.TransactionMessage({instructions:g,payerKey:l,recentBlockhash:A}).compileToV0Message());return{transaction:await Ct(h,{connection:Ar(Ce.Solana.Mainnet),calculators:{cost:hr,budget:new br(2e5,2e5)}}),signers:y}};o();a();o();a();var Qt=I(fr());o();a();var un=I(vs());var KT=new S.PublicKey("metaqbxxUerdq28cj1RbAWkYQm3ybzjb6a8bt518x1s");var fe=new S.PublicKey("SPoo1Ku8WFXoNDMHPsrGSTSG1Y47rzgn41SLUNakuHy");var WT=un.Buffer.from("ephemeral"),as=un.Buffer.from("transient"),lr=S.LAMPORTS_PER_SOL;o();a();var Xr=Object.freeze({DepositStake:{index:9,layout:Pe.struct([Pe.u8("instruction")])},DepositSol:{index:14,layout:Pe.struct([Pe.u8("instruction"),Pe.ns64("lamports")])},WithdrawStake:{index:10,layout:Pe.struct([Pe.u8("instruction"),Pe.ns64("poolTokens")])},WithdrawSol:{index:16,layout:Pe.struct([Pe.u8("instruction"),Pe.ns64("poolTokens")])}});function Zr(t,e){let r=t.layout.span,i=Buffer.alloc(r),n=Object.assign({instruction:t.index},e);return t.layout.encode(n,i),i}var Gt=class{static depositStake(e){let{stakePool:r,validatorList:i,depositAuthority:n,withdrawAuthority:s,depositStake:c,validatorStake:l,reserveStake:u,destinationPoolAccount:m,managerFeeAccount:f,referralPoolAccount:d,poolMint:g,referralAccount:y}=e,A=Xr.DepositStake,h=Zr(A),k=[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:s,isSigner:!1,isWritable:!1},{pubkey:c,isSigner:!1,isWritable:!0},{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:f,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:g,isSigner:!1,isWritable:!0},{pubkey:S.SYSVAR_CLOCK_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:S.SYSVAR_STAKE_HISTORY_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:kt,isSigner:!1,isWritable:!1},{pubkey:S.StakeProgram.programId,isSigner:!1,isWritable:!1}];return y&&k.push({pubkey:y,isSigner:!1,isWritable:!1}),new Q.TransactionInstruction({programId:fe,keys:k,data:h})}static depositSol(e){let{stakePool:r,withdrawAuthority:i,depositAuthority:n,reserveStake:s,fundingAccount:c,destinationPoolAccount:l,managerFeeAccount:u,referralPoolAccount:m,poolMint:f,lamports:d,referralAccount:g}=e,y=Xr.DepositSol,A=Zr(y,{lamports:d}),h=[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:c,isSigner:!0,isWritable:!0},{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:f,isSigner:!1,isWritable:!0},{pubkey:S.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:kt,isSigner:!1,isWritable:!1}];return n&&h.push({pubkey:n,isSigner:!0,isWritable:!1}),g&&h.push({pubkey:g,isSigner:!1,isWritable:!1}),new Q.TransactionInstruction({programId:fe,keys:h,data:A})}static withdrawStake(e){let{stakePool:r,validatorList:i,withdrawAuthority:n,validatorStake:s,destinationStake:c,destinationStakeAuthority:l,sourceTransferAuthority:u,sourcePoolAccount:m,managerFeeAccount:f,poolMint:d,poolTokens:g}=e,y=Xr.WithdrawStake,A=Zr(y,{poolTokens:g}),h=[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:c,isSigner:!1,isWritable:!0},{pubkey:l,isSigner:!1,isWritable:!1},{pubkey:u,isSigner:!0,isWritable:!1},{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:f,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:S.SYSVAR_CLOCK_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:kt,isSigner:!1,isWritable:!1},{pubkey:S.StakeProgram.programId,isSigner:!1,isWritable:!1}];return new Q.TransactionInstruction({programId:fe,keys:h,data:A})}static withdrawSol(e){let{stakePool:r,withdrawAuthority:i,sourceTransferAuthority:n,sourcePoolAccount:s,reserveStake:c,destinationSystemAccount:l,managerFeeAccount:u,solWithdrawAuthority:m,poolMint:f,poolTokens:d}=e,g=Xr.WithdrawSol,y=Zr(g,{poolTokens:d}),A=[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:c,isSigner:!1,isWritable:!0},{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:f,isSigner:!1,isWritable:!0},{pubkey:S.SYSVAR_CLOCK_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:S.SYSVAR_STAKE_HISTORY_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:S.StakeProgram.programId,isSigner:!1,isWritable:!1},{pubkey:kt,isSigner:!1,isWritable:!1}];return m&&A.push({pubkey:m,isSigner:!0,isWritable:!1}),new Q.TransactionInstruction({programId:fe,keys:A,data:y})}};o();a();var b=I(on());var ss=I(fr()),cs=I(li());var ft=[(0,b.u64)("denominator"),(0,b.u64)("numerator")];var ei=si().transform(t=>new ss.default(t,10)),ti=si().transform(t=>new S.PublicKey(t)),zl=gn(["uninitialized","initialized","delegated","rewardsPool"]),Gl=tt({rentExemptReserve:ei,authorized:tt({staker:ti,withdrawer:ti}),lockup:tt({unixTimestamp:Yt(),epoch:Yt(),custodian:ti})}),Ql=tt({meta:Gl,stake:tt({delegation:tt({voter:ti,stake:ei,activationEpoch:ei,deactivationEpoch:ei,warmupCooldownRate:Yt()}),creditsObserved:Yt()}).nullish().default(null)}),us=tt({type:zl,info:kn(Ql)}),pn=class extends cs.Layout{layout;discriminator;constructor(e,r){super(-1,r),this.layout=e,this.discriminator=(0,b.u8)()}encode(e,r,i=0){return e==null?this.discriminator.encode(0,r,i):(this.discriminator.encode(2,r,i),this.layout.encode(e,r,i+1)+1)}decode(e,r=0){let i=this.discriminator.decode(e,r);if(i===0)return null;if(i===1||i===2)return this.layout.decode(e,r+1);throw new Error("Invalid future epoch "+this.property)}getSpan(e,r=0){let i=this.discriminator.decode(e,r);if(i===0)return 1;if(i===1||i===2)return this.layout.getSpan(e,r+1)+1;throw new Error("Invalid future epoch "+this.property)}};function ln(t,e){return new pn(t,e)}var ls=(0,b.struct)([(0,b.u8)("accountType"),(0,b.publicKey)("manager"),(0,b.publicKey)("staker"),(0,b.publicKey)("stakeDepositAuthority"),(0,b.u8)("stakeWithdrawBumpSeed"),(0,b.publicKey)("validatorList"),(0,b.publicKey)("reserveStake"),(0,b.publicKey)("poolMint"),(0,b.publicKey)("managerFeeAccount"),(0,b.publicKey)("tokenProgramId"),(0,b.u64)("totalLamports"),(0,b.u64)("poolTokenSupply"),(0,b.u64)("lastUpdateEpoch"),(0,b.struct)([(0,b.u64)("unixTimestamp"),(0,b.u64)("epoch"),(0,b.publicKey)("custodian")],"lockup"),(0,b.struct)(ft,"epochFee"),ln((0,b.struct)(ft),"nextEpochFee"),(0,b.option)((0,b.publicKey)(),"preferredDepositValidatorVoteAddress"),(0,b.option)((0,b.publicKey)(),"preferredWithdrawValidatorVoteAddress"),(0,b.struct)(ft,"stakeDepositFee"),(0,b.struct)(ft,"stakeWithdrawalFee"),ln((0,b.struct)(ft),"nextStakeWithdrawalFee"),(0,b.u8)("stakeReferralFee"),(0,b.option)((0,b.publicKey)(),"solDepositAuthority"),(0,b.struct)(ft,"solDepositFee"),(0,b.u8)("solReferralFee"),(0,b.option)((0,b.publicKey)(),"solWithdrawAuthority"),(0,b.struct)(ft,"solWithdrawalFee"),ln((0,b.struct)(ft),"nextSolWithdrawalFee"),(0,b.u64)("lastEpochPoolTokenSupply"),(0,b.u64)("lastEpochTotalLamports")]);var Hl=(0,b.struct)([(0,b.u64)("activeStakeLamports"),(0,b.u64)("transientStakeLamports"),(0,b.u64)("lastUpdateEpoch"),(0,b.u64)("transientSeedSuffixStart"),(0,b.u64)("transientSeedSuffixEnd"),(0,b.u8)("status"),(0,b.publicKey)("voteAccountAddress")]),ri=(0,b.struct)([(0,b.u8)("accountType"),(0,b.u32)("maxValidators"),(0,b.vec)(Hl,"validators")]);o();a();var Be=I(fr());function dn(t){return isNaN(t)?0:Number(t*S.LAMPORTS_PER_SOL)}function ii(t,e){let r=e.mul(t.totalLamports),i=t.poolTokenSupply;return r.lt(i)?new Be.default(0):r.div(i)}async function ni(t,e){let[r]=await S.PublicKey.findProgramAddress([e.toBuffer(),Buffer.from("withdraw")],t);return r}async function oi(t,e,r,i){let[n]=await S.PublicKey.findProgramAddress([e.toBuffer(),r.toBuffer(),i?new Be.default(i).toArrayLike(Buffer,"le",4):Buffer.alloc(0)],t);return n}function It(t){if(typeof t=="number")return Math.abs(t)/S.LAMPORTS_PER_SOL;if(typeof t=="bigint")return Math.abs(Number(t))/S.LAMPORTS_PER_SOL;let e=1;t.isNeg()&&(e=-1);let i=t.abs().toString(10).padStart(10,"0"),n=i.length-9,s=i.slice(0,n)+"."+i.slice(n);return e*parseFloat(s)}async function Yl(t,e,r,i){let[n]=await S.PublicKey.findProgramAddress([as,e.toBuffer(),r.toBuffer(),i.toArrayLike(Buffer,"le",8)],t);return n}function Jl(t,e){return t.poolTokenSupply.isZero()||t.totalLamports.isZero()?e:e.mul(t.poolTokenSupply).div(t.totalLamports)}async function ps(t,e,r,i,n,s){let c=await t.getAccountInfo(e.validatorList),l=ri.decode(c?.data);if(!l?.validators||l?.validators.length==0)throw new Error("No accounts found");let u=await t.getMinimumBalanceForRentExemption(S.StakeProgram.space),m=new Be.default(u+lr),f=[];for(let w of l.validators){if(w.status!==0)continue;let D=await oi(fe,w.voteAccountAddress,r);if(!w.activeStakeLamports.isZero()){let M=e?.preferredWithdrawValidatorVoteAddress?.equals(w.voteAccountAddress);f.push({type:M?"preferred":"active",voteAddress:w.voteAccountAddress,stakeAddress:D,lamports:w.activeStakeLamports})}let L=w.transientStakeLamports.sub(m);if(L.gt(new Be.default(0))){let M=await Yl(fe,w.voteAccountAddress,r,w.transientSeedSuffixStart);f.push({type:"transient",voteAddress:w.voteAccountAddress,stakeAddress:M,lamports:L})}}f=f.sort(n||((w,D)=>D.lamports.sub(w.lamports).toNumber()));let d=await t.getAccountInfo(e.reserveStake),g=new Be.default((d?.lamports??0)-u);g.gt(new Be.default(0))&&f.push({type:"reserve",stakeAddress:e.reserveStake,lamports:g});let y=[],A=new Be.default(i),h=e.stakeWithdrawalFee,k={numerator:h.denominator.sub(h.numerator),denominator:h.denominator};for(let w of["preferred","active","transient","reserve"]){let D=f.filter(L=>L.type==w);for(let{stakeAddress:L,voteAddress:M,lamports:G}of D){if(G.lte(m)&&w=="transient")continue;let ge=Jl(e,G);!s&&!k.numerator.isZero()&&(ge=ge.mul(k.denominator).div(k.numerator));let Me=Be.default.min(ge,A);if(!Me.lte(new Be.default(0))&&(y.push({stakeAddress:L,voteAddress:M,poolAmount:Me}),A=A.sub(Me),A.isZero()))break}if(A.isZero())break}if(A.gt(new Be.default(0)))throw new Error(`No stake accounts found in this pool with enough balance to withdraw ${It(i)} pool tokens.`);return y}function ds(t,e,r){let i=S.Keypair.generate();return e.push(S.SystemProgram.createAccount({fromPubkey:t,newAccountPubkey:i.publicKey,lamports:r,space:S.StakeProgram.space,programId:S.StakeProgram.programId})),i}function ai(t){let e,r;return t.solWithdrawalFee&&(e=t.solWithdrawalFee.numerator.toNumber()*100/t.solWithdrawalFee.denominator.toNumber()),t.stakeWithdrawalFee&&(r=t.stakeWithdrawalFee.numerator.toNumber()*100/t.stakeWithdrawalFee.denominator.toNumber()),{solWithdrawalFee:e,stakeWithdrawalFee:r}}async function mn(t,e){let r=await t.getAccountInfo(e);if(!r)throw new Error("Invalid stake pool account");return{pubkey:e,account:{data:ls.decode(r.data),executable:r.executable,lamports:r.lamports,owner:r.owner}}}async function $l(t,e){let r=(await t.getParsedAccountInfo(e)).value;if(!r||!("parsed"in r.data))throw new Error("Invalid stake account");if(r.data.program!="stake")throw new Error("Not a stake account");return us.parse(r.data.parsed)}async function ms(t,e,r,i,n,s,c,l){let u=await t.getBalance(r,"confirmed");if(u<i)throw new Error(`Not enough SOL to deposit into pool. Maximum deposit amount is ${It(u)} SOL.`);let f=(await mn(t,e)).account.data,d=new S.Keypair,g=[d],y=[];if(y.push(S.SystemProgram.transfer({fromPubkey:r,toPubkey:d.publicKey,lamports:i})),!n){let w=Pr(f.poolMint,r);y.push(jn(r,w,r,f.poolMint)),n=w}let A=await ni(fe,e);y.push(Gt.depositSol({stakePool:e,reserveStake:f.reserveStake,fundingAccount:d.publicKey,destinationPoolAccount:n,managerFeeAccount:f.managerFeeAccount,referralPoolAccount:c??n,poolMint:f.poolMint,lamports:i,withdrawAuthority:A,depositAuthority:l,referralAccount:s}));let{solWithdrawalFee:h,stakeWithdrawalFee:k}=ai(f);return{instructions:y,signers:g,solWithdrawalFee:h,stakeWithdrawalFee:k}}async function fs(t,e,r,i,n=!1,s,c,l,u){let m=await mn(t,e),f=new Qt.default(dn(i));l||(l=Pr(m.account.data.poolMint,r));let d=await pi(t,l);if(d.amount<f.toNumber())throw new Error(`Not enough token balance to withdraw ${It(f)} pool tokens.
          Maximum withdraw amount is ${It(d.amount)} pool tokens.`);let g=await t.getMinimumBalanceForRentExemption(S.StakeProgram.space),y=await ni(fe,e),A=null;c&&(A=await $l(t,c));let h=[];if(n)h.push({stakeAddress:m.account.data.reserveStake,voteAddress:void 0,poolAmount:f});else if(A&&A?.type=="delegated"){let x=A.info?.stake?.delegation.voter;if(!x)throw new Error(`Invalid stake reciever ${c} delegation`);let be=await t.getAccountInfo(m.account.data.validatorList),te=ri.decode(be?.data).validators.find(ue=>ue.voteAccountAddress.equals(x));if(s&&s!==x)throw new Error(`Provided withdrawal vote account ${s} does not match delegation on stake receiver account ${x},
        remove this flag or provide a different stake account delegated to ${s}`);if(te){let ue=await oi(fe,x,e),He=await t.getAccountInfo(ue);if(!He)throw new Error("Preferred withdraw valdator's stake account is invalid");let et=ii(m.account.data,new Qt.default(He.lamports-lr-g));if(et.lt(f))throw new Error(`Not enough lamports available for withdrawal from ${ue},
              ${f} asked, ${et} available.`);h.push({stakeAddress:ue,voteAddress:x,poolAmount:f})}else throw new Error(`Provided stake account is delegated to a vote account ${x} which does not exist in the stake pool`)}else if(s){let x=await oi(fe,s,e),be=await t.getAccountInfo(x);if(!be)throw new Error("Invalid Stake Account");let ke=new Qt.default(be.lamports-lr-g);if(ke.lt(new Qt.default(0)))throw new Error("Invalid Stake Account");let te=ii(m.account.data,ke);if(te.lt(f))throw new Error(`Not enough lamports available for withdrawal from ${x},
            ${f} asked, ${te} available.`);h.push({stakeAddress:x,voteAddress:s,poolAmount:f})}else{let x=await ps(t,m.account.data,e,f,u,l.equals(m.account.data.managerFeeAccount));h.push(...x)}let k=[],w=S.Keypair.generate(),D=[w];k.push(vi(l,w.publicKey,r,f.toNumber()));let L=0,M=5,G=0;for(let x of h){if(G>M)break;let ke=`Withdrawing \u25CE${ii(m.account.data,x.poolAmount)},
        from stake account ${x.stakeAddress?.toBase58()}`;x.voteAddress&&(ke=`${ke}, delegated to ${x.voteAddress?.toBase58()}`);let te;if(!c||A&&A.type==="delegated"){let ue=ds(r,k,g);D.push(ue),L+=g,te=ue.publicKey}else te=c;k.push(Gt.withdrawStake({stakePool:e,validatorList:m.account.data.validatorList,validatorStake:x.stakeAddress,destinationStake:te,destinationStakeAuthority:r,sourceTransferAuthority:w.publicKey,sourcePoolAccount:l,managerFeeAccount:m.account.data.managerFeeAccount,poolMint:m.account.data.poolMint,poolTokens:x.poolAmount.toNumber(),withdrawAuthority:y})),G++}c&&A&&A.type==="delegated"&&D.forEach(x=>{k.concat(S.StakeProgram.merge({stakePubkey:c,sourceStakePubKey:x.publicKey,authorizedPubkey:r}).instructions)});let{solWithdrawalFee:ge,stakeWithdrawalFee:Me}=ai(m.account.data);return{instructions:k,signers:D,stakeReceiver:c,totalRentFreeBalances:L,solWithdrawalFee:ge,stakeWithdrawalFee:Me}}async function Ss(t,e,r,i,n,s){let c=await mn(t,e),l=new Qt.default(dn(n)),u=Pr(c.account.data.poolMint,r),m=await pi(t,u);if(m.amount<l.toNumber())throw new Error(`Not enough token balance to withdraw ${It(l)} pool tokens.
            Maximum withdraw amount is ${It(m.amount)} pool tokens.`);let f=[],d=S.Keypair.generate(),g=[d];f.push(vi(u,d.publicKey,r,l.toNumber()));let y=await ni(fe,e);if(s){let w=c.account.data.solWithdrawAuthority;if(!w)throw new Error("SOL withdraw authority specified in arguments but stake pool has none");if(s.toBase58()!=w.toBase58())throw new Error(`Invalid deposit withdraw specified, expected ${w.toBase58()}, received ${s.toBase58()}`)}let A=Gt.withdrawSol({stakePool:e,withdrawAuthority:y,reserveStake:c.account.data.reserveStake,sourcePoolAccount:u,sourceTransferAuthority:d.publicKey,destinationSystemAccount:i,managerFeeAccount:c.account.data.managerFeeAccount,poolMint:c.account.data.poolMint,poolTokens:l.toNumber(),solWithdrawAuthority:s});f.push(A);let{solWithdrawalFee:h,stakeWithdrawalFee:k}=ai(c.account.data);return{instructions:f,signers:g,solWithdrawalFee:h,stakeWithdrawalFee:k}}var fn=async({connection:t,stakePoolAddress:e,ownerAddress:r,amount:i,poolTokenAccountAddress:n})=>{let s=new S.PublicKey(e),c=new S.PublicKey(r),l=n?new S.PublicKey(n):void 0,u=new S.PublicKey($r(r)),{instructions:m,signers:f,solWithdrawalFee:d,stakeWithdrawalFee:g}=await ms(t,s,c,i,l,u),y=(await t.getLatestBlockhash("confirmed")).blockhash,A=new Q.VersionedTransaction(new Q.TransactionMessage({instructions:m,payerKey:c,recentBlockhash:y}).compileToV0Message());return{transaction:await Ct(A,{connection:Ar(Ce.Solana.Mainnet),calculators:{cost:hr,budget:new br(2e5,2e5)}}),signers:f,solWithdrawalFee:d,stakeWithdrawalFee:g}};o();a();async function ys({connection:t,stakePoolAddress:e,amount:r,senderAddress:i,useWithdrawSol:n}){let s=new S.PublicKey(i),c,l,u,m;if(n){let y=await Ss(t,new S.PublicKey(e),s,s,r).catch(A=>{throw Z.captureError(A,"staking"),A});c=y.instructions,l=y.signers,u=y.solWithdrawalFee,m=y.stakeWithdrawalFee}else{let y=await fs(t,new S.PublicKey(e),s,r).catch(A=>{throw Z.captureError(A,"staking"),A});c=y.instructions,l=y.signers,u=y.solWithdrawalFee,m=y.stakeWithdrawalFee}let f=(await t.getLatestBlockhash("confirmed")).blockhash,d=new Q.VersionedTransaction(new Q.TransactionMessage({instructions:c,payerKey:s,recentBlockhash:f}).compileToV0Message());return{transaction:await Ct(d,{connection:t}),signers:l,solWithdrawalFee:u,stakeWithdrawalFee:m}}async function Xl({connection:t,stakePoolAddress:e,amount:r,senderAddress:i,useWithdrawSol:n}){try{let s=await ys({connection:t,stakePoolAddress:e,amount:r,senderAddress:i,useWithdrawSol:n}),c=await t.simulateTransaction(s.transaction,{sigVerify:!1});if(c.value.err)throw new Error(`Simulation failed with useWithdrawSol: true - ${JSON.stringify(c.value.err)}`);return{...s,isWithdrawSol:n}}catch(s){Z.captureError(s instanceof Error?s:new Error(String(s)),"staking");try{return{...await ys({connection:t,stakePoolAddress:e,amount:r,senderAddress:i,useWithdrawSol:!1}),isWithdrawSol:!1}}catch(c){throw Z.captureError(c instanceof Error?c:new Error(String(c)),"staking"),c}}}var gs=t=>{let e=E.getMintTokenTransaction({stakePoolAddress:t.stakePoolAddress,ownerAddress:t.ownerAddress,amount:t.amount,poolTokenAccountAddress:t.poolTokenAccountAddress}),r=!!t.stakePoolAddress&&!!t.ownerAddress&&!!t.amount;return _({enabled:r,queryKey:e,staleTime:1/0,async queryFn(){if(q.isSolanaNetworkID(t.networkId))try{let{transaction:i,signers:n,solWithdrawalFee:s,stakeWithdrawalFee:c}=await fn(t);return{networkID:t.networkId,transaction:i,signers:n,solWithdrawalFee:s,stakeWithdrawalFee:c}}catch(i){throw Z.captureError(i,"staking"),i}throw new Error(`Unsupported networkId: ${t.networkId}`)}})};var Zl=t=>{let e=F(y=>y.provider),r=F(y=>y.amount),i=F(y=>y.setTransactionData),{data:n}=nt("solana"),{connection:s}=Rt(),{fungible:c}=Je({key:e?.stakePoolTokenMetadata.metadata.address||""}),l=c?to(c):void 0,{trackMintApprovedByUser:u}=Le(),{data:m,isPending:f}=gs({amount:$(r).toNumber(),connection:s,networkId:e?.chainId??q.solana.mainnetID,stakePoolAddress:e?.stakePoolAddress??"",ownerAddress:n?.address??"",poolTokenAccountAddress:l}),d=va({process:"mint",transactionData:m,isLoadingTransactionData:f}),g=(0,ks.useCallback)(()=>{u({provider:e,payAmount:d.payAsset?.amount,receiveAmount:d.receiveAsset?.amount,payAmountUSD:d.payAsset?.amountUsd,receiveAmountUSD:d.receiveAsset?.amountUsd,payAssetTitle:d.payAsset?.title,receiveAssetTitle:d.receiveAsset?.title,providerName:d.providerName}),i(m),t()},[u,e,d.payAsset?.amount,d.payAsset?.amountUsd,d.payAsset?.title,d.receiveAsset?.amount,d.receiveAsset?.amountUsd,d.receiveAsset?.title,d.providerName,i,m,t]);return{...d,onPrimaryButtonPress:g}};o();a();var ep=I(O());o();a();o();a();var pr=I(O());var tp=(t,e)=>{let{navigateToJitoSOLInfoPage:r,navigateToStake:i,navigateToUnstake:n,navigateToExternalLink:s}=t,{trackMintModalContinue:c}=Le(),l=Ye("enable-psol-staking"),u=Ye("enable-deposit-psol-with-kamino-link"),d=!e||e===Xn?l?B:st:e,g=(0,pr.useCallback)(()=>{d===B?i(d):r()},[r,i,d]),y=(0,pr.useCallback)(()=>{c(d),i(d)},[i,c,d]),A=(0,pr.useCallback)(()=>{d===B?n():s(wi)},[n,s,d]),h=(0,pr.useCallback)(()=>{s(Ii)},[s]),k=Ni({method:"mint",goToInfoPage:g,goToInitFlowPage:y});return Pt(d)?{isSupported:!0,onStake:k,onUnstake:A,onDepositWithKamino:u?h:void 0}:{isSupported:!1,onStake:void 0,onUnstake:void 0,onDepositWithKamino:void 0}};o();a();var Ht=I(O()),rp="https://phantom.com/en-GB/uk-risk-summary";function Sn({navigateToExternalLink:t,paddingTop:e}){let{t:r}=X();return Ht.default.createElement(re,{backgroundColor:"brandMidnight",paddingX:"screen",paddingBottom:12,style:{paddingTop:e+4},gap:8},Ht.default.createElement(K,null,Ht.default.createElement(Bt,null,Ht.default.createElement(K,{font:"caption",color:"textPrimary"},r("stakingUKDisclaimerPart1"))," ",Ht.default.createElement(K,{font:"captionSemibold",color:"textPrimary",onPress:()=>t(rp),style:{textDecorationLine:"underline"}},r("stakingUKDisclaimerTake2Mins")))))}o();a();var yn=I(O());function ip({navigateToMintLiquidStakeAmountPage:t,navigateBack:e}){let{trackMintModalContinue:r}=Le(),i=(0,yn.useCallback)(()=>{r(B),t(B)},[t,r]),n=(0,yn.useCallback)(()=>{e()},[e]),s={imageUrl:"https://assets.phantom.app/assets/metadata/PSOL.png",title:v.t("mintPSOLInfoPageTitle"),features:[{icon:"InfoCircle",title:v.t("mintPSOLFeature1Title"),description:v.t("mintPSOLFeature1Description")},{icon:"TrendingUp",title:v.t("mintPSOLFeature2Title"),description:v.t("mintPSOLFeature2Description")},{icon:"ShieldVerified",title:v.t("mintPSOLFeature3Title"),description:v.t("mintPSOLFeature3Description")}],primaryButtonText:v.t("gotIt")};return{onPrimaryButtonPress:i,onClose:n,viewState:s}}o();a();var ye=I(O());o();a();var Se=I(O());function As({marginTop:t}){let{t:e}=X();return Se.default.createElement(re,{marginTop:t},Se.default.createElement(ui,{content:Se.default.createElement(re,{padding:16},Se.default.createElement(K,null,e("stakingUKDisclaimerPastPerformanceBody")))},Se.default.createElement(K,{font:"caption",color:"brandYellowMoon"},e("stakingUKDisclaimerPastPerformance"))),Se.default.createElement(K,null,Se.default.createElement(Bt,null,Se.default.createElement(K,{font:"caption",color:"textSecondary"},e("stakingUKDisclaimerExchangeRates"))," ")),Se.default.createElement(ui,{content:Se.default.createElement(re,{padding:16},Se.default.createElement(K,null,e("stakingUKDisclosuresMarketDataBody")))},Se.default.createElement(K,{font:"caption",color:"brandPrimary"},e("stakingUKDisclaimerDisclosures"))),Se.default.createElement(K,{font:"caption",color:"textSecondary",marginTop:24},e("stakingUKDisclaimerApproval")))}var np={InfoCircle:kr.InfoCircle,TrendingUp:kr.TrendingUp,ShieldVerified:kr.ShieldVerified};function op(t){return ye.default.createElement(np[t],{size:24})}function ap({viewState:t,openLink:e,paddingTop:r,onPastPerformancePress:i,onDisclosuresPress:n}){let{features:s,title:c,imageUrl:l}=t;return ye.default.createElement(re,{flex:1,backgroundColor:"bgWallet",borderRadius:"row",width:"100%",maxWidth:400},ye.default.createElement(Sn,{paddingTop:r??0,navigateToExternalLink:e}),ye.default.createElement(re,{alignItems:"center",padding:24,marginY:16},ye.default.createElement(qn,{src:l,size:100})),ye.default.createElement(K,{color:"white",font:"title1Bold",marginBottom:16,align:"center"},c),ye.default.createElement(re,{gap:"list",marginBottom:"screen"},s.map(u=>ye.default.createElement(re,{key:u.title,direction:"row",alignItems:"flex-start",marginBottom:16},ye.default.createElement(re,{width:24,height:24,marginRight:"screen",alignItems:"center",justifyContent:"center"},op(u.icon)),ye.default.createElement(re,{flex:1},ye.default.createElement(K,{color:"white",font:"bodySemibold",marginBottom:2},u.title),ye.default.createElement(K,{color:"textSecondary",font:"caption"},u.description))))),ye.default.createElement(As,{marginTop:0,onPastPerformancePress:i,onDisclosuresPress:n}))}o();a();o();a();var sp=["liquidStakingSupportedTokens","featureUsed",Di],cp=t=>{let e=String(t.queryKey[1]);return sp.includes(e)};export{Ut as a,Re as b,Ls as c,mi as d,xs as e,Ms as f,Bs as g,Fs as h,Os as i,Si as j,bt as k,Cs as l,lo as m,Oe as n,Rs as o,qs as p,Ks as q,Ws as r,Gs as s,Ys as t,Js as u,qe as v,$s as w,Xs as x,Zs as y,st as z,xr as A,er as B,Mc as C,hk as D,Io as E,E as F,Mr as G,lc as H,F as I,cp as J,rr as K,Dr as L,Ci as M,$o as N,ct as O,ma as P,Zc as Q,yc as R,kc as S,Pg as T,bc as U,Pc as V,_c as W,xc as X,Cc as Y,yb as Z,Vc as _,Pt as $,vt as aa,Rr as ba,Ni as ca,Nc as da,Xo as ea,Jc as fa,wt as ga,Sa as ha,Qv as ia,ha as ja,va as ka,jl as la,Xl as ma,Le as na,Zl as oa,ua as pa,pa as qa,fa as ra,ru as sa,iu as ta,tp as ua,Sn as va,ip as wa,As as xa,ap as ya};
//# sourceMappingURL=chunk-T66NYVB2.js.map
